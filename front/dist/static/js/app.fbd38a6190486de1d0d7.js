webpackJsonp([0],[,,,function(t,e,a){"use strict";var i=a(259),s=a.n(i);s.a.useDefaults(),e.a={get:s.a.get,default:s.a.get("default")}},,,,,function(t,e,a){function i(t){a(442)}var s=a(1)(a(443),a(444),i,"data-v-772f3038",null);t.exports=s.exports},,,,,,function(t,e,a){"use strict";var i=a(36),s={clean:function(t){return t.tracks=t.tracks.map(function(e){return e.artist=t.artist,e.album=t,e}),t}},n={clean:function(t){return t.albums=t.albums.map(function(t){return s.clean(t)}),t}};e.a={absoluteUrl:function(t){if(t.startsWith("http"))return t;if(t.startsWith("/")){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+t}return i.a.BACKEND_URL+t},Artist:n,Album:s}},,,,function(t,e,a){function i(t){a(413)}var s=a(1)(a(414),a(415),i,"data-v-08750ba9",null);t.exports=s.exports},function(t,e,a){function i(t){a(423)}var s=a(1)(a(424),a(425),i,"data-v-4e656baf",null);t.exports=s.exports},function(t,e,a){function i(t){a(449)}var s=a(1)(a(450),a(458),i,"data-v-69090077",null);t.exports=s.exports},,,,,,function(t,e,a){var i=a(1)(a(440),null,null,null,null);t.exports=i.exports},,,,function(t,e,a){t.exports=a.p+"static/img/default-cover.b23ecea.png"},function(t,e,a){var i=a(1)(a(441),null,null,null,null);t.exports=i.exports},function(t,e,a){"use strict";function i(t){return t=Math.floor(t),t<10?"0"+t:t+""}e.a={parse:function(t){var e=0;return e=Math.floor(t/60),t-=60*e,i(e)+":"+i(t)}}},,,,function(t,e,a){"use strict";var i=a(311),s=a.n(i),n=function t(){s()(this,t),this.BACKEND_URL="/",this.API_URL=this.BACKEND_URL+"api/v1/"};e.a=new n},function(t,e,a){"use strict";var i=a(11),s=a(330),n=a(331),r=a.n(n),o=a(335),l=a.n(o),c=a(343),u=a.n(c),d=a(348),v=a.n(d),p=a(362),f=a.n(p),h=a(368),m=a.n(h),_=a(372),g=a.n(_),b=a(377),y=a.n(b),C=a(385),k=a.n(C),x=a(389),w=a.n(x),$=a(393),P=a.n($),j=a(397),q=a.n(j),I=a(401),A=a.n(I),T=a(405),L=a.n(T),S=a(432),D=a.n(S),E=a(437),R=a.n(E),F=a(446),O=a.n(F),B=a(460),N=a.n(B),M=a(464),U=a.n(M),z=a(524),Q=a.n(z),K=a(528),W=a.n(K),V=a(533),G=a.n(V),H=a(536),Y=a.n(H),J=a(540),X=a.n(J),Z=a(544),tt=a.n(Z),et=a(548),at=a.n(et),it=a(559),st=a.n(it),nt=a(571),rt=a.n(nt),ot=a(575),lt=a.n(ot),ct=a(582),ut=a.n(ct),dt=a(586),vt=a.n(dt),pt=a(596),ft=a.n(pt),ht=a(600),mt=a.n(ht),_t=a(608),gt=a.n(_t),bt=a(614),yt=a.n(bt),Ct=a(618),kt=a.n(Ct),xt=a(622),wt=a.n(xt);i.a.use(s.a),e.a=new s.a({mode:"history",linkActiveClass:"active",routes:[{path:"/",name:"index",component:u.a},{path:"/about",name:"about",component:l.a},{path:"/activity",name:"activity",component:v.a},{path:"/login",name:"login",component:f.a,props:function(t){return{next:t.query.next||"/library"}}},{path:"/auth/password/reset",name:"auth.password-reset",component:w.a,props:function(t){return{defaultEmail:t.query.email}}},{path:"/auth/email/confirm",name:"auth.email-confirm",component:q.a,props:function(t){return{defaultKey:t.query.key}}},{path:"/auth/password/reset/confirm",name:"auth.password-reset-confirm",component:P.a,props:function(t){return{defaultUid:t.query.uid,defaultToken:t.query.token}}},{path:"/signup",name:"signup",component:m.a},{path:"/logout",name:"logout",component:k.a},{path:"/settings",name:"settings",component:y.a},{path:"/@:username",name:"profile",component:g.a,props:!0},{path:"/favorites",component:rt.a,props:function(t){return{defaultOrdering:t.query.ordering,defaultPage:t.query.page,defaultPaginateBy:t.query.paginateBy}}},{path:"/manage/settings",name:"manage.settings",component:lt.a},{path:"/manage/federation",component:ft.a,children:[{path:"scan",name:"federation.libraries.scan",component:mt.a},{path:"libraries",name:"federation.libraries.list",component:yt.a,props:function(t){return{defaultOrdering:t.query.ordering,defaultQuery:t.query.query,defaultPaginateBy:t.query.paginateBy,defaultPage:t.query.page}}},{path:"tracks",name:"federation.tracks.list",component:kt.a,props:function(t){return{defaultOrdering:t.query.ordering,defaultQuery:t.query.query,defaultPaginateBy:t.query.paginateBy,defaultPage:t.query.page}}},{path:"followers",name:"federation.followers.list",component:wt.a,props:function(t){return{defaultOrdering:t.query.ordering,defaultQuery:t.query.query,defaultPaginateBy:t.query.paginateBy,defaultPage:t.query.page}}},{path:"libraries/:id",name:"federation.libraries.detail",component:gt.a,props:!0}]},{path:"/manage/library",component:ut.a,children:[{path:"files",name:"manage.library.files",component:vt.a}]},{path:"/library",component:A.a,children:[{path:"",component:L.a},{path:"artists/",name:"library.artists.browse",component:R.a,props:function(t){return{defaultOrdering:t.query.ordering,defaultQuery:t.query.query,defaultPaginateBy:t.query.paginateBy,defaultPage:t.query.page}}},{path:"radios/",name:"library.radios.browse",component:Q.a,props:function(t){return{defaultOrdering:t.query.ordering,defaultQuery:t.query.query,defaultPaginateBy:t.query.paginateBy,defaultPage:t.query.page}}},{path:"radios/build",name:"library.radios.build",component:W.a,props:!0},{path:"radios/build/:id",name:"library.radios.edit",component:W.a,props:!0},{path:"radios/:id",name:"library.radios.detail",component:G.a,props:!0},{path:"playlists/",name:"library.playlists.browse",component:st.a,props:function(t){return{defaultOrdering:t.query.ordering,defaultQuery:t.query.query,defaultPaginateBy:t.query.paginateBy,defaultPage:t.query.page}}},{path:"playlists/:id",name:"library.playlists.detail",component:at.a,props:function(t){return{id:t.params.id,defaultEdit:"edit"===t.query.mode}}},{path:"artists/:id",name:"library.artists.detail",component:D.a,props:!0},{path:"albums/:id",name:"library.albums.detail",component:O.a,props:!0},{path:"tracks/:id",name:"library.tracks.detail",component:N.a,props:!0},{path:"import/launch",name:"library.import.launch",component:U.a,props:function(t){return{source:t.query.source,request:t.query.request,mbType:t.query.type,mbId:t.query.id}}},{path:"import/batches",name:"library.import.batches",component:Y.a,children:[]},{path:"import/batches/:id",name:"library.import.batches.detail",component:X.a,props:!0},{path:"requests/",name:"library.requests",component:tt.a,props:function(t){return{defaultOrdering:t.query.ordering,defaultQuery:t.query.query,defaultPaginateBy:t.query.paginateBy,defaultPage:t.query.page,defaultStatus:t.query.status||"any"}},children:[]}]},{path:"*",component:r.a}]})},function(t,e,a){var i=a(1)(a(365),a(366),null,null,null);t.exports=i.exports},,,,,,,,,,function(t,e,a){function i(t){a(316)}var s=a(1)(a(317),a(318),i,"data-v-6fc3558e",null);t.exports=s.exports},function(t,e,a){function i(t){a(455)}var s=a(1)(a(456),a(457),i,"data-v-431751a4",null);t.exports=s.exports},,,,,,,,,,,,,,,,,function(t,e,a){function i(t){a(319)}var s=a(1)(a(320),a(321),i,"data-v-387fe2ce",null);t.exports=s.exports},function(t,e,a){function i(t){a(417)}var s=a(1)(a(418),a(419),i,"data-v-59960085",null);t.exports=s.exports},function(t,e,a){function i(t){a(490)}var s=a(1)(a(491),a(492),i,"data-v-ebb8df60",null);t.exports=s.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";e.a={updateQueryString:function(t,e,a){var i=new RegExp("([?&])"+e+"=.*?(&|$)","i"),s=-1!==t.indexOf("?")?"&":"?";return t.match(i)?t.replace(i,"$1"+e+"="+a+"$2"):t+s+e+"="+a}}},function(t,e,a){function i(t){a(411)}var s=a(1)(a(412),a(416),i,"data-v-6f4f91d3",null);t.exports=s.exports},function(t,e,a){function i(t){a(421)}var s=a(1)(a(422),a(426),i,"data-v-718415cd",null);t.exports=s.exports},,function(t,e,a){function i(t){a(467)}var s=a(1)(a(468),a(472),i,"data-v-387697e1",null);t.exports=s.exports},function(t,e,a){function i(t){a(480)}var s=a(1)(a(481),a(482),i,"data-v-698f7afb",null);t.exports=s.exports},function(t,e,a){function i(t){a(488)}var s=a(1)(a(489),a(498),i,"data-v-64c8a000",null);t.exports=s.exports},,function(t,e,a){var i=a(1)(a(530),a(531),null,null,null);t.exports=i.exports},function(t,e,a){function i(t){a(553)}var s=a(1)(a(554),a(555),i,"data-v-0f44ac7c",null);t.exports=s.exports},,function(t,e,a){function i(t){a(591)}var s=a(1)(a(592),a(593),i,"data-v-51915a1e",null);t.exports=s.exports},function(t,e,a){var i=a(1)(a(605),a(606),null,null,null);t.exports=i.exports},function(t,e,a){var i=a(1)(a(611),a(612),null,null,null);t.exports=i.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(73),s=a.n(i),n=a(3),r=a(11),o=a(262),l=a.n(o),c=a(37),u=a(2),d=a.n(u),v=a(647),p=a(653),f=a.n(p),h=a(654),m=a(663),_=a.n(m),g=a(668),b=a.n(g),y=a(669),C=a(36),k=a(684);a.n(k),a(685),a(688);n.a.default.info("Loading environment:","production"),n.a.default.debug("Environment variables:",Object({NODE_ENV:"production",BACKEND_URL:"/"})),Object(k.sync)(y.a,c.a),window.$=window.jQuery=a(4),a(698),a(699),r.a.use(b.a),r.a.use(v.a),r.a.use(f.a),r.a.config.productionTip=!1,r.a.directive("title",{inserted:function(t,e){var a=[],i=y.a.state.instance.settings.instance.name.value;0===i.length&&(i="Funkwhale"),a.unshift(i),a.unshift(e.value),document.title=a.join(" - ")},updated:function(t,e){var a=[],i=y.a.state.instance.settings.instance.name.value;0===i.length&&(i="Funkwhale"),a.unshift(i),a.unshift(e.value),document.title=a.join(" - ")}}),d.a.defaults.baseURL=C.a.API_URL,d.a.interceptors.request.use(function(t){return y.a.state.auth.token&&(t.headers.Authorization=y.a.getters["auth/header"]),t},function(t){return s.a.reject(t)}),d.a.interceptors.response.use(function(t){return t},function(t){if(t.backendErrors=[],401===t.response.status&&(y.a.commit("auth/authenticated",!1),n.a.default.warn("Received 401 response from API, redirecting to login form"),c.a.push({name:"login",query:{next:c.a.currentRoute.fullPath}})),404===t.response.status)t.backendErrors.push("Resource not found");else if(403===t.response.status)t.backendErrors.push("Permission denied");else if(500===t.response.status)t.backendErrors.push("A server error occured");else if(t.response.data)for(var e in t.response.data)t.response.data.hasOwnProperty(e)&&t.response.data[e].forEach(function(e){t.backendErrors.push(e)});return 0===t.backendErrors.length&&t.backendErrors.push(h.a.t("An unknown error occured, ensure your are connected to the internet and your funkwhale instance is up and running")),s.a.reject(t)}),y.a.dispatch("auth/check"),h.a.use(_.a).init({lng:navigator.language,fallbackLng:["en"],preload:[navigator.language,"en"],backend:{loadPath:"/static/translations/{%lng%}.json"},interpolation:{prefix:"{%",suffix:"%}"}});var x=new b.a(h.a);new r.a({el:"#app",router:c.a,store:y.a,i18n:x,template:"<App/>",components:{App:l.a}}),n.a.default.info("Everything loaded!")},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){function i(t){a(263)}var s=a(1)(a(265),a(646),i,null,null);t.exports=s.exports},function(t,e){},,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(5),r=a.n(n),o=a(284),l=a.n(o),c=a(631),u=a.n(c),d=a(642),v=a.n(d);e.default={name:"app",components:{Sidebar:l.a,Raven:u.a,PlaylistModal:v.a},data:function(){return{nodeinfo:null}},created:function(){this.$store.dispatch("instance/fetchSettings");var t=this;setInterval(function(){t.$store.commit("ui/computeLastDate")},6e4),this.fetchNodeInfo()},methods:{fetchNodeInfo:function(){var t=this;s.a.get("instance/nodeinfo/2.0/").then(function(e){t.nodeinfo=e.data})}},computed:{version:function(){return this.nodeinfo?r.a.get(this.nodeinfo,"software.version"):null}}}},,,,,,,,,,,,,,,,,,,function(t,e,a){function i(t){a(285),a(286)}var s=a(1)(a(287),a(630),i,"data-v-f815bafc",null);t.exports=s.exports},function(t,e){},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(17),s=a.n(i),n=a(13),r=a(2),o=a.n(r),l=a(292),c=a.n(l),u=a(323),d=a.n(u),v=a(327),p=a.n(v),f=a(14),h=a(106),m=a.n(h),_=a(4),g=a.n(_);e.default={name:"sidebar",components:{Player:c.a,SearchBar:p.a,Logo:d.a,draggable:m.a},data:function(){return{selectedTab:"library",backend:f.a,isCollapsed:!0,fetchInterval:null,notifications:{federation:0,importRequests:0}}},mounted:function(){g()(this.$el).find(".menu .item").tab()},created:function(){this.fetchNotificationsCount(),this.fetchInterval=setInterval(this.fetchNotificationsCount,9e5)},destroy:function(){this.fetchInterval&&clearInterval(this.fetchInterval)},computed:s()({},Object(n.d)({queue:function(t){return t.queue},url:function(t){return t.route.path}}),{showAdmin:function(){return[this.$store.state.auth.availablePermissions.federation,this.$store.state.auth.availablePermissions.library,this.$store.state.auth.availablePermissions.upload].filter(function(t){return t}).length>0}}),methods:s()({},Object(n.b)({cleanTrack:"queue/cleanTrack"}),{fetchNotificationsCount:function(){this.fetchFederationNotificationsCount(),this.fetchFederationImportRequestsCount()},fetchFederationNotificationsCount:function(){if(this.$store.state.auth.availablePermissions.federation){var t=this;o.a.get("federation/libraries/followers/",{params:{pending:!0}}).then(function(e){t.notifications.federation=e.data.count})}},fetchFederationImportRequestsCount:function(){if(this.$store.state.auth.availablePermissions.library){var t=this;o.a.get("requests/import-requests/",{params:{status:"pending"}}).then(function(e){t.notifications.importRequests=e.data.count})}},reorder:function(t){this.$store.commit("queue/reorder",{oldIndex:t.oldIndex,newIndex:t.newIndex})},scrollToCurrent:function(){var t=g()(this.$el).find('[data-tab="queue"] .active')[0];if(t){var e=g()(this.$el).find(".tabs")[0];e.scrollTop=0,t.scrollIntoView(!0);var a=e.scrollHeight-e.scrollTop<=e.clientHeight?0:e.clientHeight/2;e.scrollTop=e.scrollTop-a}}}),watch:{url:function(){this.isCollapsed=!0},selectedTab:function(t){"queue"===t&&this.scrollToCurrent()},"$store.state.queue.currentIndex":function(){"queue"!==this.selectedTab&&this.scrollToCurrent()},"$store.state.availablePermissions":{handler:function(){this.fetchNotificationsCount()},deep:!0}}}},,,,,function(t,e,a){function i(t){a(293)}var s=a(1)(a(294),a(322),i,"data-v-1e81d1f8",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(94),s=a.n(i),n=a(17),r=a.n(n),o=a(13),l=a(301),c=a.n(l),u=a(309),d=a(310),v=a(312),p=a.n(v),f=a(48),h=a.n(f),m=a(66),_=a.n(m);e.default={name:"player",components:{TrackFavoriteIcon:h.a,TrackPlaylistIcon:_.a,GlobalEvents:c.a,AudioTrack:p.a},data:function(){var t=[[46,46,46],[46,46,46],[46,46,46],[46,46,46]];return{renderAudio:!0,sliderVolume:this.volume,Track:d.a,defaultAmbiantColors:t,ambiantColors:t}},mounted:function(){this.sliderVolume=this.volume},methods:r()({},Object(o.b)({togglePlay:"player/togglePlay",clean:"queue/clean",shuffle:"queue/shuffle",updateProgress:"player/updateProgress"}),{next:function(){var t=this;this.$store.dispatch("queue/next").then(function(){t.$emit("next")})},previous:function(){var t=this;this.$store.dispatch("queue/previous").then(function(){t.$emit("previous")})},touchProgress:function(t){var e=void 0,a=this.$refs.progress;e=t.layerX/a.offsetWidth*this.duration,this.$refs.currentAudio.setCurrentTime(e)},updateBackground:function(){if(!this.currentTrack.album.cover)return void(this.ambiantColors=this.defaultAmbiantColors);var t=this.$refs.cover;this.ambiantColors=u.a.prototype.getPalette(t,4).slice(0,4)}}),computed:r()({},Object(o.d)({currentIndex:function(t){return t.queue.currentIndex},playing:function(t){return t.player.playing},volume:function(t){return t.player.volume},looping:function(t){return t.player.looping},duration:function(t){return t.player.duration},queue:function(t){return t.queue}}),Object(o.c)({currentTrack:"queue/currentTrack",hasNext:"queue/hasNext",emptyQueue:"queue/isEmpty",durationFormatted:"player/durationFormatted",currentTimeFormatted:"player/currentTimeFormatted",progress:"player/progress"}),{style:function(){return{background:this.ambiantGradiant}},ambiantGradiant:function(){var t=[{orientation:330,percent:100,opacity:.7},{orientation:240,percent:90,opacity:.7},{orientation:150,percent:80,opacity:.7},{orientation:60,percent:70,opacity:.7}];return this.ambiantColors.map(function(e,a){var i=s()(e,3),n=i[0],r=i[1],o=i[2],l=t[a];return"linear-gradient("+l.orientation+"deg, rgba("+n+", "+r+", "+o+", "+l.opacity+") 10%, rgba(255, 255, 255, 0) "+l.percent+"%)"}).join(", ")}}),watch:{currentTrack:function(t){t&&t.album.cover||(this.ambiantColors=this.defaultAmbiantColors)},currentIndex:function(t,e){var a=this;t!==e&&(this.renderAudio=!1,this.$nextTick(function(){a.renderAudio=!0}))},volume:function(t){this.sliderVolume=t},sliderVolume:function(t){this.$store.commit("player/volume",t)}}}},,,,,,,function(t,e,a){var i=a(1)(a(302),null,null,null,null);t.exports=i.exports},function(t,e,a){"use strict";function i(t){var e=t.match(v);return c()(e,1)[0].split("").reduce(function(t,e){return t[f[e]]=!0,t},{})}Object.defineProperty(e,"__esModule",{value:!0});var s=a(95),n=a.n(s),r=a(306),o=a.n(r),l=a(94),c=a.n(l),u=a(4),d=a.n(u),v=/^[~!&]*/,p=/\W+/,f={"!":"capture","~":"once","&":"passive"};e.default={render:function(t){return t()},mounted:function(){var t=this;this._listeners=o()(null),n()(this.$listeners).forEach(function(e){var a=t.$listeners[e],s=function(t){d()(t.target).is(".field, :input, [contenteditable]")||a(t)};document.addEventListener(e.replace(p,""),s,i(e)),t._listeners[e]=a})},beforeDestroy:function(){for(var t in this._listeners)document.removeEventListener(t.replace(p,""),this._listeners[t])}}},,,,,,,function(t,e,a){"use strict";/*
 * Color Thief v2.0
 * by Lokesh Dhakar - http://www.lokeshdhakar.com
 *
 * Thanks
 * ------
 * Nick Rabinowitz - For creating quantize.js.
 * John Schulz - For clean up and optimization. @JFSIII
 * Nathan Spady - For adding drag and drop support to the demo page.
 *
 * License
 * -------
 * Copyright 2011, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://raw.githubusercontent.com/lokesh/color-thief/master/LICENSE
 *
 * @license
 */
var i=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=t.width,this.height=this.canvas.height=t.height,this.context.drawImage(t,0,0,this.width,this.height)};i.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},i.prototype.update=function(t){this.context.putImageData(t,0,0)},i.prototype.getPixelCount=function(){return this.width*this.height},i.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},i.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var s=function(){};/*!
 * quantize.js Copyright 2008 Nick Rabinowitz.
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 * @license
 */
/*!
 * Block below copied from Protovis: http://mbostock.github.com/protovis/
 * Copyright 2010 Stanford Visualization Group
 * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
 * @license
 */
if(s.prototype.getColor=function(t,e){return this.getPalette(t,5,e)[0]},s.prototype.getPalette=function(t,e,a){(void 0===e||e<2||e>256)&&(e=10),(void 0===a||a<1)&&(a=10);for(var s,n,o,l,c=new i(t),u=c.getImageData(),d=u.data,v=c.getPixelCount(),p=[],f=0;f<v;f+=a)s=4*f,n=d[s+0],o=d[s+1],l=d[s+2],d[s+3]>=125&&(n>250&&o>250&&l>250||p.push([n,o,l]));var h=r.quantize(p,e),m=h?h.palette():null;return c.removeCanvas(),m},s.prototype.getColorFromUrl=function(t,e,a){sourceImage=document.createElement("img");var i=this;sourceImage.addEventListener("load",function(){var s=i.getPalette(sourceImage,5,a),n=s[0];e(n,t)}),sourceImage.src=t},s.prototype.getImageData=function(t,e){xhr=new XMLHttpRequest,xhr.open("GET",t,!0),xhr.responseType="arraybuffer",xhr.onload=function(t){if(200==this.status){uInt8Array=new Uint8Array(this.response),a=uInt8Array.length,binaryString=new Array(a);for(var a=0;a<uInt8Array.length;a++)binaryString[a]=String.fromCharCode(uInt8Array[a]);data=binaryString.join(""),base64=window.btoa(data),e("data:image/png;base64,"+base64)}},xhr.send()},s.prototype.getColorAsync=function(t,e,a){var i=this;this.getImageData(t,function(t){sourceImage=document.createElement("img"),sourceImage.addEventListener("load",function(){var t=i.getPalette(sourceImage,5,a),s=t[0];e(s,this)}),sourceImage.src=t})},!n)var n={map:function(t,e){var a={};return e?t.map(function(t,i){return a.index=i,e.call(a,t)}):t.slice()},naturalOrder:function(t,e){return t<e?-1:t>e?1:0},sum:function(t,e){var a={};return t.reduce(e?function(t,i,s){return a.index=s,t+e.call(a,i)}:function(t,e){return t+e},0)},max:function(t,e){return Math.max.apply(null,e?n.map(t,e):t)}};var r=function(){function t(t,e,a){return(t<<2*c)+(e<<c)+a}function e(t){function e(){a.sort(t),i=!0}var a=[],i=!1;return{push:function(t){a.push(t),i=!1},peek:function(t){return i||e(),void 0===t&&(t=a.length-1),a[t]},pop:function(){return i||e(),a.pop()},size:function(){return a.length},map:function(t){return a.map(t)},debug:function(){return i||e(),a}}}function a(t,e,a,i,s,n,r){var o=this;o.r1=t,o.r2=e,o.g1=a,o.g2=i,o.b1=s,o.b2=n,o.histo=r}function i(){this.vboxes=new e(function(t,e){return n.naturalOrder(t.vbox.count()*t.vbox.volume(),e.vbox.count()*e.vbox.volume())})}function s(e){var a,i,s,n,r=1<<3*c,o=new Array(r);return e.forEach(function(e){i=e[0]>>u,s=e[1]>>u,n=e[2]>>u,a=t(i,s,n),o[a]=(o[a]||0)+1}),o}function r(t,e){var i,s,n,r=1e6,o=0,l=1e6,c=0,d=1e6,v=0;return t.forEach(function(t){i=t[0]>>u,s=t[1]>>u,n=t[2]>>u,i<r?r=i:i>o&&(o=i),s<l?l=s:s>c&&(c=s),n<d?d=n:n>v&&(v=n)}),new a(r,o,l,c,d,v,e)}function o(e,a){function i(t){var e,i,s,n,r,o=t+"1",l=t+"2",u=0;for(c=a[o];c<=a[l];c++)if(h[c]>f/2){for(s=a.copy(),n=a.copy(),e=c-a[o],i=a[l]-c,r=e<=i?Math.min(a[l]-1,~~(c+i/2)):Math.max(a[o],~~(c-1-e/2));!h[r];)r++;for(u=m[r];!u&&h[r-1];)u=m[--r];return s[l]=r,n[o]=s[l]+1,[s,n]}}if(a.count()){var s=a.r2-a.r1+1,r=a.g2-a.g1+1,o=a.b2-a.b1+1,l=n.max([s,r,o]);if(1==a.count())return[a.copy()];var c,u,d,v,p,f=0,h=[],m=[];if(l==s)for(c=a.r1;c<=a.r2;c++){for(v=0,u=a.g1;u<=a.g2;u++)for(d=a.b1;d<=a.b2;d++)p=t(c,u,d),v+=e[p]||0;f+=v,h[c]=f}else if(l==r)for(c=a.g1;c<=a.g2;c++){for(v=0,u=a.r1;u<=a.r2;u++)for(d=a.b1;d<=a.b2;d++)p=t(u,c,d),v+=e[p]||0;f+=v,h[c]=f}else for(c=a.b1;c<=a.b2;c++){for(v=0,u=a.r1;u<=a.r2;u++)for(d=a.g1;d<=a.g2;d++)p=t(u,d,c),v+=e[p]||0;f+=v,h[c]=f}return h.forEach(function(t,e){m[e]=f-t}),i(l==s?"r":l==r?"g":"b")}}function l(t,a){function l(t,e){for(var a,i=1,s=0;s<d;)if(a=t.pop(),a.count()){var n=o(c,a),r=n[0],l=n[1];if(!r)return;if(t.push(r),l&&(t.push(l),i++),i>=e)return;if(s++>d)return}else t.push(a),s++}if(!t.length||a<2||a>256)return!1;var c=s(t),u=0;c.forEach(function(){u++});var p=r(t,c),f=new e(function(t,e){return n.naturalOrder(t.count(),e.count())});f.push(p),l(f,v*a);for(var h=new e(function(t,e){return n.naturalOrder(t.count()*t.volume(),e.count()*e.volume())});f.size();)h.push(f.pop());l(h,a-h.size());for(var m=new i;h.size();)m.push(h.pop());return m}var c=5,u=8-c,d=1e3,v=.75;return a.prototype={volume:function(t){var e=this;return e._volume&&!t||(e._volume=(e.r2-e.r1+1)*(e.g2-e.g1+1)*(e.b2-e.b1+1)),e._volume},count:function(e){var a=this,i=a.histo;if(!a._count_set||e){var s,n,r,o,l=0;for(n=a.r1;n<=a.r2;n++)for(r=a.g1;r<=a.g2;r++)for(o=a.b1;o<=a.b2;o++)s=t(n,r,o),l+=i[s]||0;a._count=l,a._count_set=!0}return a._count},copy:function(){var t=this;return new a(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(e){var a=this,i=a.histo;if(!a._avg||e){var s,n,r,o,l,u=0,d=1<<8-c,v=0,p=0,f=0;for(n=a.r1;n<=a.r2;n++)for(r=a.g1;r<=a.g2;r++)for(o=a.b1;o<=a.b2;o++)l=t(n,r,o),s=i[l]||0,u+=s,v+=s*(n+.5)*d,p+=s*(r+.5)*d,f+=s*(o+.5)*d;a._avg=u?[~~(v/u),~~(p/u),~~(f/u)]:[~~(d*(a.r1+a.r2+1)/2),~~(d*(a.g1+a.g2+1)/2),~~(d*(a.b1+a.b2+1)/2)]}return a._avg},contains:function(t){var e=this,a=t[0]>>u;return gval=t[1]>>u,bval=t[2]>>u,a>=e.r1&&a<=e.r2&&gval>=e.g1&&gval<=e.g2&&bval>=e.b1&&bval<=e.b2}},i.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,a=0;a<e.size();a++)if(e.peek(a).vbox.contains(t))return e.peek(a).color;return this.nearest(t)},nearest:function(t){for(var e,a,i,s=this.vboxes,n=0;n<s.size();n++)((a=Math.sqrt(Math.pow(t[0]-s.peek(n).color[0],2)+Math.pow(t[1]-s.peek(n).color[1],2)+Math.pow(t[2]-s.peek(n).color[2],2)))<e||void 0===e)&&(e=a,i=s.peek(n).color);return i},forcebw:function(){var t=this.vboxes;t.sort(function(t,e){return n.naturalOrder(n.sum(t.color),n.sum(e.color))});var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var a=t.length-1,i=t[a].color;i[0]>251&&i[1]>251&&i[2]>251&&(t[a].color=[255,255,255])}},{quantize:l}}();e.a=s},function(t,e,a){"use strict";var i=a(14);e.a={getCover:function(t){return i.a.absoluteUrl(t.album.cover)}}},,function(t,e,a){function i(t){a(313)}var s=a(1)(a(314),a(315),i,"data-v-ba6e1210",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(17),s=a.n(i),n=a(13),r=a(96),o=a(5),l=a.n(o);e.default={props:{track:{type:Object},isCurrent:{type:Boolean,default:!1},startTime:{type:Number,default:0},autoplay:{type:Boolean,default:!1}},data:function(){return{sourceErrors:0,isUpdatingTime:!1}},computed:s()({},Object(n.d)({playing:function(t){return t.player.playing},currentTime:function(t){return t.player.currentTime},duration:function(t){return t.player.duration},volume:function(t){return t.player.volume},looping:function(t){return t.player.looping}}),{srcs:function(){var t=this,e=this.track.files[0];if(!e)return this.$store.dispatch("player/trackErrored"),[];var a=[{type:e.mimetype,url:e.path}];return this.$store.state.auth.authenticated&&a.forEach(function(e){e.url=r.a.updateQueryString(e.url,"jwt",t.$store.state.auth.token)}),a}}),methods:{errored:function(){var t=this;setTimeout(function(){t.$store.dispatch("player/trackErrored")},1e3)},sourceErrored:function(){this.sourceErrors+=1,this.sourceErrors>=this.srcs.length&&this.errored()},updateDuration:function(t){this.$refs.audio&&this.$store.commit("player/duration",this.$refs.audio.duration)},loaded:function(){this.$refs.audio&&(this.$refs.audio.volume=this.volume,this.$store.commit("player/resetErrorCount"),this.isCurrent&&(this.$store.commit("player/duration",this.$refs.audio.duration),this.startTime&&this.setCurrentTime(this.startTime),this.autoplay&&(this.$store.commit("player/playing",!0),this.$refs.audio.play())))},updateProgress:l.a.throttle(function(){this.isUpdatingTime=!0,this.$refs.audio&&this.$store.dispatch("player/updateProgress",this.$refs.audio.currentTime)},250),ended:function(){var t=1===this.$store.state.queue.tracks.length;1===this.looping||t&&2===this.looping?(this.setCurrentTime(0),this.$refs.audio.play()):this.$store.dispatch("player/trackEnded",this.track)},setCurrentTime:function(t){t<0|t>this.duration||(this.updateProgress(t),this.$refs.audio.currentTime=t)}},watch:{playing:function(t){!0===t?this.$refs.audio.play():this.$refs.audio.pause()},volume:function(t){this.$refs.audio.volume=t},currentTime:function(t){this.isUpdatingTime||this.setCurrentTime(t),this.isUpdatingTime=!1}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("audio",{ref:"audio",attrs:{preload:""},on:{error:t.errored,loadeddata:t.loaded,durationchange:t.updateDuration,timeupdate:t.updateProgress,ended:t.ended}},t._l(t.srcs,function(e){return a("source",{attrs:{src:e.url,type:e.type},on:{error:t.sourceErrored}})}))},staticRenderFns:[]}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{track:{type:Object},button:{type:Boolean,default:!1}},computed:{title:function(){return this.isFavorite?this.$t("Remove from favorites"):this.$t("Add to favorites")},isFavorite:function(){return this.$store.getters["favorites/isFavorite"](this.track.id)}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.button?a("button",{class:["ui","pink",{inverted:t.isFavorite},{favorited:t.isFavorite},"button"],on:{click:function(e){t.$store.dispatch("favorites/toggle",t.track.id)}}},[a("i",{staticClass:"heart icon"}),t._v(" "),t.isFavorite?a("i18next",{attrs:{path:"In favorites"}}):a("i18next",{attrs:{path:"Add to favorites"}})],1):a("i",{class:["favorite-icon","heart",{pink:t.isFavorite},{favorited:t.isFavorite},"link","icon"],attrs:{title:t.title},on:{click:function(e){t.$store.dispatch("favorites/toggle",t.track.id)}}})},staticRenderFns:[]}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{track:{type:Object},button:{type:Boolean,default:!1}},data:function(){return{showModal:!1}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.button?a("button",{class:["ui","button"],on:{click:function(e){t.$store.commit("playlists/chooseTrack",t.track)}}},[a("i",{staticClass:"list icon"}),t._v("\n  "+t._s(t.$t("Add to playlist..."))+"\n")]):a("i",{class:["playlist-icon","list","link","icon"],attrs:{title:t.$t("Add to playlist...")},on:{click:function(e){t.$store.commit("playlists/chooseTrack",t.track)}}})},staticRenderFns:[]}},function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui inverted segment player-wrapper",style:t.style},[i("div",{staticClass:"player"},[t.renderAudio&&t.currentTrack?i("audio-track",{key:t.currentTrack.id,ref:"currentAudio",attrs:{"is-current":!0,"start-time":t.$store.state.player.currentTime,autoplay:t.$store.state.player.playing,track:t.currentTrack}}):t._e(),t._v(" "),t.currentTrack?i("div",{staticClass:"track-area ui unstackable items"},[i("div",{staticClass:"ui inverted item"},[i("div",{staticClass:"ui tiny image"},[t.currentTrack.album.cover?i("img",{ref:"cover",attrs:{src:t.Track.getCover(t.currentTrack)},on:{load:t.updateBackground}}):i("img",{attrs:{src:a(30)}})]),t._v(" "),i("div",{staticClass:"middle aligned content"},[i("router-link",{staticClass:"small header discrete link track",attrs:{to:{name:"library.tracks.detail",params:{id:t.currentTrack.id}}}},[t._v("\n            "+t._s(t.currentTrack.title)+"\n          ")]),t._v(" "),i("div",{staticClass:"meta"},[i("router-link",{staticClass:"artist",attrs:{to:{name:"library.artists.detail",params:{id:t.currentTrack.artist.id}}}},[t._v("\n              "+t._s(t.currentTrack.artist.name)+"\n            ")]),t._v(" /\n            "),i("router-link",{staticClass:"album",attrs:{to:{name:"library.albums.detail",params:{id:t.currentTrack.album.id}}}},[t._v("\n              "+t._s(t.currentTrack.album.title)+"\n            ")])],1),t._v(" "),i("div",{staticClass:"description"},[t.$store.state.auth.authenticated?i("track-favorite-icon",{attrs:{track:t.currentTrack}}):t._e(),t._v(" "),t.$store.state.auth.authenticated?i("track-playlist-icon",{attrs:{track:t.currentTrack}}):t._e()],1)],1)])]):t._e(),t._v(" "),t.currentTrack?i("div",{staticClass:"progress-area"},[i("div",{staticClass:"ui grid"},[i("div",{staticClass:"left floated four wide column"},[i("p",{staticClass:"timer start",on:{click:function(e){t.updateProgress(0)}}},[t._v(t._s(t.currentTimeFormatted))])]),t._v(" "),i("div",{staticClass:"right floated four wide column"},[i("p",{staticClass:"timer total"},[t._v(t._s(t.durationFormatted))])])]),t._v(" "),i("div",{ref:"progress",staticClass:"ui small orange inverted progress",on:{click:t.touchProgress}},[i("div",{staticClass:"bar",style:{width:t.progress+"%"},attrs:{"data-percent":t.progress}})])]):t._e(),t._v(" "),i("div",{staticClass:"two wide column controls ui grid"},[i("div",{staticClass:"two wide column control",attrs:{title:t.$t("Previous track"),disabled:t.emptyQueue}},[i("i",{class:["ui","backward",{disabled:t.emptyQueue},"big","icon"],on:{click:t.previous}})]),t._v(" "),t.playing?i("div",{staticClass:"two wide column control",attrs:{title:t.$t("Pause track")}},[i("i",{class:["ui","pause",{disabled:!t.currentTrack},"big","icon"],on:{click:t.togglePlay}})]):i("div",{staticClass:"two wide column control",attrs:{title:t.$t("Play track")}},[i("i",{class:["ui","play",{disabled:!t.currentTrack},"big","icon"],on:{click:t.togglePlay}})]),t._v(" "),i("div",{staticClass:"two wide column control",attrs:{title:t.$t("Next track"),disabled:!t.hasNext}},[i("i",{class:["ui",{disabled:!t.hasNext},"step","forward","big","icon"],on:{click:t.next}})]),t._v(" "),i("div",{staticClass:"two wide column control volume-control"},[0===t.volume?i("i",{staticClass:"volume off secondary icon",attrs:{title:t.$t("Unmute")},on:{click:function(e){t.$store.commit("player/volume",1)}}}):t.volume<.5?i("i",{staticClass:"volume down secondary icon",attrs:{title:t.$t("Mute")},on:{click:function(e){t.$store.commit("player/volume",0)}}}):i("i",{staticClass:"volume up secondary icon",attrs:{title:t.$t("Mute")},on:{click:function(e){t.$store.commit("player/volume",0)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderVolume,expression:"sliderVolume"}],attrs:{type:"range",step:"0.05",min:"0",max:"1"},domProps:{value:t.sliderVolume},on:{__r:function(e){t.sliderVolume=e.target.value}}})]),t._v(" "),i("div",{staticClass:"two wide column control looping"},[0===t.looping?i("i",{class:["ui",{disabled:!t.currentTrack},"step","repeat","secondary","icon"],attrs:{title:t.$t("Looping disabled. Click to switch to single-track looping."),disabled:!t.currentTrack},on:{click:function(e){t.$store.commit("player/looping",1)}}}):t._e(),t._v(" "),1===t.looping?i("i",{staticClass:"repeat secondary icon",attrs:{title:t.$t("Looping on a single track. Click to switch to whole queue looping."),disabled:!t.currentTrack},on:{click:function(e){t.$store.commit("player/looping",2)}}},[i("span",{staticClass:"ui circular tiny orange label"},[t._v("1")])]):t._e(),t._v(" "),2===t.looping?i("i",{staticClass:"repeat orange secondary icon",attrs:{title:t.$t("Looping on whole queue. Click to disable looping."),disabled:!t.currentTrack},on:{click:function(e){t.$store.commit("player/looping",0)}}}):t._e()]),t._v(" "),i("div",{staticClass:"two wide column control",attrs:{disabled:0===t.queue.tracks.length,title:t.$t("Shuffle your queue")}},[i("i",{class:["ui","random","secondary",{disabled:0===t.queue.tracks.length},"icon"],on:{click:function(e){t.shuffle()}}})]),t._v(" "),i("div",{staticClass:"one wide column"}),t._v(" "),i("div",{staticClass:"two wide column control",attrs:{disabled:0===t.queue.tracks.length,title:t.$t("Clear your queue")}},[i("i",{class:["ui","trash","secondary",{disabled:0===t.queue.tracks.length},"icon"],on:{click:function(e){t.clean()}}})])]),t._v(" "),i("GlobalEvents",{on:{keydown:[function(e){return"button"in e||!t._k(e.keyCode,"space",32,e.key," ")?(e.preventDefault(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.togglePlay(e)):null},function(e){return("button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"]))&&e.ctrlKey?"button"in e&&0!==e.button?null:(e.preventDefault(),e.shiftKey||e.altKey||e.metaKey?null:t.previous(e)):null},function(e){return("button"in e||!t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"]))&&e.ctrlKey?"button"in e&&2!==e.button?null:(e.preventDefault(),e.shiftKey||e.altKey||e.metaKey?null:t.next(e)):null},function(e){return("button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))&&e.ctrlKey?(e.preventDefault(),e.shiftKey||e.altKey||e.metaKey?null:void t.$store.commit("player/incrementVolume",-.1)):null},function(e){return("button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))&&e.ctrlKey?(e.preventDefault(),e.shiftKey||e.altKey||e.metaKey?null:void t.$store.commit("player/incrementVolume",.1)):null},function(e){return"button"in e||!t._k(e.keyCode,"f",void 0,e.key,void 0)?(e.preventDefault(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void t.$store.dispatch("favorites/toggle",t.currentTrack.id)):null},function(e){return"button"in e||!t._k(e.keyCode,"l",void 0,e.key,void 0)?(e.preventDefault(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void t.$store.commit("player/toggleLooping")):null},function(e){return"button"in e||!t._k(e.keyCode,"s",void 0,e.key,void 0)?(e.preventDefault(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.shuffle(e)):null}]}})],1)])},staticRenderFns:[]}},function(t,e,a){function i(t){a(324)}var s=a(1)(a(325),a(326),i,"data-v-1b18f2f5",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{attrs:{version:"1.1",id:"layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 141.7 141.7","enable-background":"new 0 0 141.7 141.7","xml:space":"preserve"}},[a("g",[a("g",[a("path",{attrs:{fill:"#4082B4",d:"M70.9,86.1c11.7,0,21.2-9.5,21.2-21.2c0-0.6-0.5-1.1-1.1-1.1h-8c-0.6,0-1.1,0.5-1.1,1.1c0,6-4.9,11-11,11\n\t\t\tc-6,0-11-4.9-11-11c0-0.6-0.5-1.1-1.1-1.1h-8c-0.6,0-1.1,0.5-1.1,1.1C49.7,76.6,59.2,86.1,70.9,86.1z"}}),t._v(" "),a("path",{attrs:{fill:"#4082B4",d:"M70.9,106.1c22.7,0,41.2-18.5,41.2-41.2c0-0.6-0.5-1.1-1.1-1.1h-8c-0.6,0-1.1,0.5-1.1,1.1\n\t\t\tc0,17.1-13.9,31-31,31c-17.1,0-31-13.9-31-31c0-0.6-0.5-1.1-1.1-1.1h-8c-0.6,0-1.1,0.5-1.1,1.1C29.6,87.6,48.1,106.1,70.9,106.1z"}}),t._v(" "),a("path",{attrs:{fill:"#4082B4",d:"M131.1,63.8h-8c-0.6,0-1.1,0.5-1.1,1.1C122,93.1,99,116,70.9,116c-28.2,0-51.1-22.9-51.1-51.1\n\t\t\tc0-0.6-0.5-1.1-1.1-1.1h-8c-0.6,0-1.1,0.5-1.1,1.1c0,33.8,27.5,61.3,61.3,61.3c33.8,0,61.3-27.5,61.3-61.3\n\t\t\tC132.2,64.3,131.7,63.8,131.1,63.8z"}})]),t._v(" "),a("path",{attrs:{fill:"#222222",d:"M43.3,37.3c4.1,2.1,8.5,2.5,12.5,4.8c2.6,1.5,4.2,3.2,5.8,5.7c2.5,3.8,2.4,8.5,2.4,8.5l0.3,5.2\n\t\tc0,0,2,5.2,6.4,5.2c4.7,0,6.4-5.2,6.4-5.2l0.3-5.2c0,0-0.1-4.7,2.4-8.5c1.6-2.5,3.2-4.3,5.8-5.7c4-2.3,8.4-2.7,12.5-4.8\n\t\tc4.1-2.1,8.1-4.8,10.8-8.6c2.7-3.8,4-8.8,2.5-13.2c-7.8-0.4-16.8,0.5-23.7,4.2c-9.6,5.1-15.4,3.3-17.1,10.9h-0.1\n\t\tc-1.7-7.7-7.5-5.8-17.1-10.9c-6.9-3.7-15.9-4.6-23.7-4.2c-1.5,4.4-0.2,9.4,2.5,13.2C35.2,32.5,39.2,35.2,43.3,37.3z"}})])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(328)}var s=a(1)(a(329),a(629),i,"data-v-c8d8df10",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i),n=a(36),r=a(37),o=n.a.API_URL+"search?query={query}";e.default={mounted:function(){var t=this;s()(this.$el).search({type:"category",minCharacters:3,onSelect:function(t,e){r.a.push(t.routerUrl)},onSearchQuery:function(e){t.$emit("search")},apiSettings:{beforeXHR:function(e){return t.$store.state.auth.authenticated?(e.setRequestHeader("Authorization",t.$store.getters["auth/header"]),e):e},onResponse:function(t){var e={};return[{code:"artists",route:"library.artists.detail",name:"Artist",getTitle:function(t){return t.name},getDescription:function(t){return""}},{code:"albums",route:"library.albums.detail",name:"Album",getTitle:function(t){return t.title},getDescription:function(t){return""}},{code:"tracks",route:"library.tracks.detail",name:"Track",getTitle:function(t){return t.title},getDescription:function(t){return""}}].forEach(function(a){e[a.code]={name:a.name,results:[]},t[a.code].forEach(function(t){e[a.code].results.push({title:a.getTitle(t),id:t.id,routerUrl:{name:a.route,params:{id:t.id}},description:a.getDescription(t)})})}),{results:e}},url:o}})}}},,function(t,e,a){function i(t){a(332)}var s=a(1)(a(333),a(334),i,"data-v-5937f9e8",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{path:window.location.href}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Page Not Found",expression:"'Page Not Found'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui text container"},[a("h1",{staticClass:"ui huge header"},[a("i",{staticClass:"warning icon"}),t._v(" "),a("div",{staticClass:"content"},[a("strike",[t._v(t._s(t.$t("Whale")))]),t._v(" "+t._s(t.$t("Page not found!"))+"\n        ")],1)]),t._v(" "),a("p",[t._v(t._s(t.$t("We're sorry, the page you asked for does not exists.")))]),t._v(" "),a("i18next",{attrs:{path:"Requested URL: {%0%}"}},[a("a",{attrs:{href:t.path}},[t._v(t._s(t.path))])]),t._v(" "),a("router-link",{staticClass:"ui icon button",attrs:{to:"/"}},[t._v("\n        "+t._s(t.$t("Go to home page"))+"\n        "),a("i",{staticClass:"right arrow icon"})])],1)])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(336)}var s=a(1)(a(337),a(342),i,"data-v-57ce05b3",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(17),s=a.n(i),n=a(13),r=a(338),o=a.n(r);e.default={components:{Stats:o.a},created:function(){this.$store.dispatch("instance/fetchSettings")},computed:s()({},Object(n.d)({instance:function(t){return t.instance.settings.instance}}))}},function(t,e,a){function i(t){a(339)}var s=a(1)(a(340),a(341),i,"data-v-2a55efa2",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(5),s=a.n(i),n=a(2),r=a.n(n),o=a(3);e.default={data:function(){return{stats:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.isLoading=!0,o.a.default.debug("Fetching instance stats..."),r.a.get("instance/nodeinfo/2.0/").then(function(e){var a=e.data;t.stats={},t.stats.users=s.a.get(a,"usage.users.total"),t.stats.listenings=s.a.get(a,"metadata.usage.listenings.total"),t.stats.trackFavorites=s.a.get(a,"metadata.usage.favorites.tracks.total"),t.stats.musicDuration=s.a.get(a,"metadata.library.music.hours"),t.stats.artists=s.a.get(a,"metadata.library.artists.total"),t.stats.albums=s.a.get(a,"metadata.library.albums.total"),t.stats.tracks=s.a.get(a,"metadata.library.tracks.total"),t.isLoading=!1})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.stats?a("div",{staticClass:"ui stackable two column grid"},[a("div",{staticClass:"column"},[a("h3",{staticClass:"ui left aligned header"},[a("i18next",{attrs:{path:"User activity"}})],1),t._v(" "),t.stats?a("div",{staticClass:"ui mini horizontal statistics"},[a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[a("i",{staticClass:"green user icon"}),t._v("\n            "+t._s(t.stats.users)+"\n          ")]),t._v(" "),a("i18next",{staticClass:"label",attrs:{tag:"div",path:"users"}})],1),t._v(" "),a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[a("i",{staticClass:"orange sound icon"}),t._v(" "+t._s(t.stats.listenings)+"\n          ")]),t._v(" "),a("i18next",{staticClass:"label",attrs:{tag:"div",path:"tracks listened"}})],1),t._v(" "),a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[a("i",{staticClass:"pink heart icon"}),t._v(" "+t._s(t.stats.trackFavorites)+"\n          ")]),t._v(" "),a("i18next",{staticClass:"label",attrs:{tag:"div",path:"Tracks favorited"}})],1)]):t._e()]),t._v(" "),a("div",{staticClass:"column"},[a("h3",{staticClass:"ui left aligned header"},[t._v("Library")]),t._v(" "),a("div",{staticClass:"ui mini horizontal statistics"},[a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[t._v("\n            "+t._s(parseInt(t.stats.musicDuration))+"\n          ")]),t._v(" "),a("i18next",{staticClass:"label",attrs:{tag:"div",path:"hours of music"}})],1),t._v(" "),a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[t._v("\n            "+t._s(t.stats.artists)+"\n          ")]),t._v(" "),a("i18next",{staticClass:"label",attrs:{tag:"div",path:"Artists"}})],1),t._v(" "),a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[t._v("\n            "+t._s(t.stats.albums)+"\n          ")]),t._v(" "),a("i18next",{staticClass:"label",attrs:{tag:"div",path:"Albums"}})],1),t._v(" "),a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[t._v("\n            "+t._s(t.stats.tracks)+"\n          ")]),t._v(" "),a("i18next",{staticClass:"label",attrs:{tag:"div",path:"tracks"}})],1)])])]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"About This Instance",expression:"'About This Instance'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical center aligned stripe segment"},[a("div",{staticClass:"ui text container"},[a("h1",{staticClass:"ui huge header"},[t.instance.name.value?[t._v(t._s(t.$t("About {%instance%}",{instance:t.instance.name.value})))]:[t._v(t._s(t.$t("About this instance")))]],2),t._v(" "),a("stats")],1)]),t._v(" "),a("div",{staticClass:"ui vertical stripe segment"},[t.instance.short_description.value||t.instance.long_description.value?t._e():a("p",[t._v("\n      "+t._s(t.$t("Unfortunately, owners of this instance did not yet take the time to complete this page."))+"\n    ")]),t._v(" "),t.$store.state.auth.availablePermissions.settings?a("router-link",{staticClass:"ui button",attrs:{to:{path:"/manage/settings",hash:"instance"}}},[a("i",{staticClass:"pencil icon"}),t._v(t._s(t.$t("Edit instance info"))+"\n    ")]):t._e(),t._v(" "),t.instance.short_description.value?a("div",{staticClass:"ui middle aligned stackable text container"},[a("p",[t._v(t._s(t.instance.short_description.value))])]):t._e(),t._v(" "),t.instance.long_description.value?a("div",{staticClass:"ui middle aligned stackable text container",domProps:{innerHTML:t._s(t.$options.filters.markdown(t.instance.long_description.value))}}):t._e()],1)])},staticRenderFns:[]}},function(t,e,a){function i(t){a(344)}var s=a(1)(a(345),a(346),i,"data-v-f5772fae",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"home",data:function(){return{}}}},function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Welcome",expression:"'Welcome'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical center aligned stripe segment"},[a("div",{staticClass:"ui text container"},[a("h1",{staticClass:"ui huge header"},[t._v("\n        "+t._s(t.$t("Welcome on Funkwhale"))+"\n      ")]),t._v(" "),a("p",[t._v(t._s(t.$t("We think listening to music should be simple.")))]),t._v(" "),a("router-link",{staticClass:"ui icon button",attrs:{to:"/about"}},[a("i",{staticClass:"info icon"}),t._v("\n        "+t._s(t.$t("Learn more about this instance"))+"\n      ")]),t._v(" "),a("router-link",{staticClass:"ui icon teal button",attrs:{to:"/library"}},[t._v("\n        "+t._s(t.$t("Get me to the library"))+"\n        "),a("i",{staticClass:"right arrow icon"})])],1)]),t._v(" "),a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui middle aligned stackable text container"},[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"eight wide left floated column"},[a("h2",{staticClass:"ui header"},[t._v("\n              "+t._s(t.$t("Why funkwhale?"))+"\n            ")]),t._v(" "),a("p",[t._v(t._s(t.$t("That's simple: we loved Grooveshark and we want to build something even better.")))])]),t._v(" "),t._m(0)])])]),t._v(" "),a("div",{staticClass:"ui middle aligned stackable text container"},[a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("h2",{staticClass:"ui header"},[t._v("\n        "+t._s(t.$t("Unlimited music"))+"\n      ")]),t._v(" "),a("p",[t._v(t._s(t.$t("Funkwhale is designed to make it easy to listen to music you like, or to discover new artists.")))]),t._v(" "),a("div",{staticClass:"ui list"},[a("div",{staticClass:"item"},[a("i",{staticClass:"sound icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.$t("Click once, listen for hours using built-in radios"))+"\n          ")])]),t._v(" "),a("div",{staticClass:"item"},[a("i",{staticClass:"heart icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.$t("Keep a track of your favorite songs"))+"\n          ")])]),t._v(" "),a("div",{staticClass:"item"},[a("i",{staticClass:"list icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.$t("Playlists? We got them"))+"\n          ")])])])]),t._v(" "),a("div",{staticClass:"ui middle aligned stackable text container"},[a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("h2",{staticClass:"ui header"},[t._v("\n        "+t._s(t.$t("Clean library"))+"\n      ")]),t._v(" "),a("p",[t._v(t._s(t.$t("Funkwhale takes care of handling your music"))+".")]),t._v(" "),a("div",{staticClass:"ui list"},[a("div",{staticClass:"item"},[a("i",{staticClass:"download icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.$t("Import music from various platforms, such as YouTube or SoundCloud"))+"\n          ")])]),t._v(" "),a("div",{staticClass:"item"},[a("i",{staticClass:"tag icon"}),t._v(" "),a("div",{staticClass:"content"},[a("i18next",{attrs:{path:"Get quality metadata about your music thanks to {%0%}"}},[a("a",{attrs:{href:"https://musicbrainz.org",target:"_blank"}},[t._v(t._s(t.$t("MusicBrainz")))])])],1)]),t._v(" "),a("div",{staticClass:"item"},[a("i",{staticClass:"plus icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.$t("Covers, lyrics, our goal is to have them all ;)"))+"\n          ")])])])]),t._v(" "),a("div",{staticClass:"ui middle aligned stackable text container"},[a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("h2",{staticClass:"ui header"},[t._v("\n        "+t._s(t.$t("Easy to use"))+"\n      ")]),t._v(" "),a("p",[t._v(t._s(t.$t("Funkwhale is dead simple to use.")))]),t._v(" "),a("div",{staticClass:"ui list"},[a("div",{staticClass:"item"},[a("i",{staticClass:"book icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.$t("No add-ons, no plugins : you only need a web library"))+"\n          ")])]),t._v(" "),a("div",{staticClass:"item"},[a("i",{staticClass:"wizard icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.$t("Access your music from a clean interface that focus on what really matters"))+"\n          ")])])])]),t._v(" "),a("div",{staticClass:"ui middle aligned stackable text container"},[a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("h2",{staticClass:"ui header"},[t._v("\n        "+t._s(t.$t("Your music, your way"))+"\n      ")]),t._v(" "),a("p",[t._v(t._s(t.$t("Funkwhale is free and gives you control on your music.")))]),t._v(" "),a("div",{staticClass:"ui list"},[a("div",{staticClass:"item"},[a("i",{staticClass:"smile icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.$t("The plaform is free and open-source, you can install it and modify it without worries"))+"\n          ")])]),t._v(" "),a("div",{staticClass:"item"},[a("i",{staticClass:"protect icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.$t("We do not track you or bother you with ads"))+"\n          ")])]),t._v(" "),a("div",{staticClass:"item"},[a("i",{staticClass:"users icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.$t("You can invite friends and family to your instance so they can enjoy your music"))+"\n          ")])])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"four wide left floated column"},[i("img",{staticClass:"ui medium image",attrs:{src:a(347)}})])}]}},function(t,e,a){t.exports=a.p+"static/img/logo.adfecd5.png"},function(t,e,a){function i(t){a(349)}var s=a(1)(a(350),a(361),i,"data-v-c3b0b5ea",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(17),s=a.n(i),n=a(13),r=a(351),o=(a.n(r),a(2)),l=a.n(o),c=a(3),u=a(353),d=a.n(u),v=a(357),p=a.n(v);e.default={data:function(){return{isLoading:!1,components:{Like:d.a,Listen:p.a}}},created:function(){this.openWebsocket(),this.fetchEvents()},computed:s()({},Object(n.d)({events:function(t){return t.instance.events}})),methods:{fetchEvents:function(){this.isLoading=!0;var t=this;l.a.get("/activity/").then(function(e){t.isLoading=!1,t.$store.commit("instance/events",e.data.results)})},openWebsocket:function(){if(this.$store.state.auth.authenticated){var t=this,e=this.$store.state.auth.token,a=new r.WebSocketBridge;a.connect("/api/v1/instance/activity?token="+e,null,{reconnectInterval:5e3}),a.listen(function(e){c.a.default.info("Received timeline update",e),t.$store.commit("instance/event",e)}),a.socket.addEventListener("open",function(){console.log("Connected to WebSocket")})}}}}},,,function(t,e,a){function i(t){a(354)}var s=a(1)(a(355),a(356),i,"data-v-16ec21fd",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["event"]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"event"},[t._m(0),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[a("i18next",{attrs:{path:"{%0%} favorited a track"}},[a("username",{staticClass:"user",attrs:{username:t.event.actor.local_id}})],1),t._v(" "),a("human-date",{staticClass:"date",attrs:{date:t.event.published}})],1),t._v(" "),a("div",{staticClass:"extra text"},[a("router-link",{attrs:{to:{name:"library.tracks.detail",params:{id:t.event.object.local_id}}}},[t._v(t._s(t.event.object.name))]),t._v(" "),t.event.object.album?a("i18next",{attrs:{path:"from album {%0%}, by {%1%}"}},[t._v("\n         "+t._s(t.event.object.album)+"\n         "),a("em",[t._v(t._s(t.event.object.artist))])]):a("i18next",{attrs:{path:", by {%0%}"}},[a("em",[t._v(t._s(t.event.object.artist))])])],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("i",{staticClass:"pink heart icon"})])}]}},function(t,e,a){function i(t){a(358)}var s=a(1)(a(359),a(360),i,"data-v-7b8766a6",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["event"]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"event"},[t._m(0),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[a("i18next",{attrs:{path:"{%0%} listened to a track"}},[a("username",{staticClass:"user",attrs:{username:t.event.actor.local_id}})],1),t._v(" "),a("human-date",{staticClass:"date",attrs:{date:t.event.published}})],1),t._v(" "),a("div",{staticClass:"extra text"},[a("router-link",{attrs:{to:{name:"library.tracks.detail",params:{id:t.event.object.local_id}}}},[t._v(t._s(t.event.object.name))]),t._v(" "),t.event.object.album?a("i18next",{attrs:{path:"from album {%0%}, by {%1%}"}},[t._v("\n         "+t._s(t.event.object.album)),a("em",[t._v(t._s(t.event.object.artist))])]):a("i18next",{attrs:{path:", by {%0%}"}},[a("em",[t._v(t._s(t.event.object.artist))])])],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("i",{staticClass:"orange sound icon"})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Instance Timeline",expression:"'Instance Timeline'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical center aligned stripe segment"},[t.isLoading?a("div",{class:["ui",{active:t.isLoading},"inverted","dimmer"]},[a("div",{staticClass:"ui text loader"},[t._v(t._s(t.$t("Loading timeline...")))])]):a("div",{staticClass:"ui text container"},[a("h1",{staticClass:"ui header"},[t._v(t._s(t.$t("Recent activity on this instance")))]),t._v(" "),a("div",{staticClass:"ui feed"},t._l(t.events,function(e,i){return t.components[e.type]?a(t.components[e.type],{key:e.id+i,tag:"component",staticClass:"event",attrs:{event:e}}):t._e()}))])])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(363)}var s=a(1)(a(364),a(367),i,"data-v-7260a44c",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(38),s=a.n(i);e.default={props:{next:{type:String,default:"/"}},components:{PasswordInput:s.a},data:function(){return{credentials:{username:"",password:""},error:"",isLoading:!1}},mounted:function(){this.$refs.username.focus()},methods:{submit:function(){var t=this;t.isLoading=!0,this.error="";var e={username:this.credentials.username,password:this.credentials.password};this.$store.dispatch("auth/login",{credentials:e,next:"/library",onError:function(e){400===e.response.status?t.error="invalid_credentials":t.error="unknown_error"}}).then(function(e){t.isLoading=!1})}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["value","index"],data:function(){return{showPassword:!1}},computed:{passwordInputType:function(){return this.showPassword?"text":"password"}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui action input"},[a("input",{attrs:{required:"",tabindex:t.index,type:t.passwordInputType},domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)}}}),t._v(" "),a("span",{staticClass:"ui icon button",attrs:{title:t.$t("Show/hide password")},on:{click:function(e){t.showPassword=!t.showPassword}}},[a("i",{staticClass:"eye icon"})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Log In",expression:"'Log In'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[a("i18next",{attrs:{path:"Log in to your Funkwhale account"}})],1),t._v(" "),a("form",{staticClass:"ui form",on:{submit:function(e){e.preventDefault(),t.submit()}}},[t.error?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[a("i18next",{attrs:{path:"We cannot log you in"}})],1),t._v(" "),a("ul",{staticClass:"list"},["invalid_credentials"==t.error?a("i18next",{attrs:{tag:"li",path:"Please double-check your username/password couple is correct"}}):a("i18next",{attrs:{tag:"li",path:"An unknown error happend, this can mean the server is down or cannot be reached"}})],1)]):t._e(),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v("\n            "+t._s(t.$t("Username or email"))+" |\n            "),a("router-link",{attrs:{to:{path:"/signup"}}},[t._v("\n              "+t._s(t.$t("Create an account"))+"\n            ")])],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.username,expression:"credentials.username"}],ref:"username",attrs:{tabindex:"1",required:"",type:"text",autofocus:"",placeholder:"Enter your username or email"},domProps:{value:t.credentials.username},on:{input:function(e){e.target.composing||t.$set(t.credentials,"username",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v("\n            "+t._s(t.$t("Password"))+" |\n            "),a("router-link",{attrs:{to:{name:"auth.password-reset",query:{email:t.credentials.username}}}},[t._v("\n              "+t._s(t.$t("Reset your password"))+"\n            ")])],1),t._v(" "),a("password-input",{attrs:{index:2,required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1),t._v(" "),a("button",{class:["ui",{loading:t.isLoading},"right","floated","green","button"],attrs:{tabindex:"3",type:"submit"}},[a("i18next",{attrs:{path:"Login"}})],1)])])])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(369)}var s=a(1)(a(370),a(371),i,"data-v-260dd245",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(3),r=a(38),o=a.n(r);e.default={name:"login",components:{PasswordInput:o.a},props:{next:{type:String,default:"/"}},data:function(){return{username:"",email:"",password:"",isLoadingInstanceSetting:!0,errors:[],isLoading:!1}},created:function(){var t=this;this.$store.dispatch("instance/fetchSettings",{callback:function(){t.isLoadingInstanceSetting=!1}})},methods:{submit:function(){var t=this,e=this;e.isLoading=!0,this.errors=[];var a={username:this.username,password1:this.password,password2:this.password,email:this.email};return s.a.post("auth/registration/",a).then(function(a){n.a.default.info("Successfully created account"),e.$router.push({name:"profile",params:{username:t.username}})},function(t){e.errors=t.backendErrors,e.isLoading=!1})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Sign Up",expression:"'Sign Up'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[a("i18next",{attrs:{path:"Create a funkwhale account"}})],1),t._v(" "),t.$store.state.instance.settings.users.registration_enabled.value?a("form",{class:["ui",{loading:t.isLoadingInstanceSetting},"form"],on:{submit:function(e){e.preventDefault(),t.submit()}}},[t.errors.length>0?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[a("i18next",{attrs:{path:"We cannot create your account"}})],1),t._v(" "),a("ul",{staticClass:"list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}))]):t._e(),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Username"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],ref:"username",attrs:{required:"",type:"text",autofocus:"",placeholder:"Enter your username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Email"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"email",attrs:{required:"",type:"email",placeholder:"Enter your email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Password"}}),t._v(" "),a("password-input",{model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("button",{class:["ui","green",{loading:t.isLoading},"button"],attrs:{type:"submit"}},[a("i18next",{attrs:{path:"Create my account"}})],1)]):a("i18next",{attrs:{tag:"p",path:"Registration is currently disabled on this instance, please try again later."}})],1)])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(373)}var s=a(1)(a(374),a(376),i,"data-v-57f597cc",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(375);e.default={name:"login",props:["username"],created:function(){this.$store.dispatch("auth/fetchProfile")},computed:{signupDate:function(){var t=new Date(this.$store.state.auth.profile.date_joined);return i(t,"longDate")},isLoading:function(){return!this.$store.state.auth.profile}}}},,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:t.username+"'s Profile",expression:"username + '\\'s Profile'"}],staticClass:"main pusher"},[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),t.$store.state.auth.profile?[a("div",{class:["ui","head","vertical","center","aligned","stripe","segment"]},[a("h2",{staticClass:"ui center aligned icon header"},[a("i",{staticClass:"circular inverted user green icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n          "+t._s(t.$store.state.auth.profile.username)+"\n          "),a("i18next",{staticClass:"sub header",attrs:{path:"Registered since {%0%}"}},[t._v(t._s(t.signupDate))])],1)]),t._v(" "),a("div",{staticClass:"ui basic green label"},[a("i18next",{attrs:{path:"This is you!"}})],1),t._v(" "),t.$store.state.auth.profile.is_staff?a("div",{staticClass:"ui yellow label"},[a("i",{staticClass:"star icon"}),t._v(" "),a("i18next",{attrs:{path:"Staff member"}})],1):t._e(),t._v(" "),a("router-link",{staticClass:"ui tiny basic button",attrs:{to:{path:"/settings"}}},[a("i",{staticClass:"setting icon"}),t._v(" "),a("i18next",{attrs:{path:"Settings..."}})],1)],1)]:t._e()],2)},staticRenderFns:[]}},function(t,e,a){function i(t){a(378)}var s=a(1)(a(379),a(384),i,"data-v-ff7762e0",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i),n=a(2),r=a.n(n),o=a(3),l=a(38),c=a.n(l),u=a(380),d=a.n(u);e.default={components:{PasswordInput:c.a,SubsonicTokenForm:d.a},data:function(){var t={old_password:"",new_password:"",passwordError:"",isLoading:!1,settings:{success:!1,errors:[],order:["privacy_level"],fields:{privacy_level:{type:"dropdown",initial:this.$store.state.auth.profile.privacy_level,label:"Activity visibility",help:"Determine the visibility level of your activity",choices:[{value:"me",label:"Nobody except me"},{value:"instance",label:"Everyone on this instance"}]}}}};return t.settings.order.forEach(function(e){t.settings.fields[e].value=t.settings.fields[e].initial}),t},mounted:function(){s()("select.dropdown").dropdown()},methods:{submitSettings:function(){this.settings.success=!1,this.settings.errors=[];var t=this,e=this.settingsValues,a="users/users/"+this.$store.state.auth.username+"/";return r.a.patch(a,e).then(function(e){o.a.default.info("Updated settings successfully"),t.settings.success=!0},function(e){o.a.default.error("Error while updating settings"),t.isLoading=!1,t.settings.errors=e.backendErrors})},submitPassword:function(){var t=this;t.isLoading=!0,this.error="";var e={old_password:this.old_password,new_password1:this.new_password,new_password2:this.new_password};return r.a.post("auth/registration/change-password/",e).then(function(e){o.a.default.info("Password successfully changed"),t.$router.push({name:"profile",params:{username:t.$store.state.auth.username}})},function(e){400===e.response.status?t.passwordError="invalid_credentials":t.passwordError="unknown_error",t.isLoading=!1})}},computed:{orderedSettingsFields:function(){var t=this;return this.settings.order.map(function(e){return t.settings.fields[e]})},settingsValues:function(){var t=this,e={};return this.settings.order.forEach(function(a){var i=t.settings.fields[a];e[a]=i.value}),e}}}},function(t,e,a){function i(t){a(381)}var s=a(1)(a(382),a(383),i,"data-v-457e7034",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(38),r=a.n(n);e.default={components:{PasswordInput:r.a},data:function(){return{token:null,errors:[],success:!1,isLoading:!1,successMessage:""}},created:function(){this.fetchToken()},methods:{fetchToken:function(){this.success=!1,this.errors=[],this.isLoading=!0;var t=this,e="users/users/"+this.$store.state.auth.username+"/subsonic-token/";return s.a.get(e).then(function(e){t.token=e.data.subsonic_api_token,t.isLoading=!1},function(e){t.isLoading=!1,t.errors=e.backendErrors})},requestNewToken:function(){this.successMessage=this.$t("Password updated"),this.success=!1,this.errors=[],this.isLoading=!0;var t=this,e="users/users/"+this.$store.state.auth.username+"/subsonic-token/";return s.a.post(e,{}).then(function(e){t.token=e.data.subsonic_api_token,t.isLoading=!1,t.success=!0},function(e){t.isLoading=!1,t.errors=e.backendErrors})},disable:function(){this.successMessage=this.$t("Access disabled"),this.success=!1,this.errors=[],this.isLoading=!0;var t=this,e="users/users/"+this.$store.state.auth.username+"/subsonic-token/";return s.a.delete(e).then(function(e){t.isLoading=!1,t.token=null,t.success=!0},function(e){t.isLoading=!1,t.errors=e.backendErrors})}},computed:{subsonicEnabled:function(){return this.$store.state.instance.settings.subsonic.enabled.value}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){e.preventDefault(),t.requestNewToken()}}},[a("h2",[t._v(t._s(t.$t("Subsonic API password")))]),t._v(" "),t.subsonicEnabled?t._e():a("p",{staticClass:"ui message"},[t._v("\n    "+t._s(t.$t("The Subsonic API is not available on this Funkwhale instance."))+"\n  ")]),t._v(" "),a("p",[t._v("\n    "+t._s(t.$t("Funkwhale is compatible with other music players that support the Subsonic API."))+"\n    "+t._s(t.$t("You can use those to enjoy your playlist and music in offline mode, on your smartphone or tablet, for instance."))+"\n  ")]),t._v(" "),a("p",[t._v("\n    "+t._s(t.$t("However, accessing Funkwhale from those clients require a separate password you can set below."))+"\n  ")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.funkwhale.audio/users/apps.html#subsonic-compatible-clients",target:"_blank"}},[t._v("\n    "+t._s(t.$t("Discover how to use Funkwhale from other apps"))+"\n  ")])]),t._v(" "),t.success?a("div",{staticClass:"ui positive message"},[a("div",{staticClass:"header"},[t._v(t._s(t.successMessage))])]):t._e(),t._v(" "),t.subsonicEnabled&&t.errors.length>0?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[t._v(t._s(t.$t("Error")))]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}))]):t._e(),t._v(" "),t.subsonicEnabled?[t.token?a("div",{staticClass:"field"},[a("password-input",{model:{value:t.token,callback:function(e){t.token=e},expression:"token"}})],1):t._e(),t._v(" "),t.token?a("dangerous-button",{class:["ui",{loading:t.isLoading},"button"],attrs:{color:"grey",action:t.requestNewToken}},[t._v("\n      "+t._s(t.$t("Request a new password"))+"\n      "),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[t._v(t._s(t.$t("Request a new Subsonic API password?")))]),t._v(" "),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[t._v(t._s(t.$t("This will log you out from existing devices that use the current password.")))]),t._v(" "),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[t._v(t._s(t.$t("Request a new password")))])]):a("button",{class:["ui",{loading:t.isLoading},"button"],attrs:{color:"grey"},on:{click:t.requestNewToken}},[t._v(t._s(t.$t("Request a password")))]),t._v(" "),t.token?a("dangerous-button",{class:["ui",{loading:t.isLoading},"button"],attrs:{color:"yellow",action:t.disable}},[t._v("\n        "+t._s(t.$t("Disable Subsonic access"))+"\n        "),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[t._v(t._s(t.$t("Disable Subsonic API access?")))]),t._v(" "),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[t._v(t._s(t.$t("This will completely disable access to the Subsonic API using from account.")))]),t._v(" "),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[t._v(t._s(t.$t("Disable access")))])]):t._e()]:t._e()],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Account Settings",expression:"'Account Settings'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Account settings"}})],1),t._v(" "),a("form",{staticClass:"ui form",on:{submit:function(e){e.preventDefault(),t.submitSettings()}}},[t.settings.success?a("div",{staticClass:"ui positive message"},[a("div",{staticClass:"header"},[a("i18next",{attrs:{path:"Settings updated"}})],1)]):t._e(),t._v(" "),t.settings.errors.length>0?a("div",{staticClass:"ui negative message"},[a("i18next",{staticClass:"header",attrs:{tag:"div",path:"We cannot save your settings"}}),t._v(" "),a("ul",{staticClass:"list"},t._l(t.settings.errors,function(e){return a("li",[t._v(t._s(e))])}))],1):t._e(),t._v(" "),t._l(t.orderedSettingsFields,function(e){return a("div",{staticClass:"field"},[a("label",{attrs:{for:e.id}},[t._v(t._s(e.label))]),t._v(" "),e.help?a("p",[t._v(t._s(e.help))]):t._e(),t._v(" "),"dropdown"===e.type?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"f.value"}],staticClass:"ui dropdown",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"value",a.target.multiple?i:i[0])}}},t._l(e.choices,function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.label))])})):t._e()])}),t._v(" "),a("button",{class:["ui",{loading:t.isLoading},"button"],attrs:{type:"submit"}},[a("i18next",{attrs:{path:"Update settings"}})],1)],2)]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("div",{staticClass:"ui small text container"},[a("h2",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Change my password"}})],1),t._v(" "),a("div",{staticClass:"ui message"},[t._v("\n        "+t._s(t.$t("Changing your password will also change your Subsonic API password if you have requested one."))+"\n        "+t._s(t.$t("You will have to update your password on your clients that use this password."))+"\n      ")]),t._v(" "),a("form",{staticClass:"ui form",on:{submit:function(e){e.preventDefault(),t.submitPassword()}}},[t.passwordError?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[a("i18next",{attrs:{path:"Cannot change your password"}})],1),t._v(" "),a("ul",{staticClass:"list"},["invalid_credentials"==t.passwordError?a("i18next",{attrs:{tag:"li",path:"Please double-check your password is correct"}}):t._e()],1)]):t._e(),t._v(" "),a("div",{staticClass:"field"},[a("label",[a("i18next",{attrs:{path:"Old password"}})],1),t._v(" "),a("password-input",{attrs:{required:""},model:{value:t.old_password,callback:function(e){t.old_password=e},expression:"old_password"}})],1),t._v(" "),a("div",{staticClass:"field"},[a("label",[a("i18next",{attrs:{path:"New password"}})],1),t._v(" "),a("password-input",{attrs:{required:""},model:{value:t.new_password,callback:function(e){t.new_password=e},expression:"new_password"}})],1),t._v(" "),a("dangerous-button",{class:["ui",{loading:t.isLoading},"button"],attrs:{color:"yellow",action:t.submitPassword}},[t._v("\n          "+t._s(t.$t("Change password"))+"\n          "),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[t._v(t._s(t.$t("Change your password?")))]),t._v(" "),a("div",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("p",[t._v(t._s(t.$t("Changing your password will have the following consequences")))]),t._v(" "),a("ul",[a("li",[t._v(t._s(t.$t("You will be logged out from this session and have to log out with the new one")))]),t._v(" "),a("li",[t._v(t._s(t.$t("Your Subsonic password will be changed to a new, random one, logging you out from devices that used the old Subsonic password")))])])]),t._v(" "),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[t._v(t._s(t.$t("Disable access")))])])],1),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("subsonic-token-form")],1)])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(386)}var s=a(1)(a(387),a(388),i,"data-v-26c4edb7",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"logout"}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Log Out",expression:"'Log Out'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[a("i18next",{attrs:{path:"Are you sure you want to log out?"}})],1),t._v(" "),a("i18next",{attrs:{tag:"p",path:"You are currently logged in as {%0%}"}},[t._v(t._s(t.$store.state.auth.username))]),t._v(" "),a("button",{staticClass:"ui button",on:{click:function(e){t.$store.dispatch("auth/logout")}}},[a("i18next",{attrs:{path:"Yes, log me out!"}})],1)],1)])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(390)}var s=a(1)(a(391),a(392),i,"data-v-10556a26",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i);e.default={props:["defaultEmail"],data:function(){return{email:this.defaultEmail,isLoading:!1,errors:[]}},mounted:function(){this.$refs.email.focus()},methods:{submit:function(){var t=this;t.isLoading=!0,t.errors=[];var e={email:this.email};return s.a.post("auth/password/reset/",e).then(function(e){t.isLoading=!1,t.$router.push({name:"auth.password-reset-confirm"})},function(e){t.errors=e.backendErrors,t.isLoading=!1})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:t.$t("Reset your password"),expression:"$t('Reset your password')"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[t._v(t._s(t.$t("Reset your password")))]),t._v(" "),a("form",{staticClass:"ui form",on:{submit:function(e){e.preventDefault(),t.submit()}}},[t.errors.length>0?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[t._v(t._s(t.$t("Error while asking for a password reset")))]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}))]):t._e(),t._v(" "),a("p",[t._v(t._s(t.$t("Use this form to request a password reset. We will send an email to the given address with instructions to reset your password.")))]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Account's email")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"email",attrs:{required:"",type:"email",autofocus:"",placeholder:t.$t("Input the email address binded to your account")},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),a("router-link",{attrs:{to:{path:"/login"}}},[t._v("\n          "+t._s(t.$t("Back to login"))+"\n        ")]),t._v(" "),a("button",{class:["ui",{loading:t.isLoading},"right","floated","green","button"],attrs:{type:"submit"}},[t._v("\n          "+t._s(t.$t("Ask for a password reset")))])],1)])])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(394)}var s=a(1)(a(395),a(396),i,"data-v-1eca2f43",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(38),r=a.n(n);e.default={props:["defaultToken","defaultUid"],components:{PasswordInput:r.a},data:function(){return{newPassword:"",isLoading:!1,errors:[],token:this.defaultToken,uid:this.defaultUid,success:!1}},methods:{submit:function(){var t=this;t.isLoading=!0,t.errors=[];var e={uid:this.uid,token:this.token,new_password1:this.newPassword,new_password2:this.newPassword};return s.a.post("auth/password/reset/confirm/",e).then(function(e){t.isLoading=!1,t.success=!0},function(e){t.errors=e.backendErrors,t.isLoading=!1})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:t.$t("Change your password"),expression:"$t('Change your password')"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[t._v(t._s(t.$t("Change your password")))]),t._v(" "),t.success?a("div",{staticClass:"ui positive message"},[a("div",{staticClass:"header"},[t._v(t._s(t.$t("Password updated successfully")))]),t._v(" "),a("p",[t._v(t._s(t.$t("Your password has been updated successfully.")))]),t._v(" "),a("router-link",{attrs:{to:{name:"login"}}},[t._v("\n          "+t._s(t.$t("Proceed to login"))+"\n        ")])],1):a("form",{staticClass:"ui form",on:{submit:function(e){e.preventDefault(),t.submit()}}},[t.errors.length>0?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[t._v(t._s(t.$t("Error while changing your password")))]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}))]):t._e(),t._v(" "),t.token&&t.uid?[a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("New password")))]),t._v(" "),a("password-input",{model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),t._v(" "),a("router-link",{attrs:{to:{path:"/login"}}},[t._v("\n            "+t._s(t.$t("Back to login"))+"\n          ")]),t._v(" "),a("button",{class:["ui",{loading:t.isLoading},"right","floated","green","button"],attrs:{type:"submit"}},[t._v("\n            "+t._s(t.$t("Update your password")))])]:[a("p",[t._v(t._s(t.$t("If the email address provided in the previous step is valid and binded to a user account, you should receive an email with reset instructions in the next couple of minutes.")))])]],2)])])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(398)}var s=a(1)(a(399),a(400),i,"data-v-c2e3f5ca",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i);e.default={props:["defaultKey"],data:function(){return{isLoading:!1,errors:[],key:this.defaultKey,success:!1}},methods:{submit:function(){var t=this;t.isLoading=!0,t.errors=[];var e={key:this.key};return s.a.post("auth/registration/verify-email/",e).then(function(e){t.isLoading=!1,t.success=!0},function(e){t.errors=e.backendErrors,t.isLoading=!1})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:t.$t("Confirm your email"),expression:"$t('Confirm your email')"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui small text container"},[a("h2",[t._v(t._s(t.$t("Confirm your email")))]),t._v(" "),t.success?a("div",{staticClass:"ui positive message"},[a("div",{staticClass:"header"},[t._v(t._s(t.$t("Email confirmed")))]),t._v(" "),a("p",[t._v(t._s(t.$t("Your email address was confirmed, you can now use the service without limitations.")))]),t._v(" "),a("router-link",{attrs:{to:{name:"login"}}},[t._v("\n          "+t._s(t.$t("Proceed to login"))+"\n        ")])],1):a("form",{staticClass:"ui form",on:{submit:function(e){e.preventDefault(),t.submit()}}},[t.errors.length>0?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[t._v(t._s(t.$t("Error while confirming your email")))]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}))]):t._e(),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Confirmation code")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"key"}],attrs:{type:"text",required:""},domProps:{value:t.key},on:{input:function(e){e.target.composing||(t.key=e.target.value)}}})]),t._v(" "),a("router-link",{attrs:{to:{path:"/login"}}},[t._v("\n          "+t._s(t.$t("Back to login"))+"\n        ")]),t._v(" "),a("button",{class:["ui",{loading:t.isLoading},"right","floated","green","button"],attrs:{type:"submit"}},[t._v("\n          "+t._s(t.$t("Confirm your email")))])],1)])])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(402)}var s=a(1)(a(403),a(404),i,null,null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={computed:{showImports:function(){return this.$store.state.auth.availablePermissions.upload||this.$store.state.auth.availablePermissions.library}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main library pusher"},[a("div",{staticClass:"ui secondary pointing menu"},[a("router-link",{staticClass:"ui item",attrs:{to:"/library",exact:""}},[a("i18next",{attrs:{path:"Browse"}})],1),t._v(" "),a("router-link",{staticClass:"ui item",attrs:{to:"/library/artists",exact:""}},[a("i18next",{attrs:{path:"Artists"}})],1),t._v(" "),a("router-link",{staticClass:"ui item",attrs:{to:"/library/radios",exact:""}},[a("i18next",{attrs:{path:"Radios"}})],1),t._v(" "),a("router-link",{staticClass:"ui item",attrs:{to:"/library/playlists",exact:""}},[a("i18next",{attrs:{path:"Playlists"}})],1),t._v(" "),a("div",{staticClass:"ui secondary right menu"},[t.$store.state.auth.authenticated?a("router-link",{staticClass:"ui item",attrs:{to:{name:"library.requests",query:{status:"pending"}},exact:""}},[a("i18next",{attrs:{path:"Requests"}})],1):t._e(),t._v(" "),t.showImports?a("router-link",{staticClass:"ui item",attrs:{to:"/library/import/launch",exact:""}},[a("i18next",{attrs:{path:"Import"}})],1):t._e(),t._v(" "),t.showImports?a("router-link",{staticClass:"ui item",attrs:{to:"/library/import/batches"}},[a("i18next",{attrs:{path:"Import batches"}})],1):t._e()],1)],1),t._v(" "),a("router-view",{key:t.$route.fullPath})],1)},staticRenderFns:[]}},function(t,e,a){function i(t){a(406)}var s=a(1)(a(407),a(431),i,"data-v-392694fd",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(408),r=a.n(n),o=a(3),l=a(67),c=a.n(l),u=a(98),d=a.n(u),v=a(427),p=a.n(v);e.default={name:"library",components:{Search:r.a,ArtistCard:c.a,RadioCard:d.a,RequestForm:p.a},data:function(){return{artists:[],isLoadingArtists:!1}},created:function(){this.fetchArtists()},methods:{fetchArtists:function(){var t=this;this.isLoadingArtists=!0;var e={ordering:"-creation_date"};o.a.default.time("Loading latest artists"),s.a.get("artists/",{params:e}).then(function(e){t.artists=e.data.results,o.a.default.timeEnd("Loading latest artists"),t.isLoadingArtists=!1})}}}},function(t,e,a){function i(t){a(409)}var s=a(1)(a(410),a(420),i,"data-v-497a264b",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(5),s=a.n(i),n=a(2),r=a.n(n),o=a(3),l=a(97),c=a.n(l),u=a(67),d=a.n(u);e.default={components:{AlbumCard:c.a,ArtistCard:d.a},props:{autofocus:{type:Boolean,default:!1}},data:function(){return{query:"",results:{albums:[],artists:[]},isLoading:!1}},mounted:function(){this.autofocus&&this.$refs.search.focus(),this.search()},methods:{search:s.a.debounce(function(){if(!(this.query.length<1)){var t=this;t.isLoading=!0,o.a.default.debug('Searching track matching "'+this.query+'"');var e={query:this.query};r.a.get("search",{params:e}).then(function(e){t.results=t.castResults(e.data),t.isLoading=!1})}},500),castResults:function(t){return{albums:t.albums,artists:t.artists}}},watch:{query:function(){this.search()}}}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(14),s=a(48),n=a.n(s),r=a(18),o=a.n(r);e.default={props:{album:{type:Object},mode:{type:String,default:"rich"}},components:{TrackFavoriteIcon:n.a,PlayButton:o.a},data:function(){return{backend:i.a,initialTracks:5,showAllTracks:!1}},computed:{tracks:function(){return this.showAllTracks?this.album.tracks:this.album.tracks.slice(0,this.initialTracks)}}}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(73),s=a.n(i),n=a(2),r=a.n(n),o=a(4),l=a.n(o);e.default={props:{tracks:{type:Array,required:!1},track:{type:Object,required:!1},playlist:{type:Object,required:!1},discrete:{type:Boolean,default:!1},artist:{type:Number,required:!1},album:{type:Number,required:!1}},data:function(){return{isLoading:!1}},mounted:function(){l()(this.$el).find(".ui.dropdown").dropdown()},computed:{title:function(){return this.playable?this.$t("Play immediatly"):this.track?this.$t("This track is not imported and cannot be played"):void 0},playable:function(){return this.track?this.track.files.length>0:this.tracks?this.tracks.length>0:!!this.playlist||(!!this.artist||!!this.album)}},methods:{getTracksPage:function(t,e,a,i){t>10&&a(i);var s=this;e.page_size=100,e.page=t,i=i||[],r.a.get("tracks/",{params:e}).then(function(n){n.data.results.forEach(function(t){i.push(t)}),n.data.next?s.getTracksPage(t+1,e,a,i):a(i)})},getPlayableTracks:function(){var t=this;return this.isLoading=!0,new s.a(function(e,a){if(t.track)e([t.track]);else if(t.tracks)e(t.tracks);else if(t.playlist){var i="playlists/"+t.playlist.id+"/";r.a.get(i+"tracks").then(function(t){e(t.data.results.map(function(t){return t.track}))})}else if(t.artist){var s={artist:t.artist,ordering:"album__release_date,position"};t.getTracksPage(1,s,e)}else if(t.album){var n={album:t.album,ordering:"position"};t.getTracksPage(1,n,e)}}).then(function(e){return setTimeout(function(e){t.isLoading=!1},250),e.filter(function(t){return t.files.length>0})})},add:function(){var t=this;this.getPlayableTracks().then(function(e){t.$store.dispatch("queue/appendMany",{tracks:e})})},addNext:function(t){var e=this,a=0===this.$store.state.queue.tracks.length;this.getPlayableTracks().then(function(i){e.$store.dispatch("queue/appendMany",{tracks:i,index:e.$store.state.queue.currentIndex+1}),t&&!a&&e.$store.dispatch("queue/next")})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["ui",{tiny:t.discrete},"buttons"],attrs:{title:t.title}},[a("button",{class:["ui",{loading:t.isLoading},{mini:t.discrete},{disabled:!t.playable},"button"],attrs:{title:t.$t("Add to current queue"),disabled:!t.playable},on:{click:function(e){t.addNext(!0)}}},[a("i",{staticClass:"ui play icon"}),t._v(" "),t.discrete?t._e():[t._t("default",[a("i18next",{attrs:{path:"Play"}})])]],2),t._v(" "),t.discrete?t._e():a("div",{class:["ui",{disabled:!t.playable},"floating","dropdown","icon","button"]},[a("i",{staticClass:"dropdown icon"}),t._v(" "),a("div",{staticClass:"menu"},[a("div",{staticClass:"item",attrs:{disabled:!t.playable},on:{click:t.add}},[a("i",{staticClass:"plus icon"}),a("i18next",{attrs:{path:"Add to queue"}})],1),t._v(" "),a("div",{staticClass:"item",attrs:{disabled:!t.playable},on:{click:function(e){t.addNext()}}},[a("i",{staticClass:"step forward icon"}),a("i18next",{attrs:{path:"Play next"}})],1),t._v(" "),a("div",{staticClass:"item",attrs:{disabled:!t.playable},on:{click:function(e){t.addNext(!0)}}},[a("i",{staticClass:"arrow down icon"}),a("i18next",{attrs:{path:"Play now"}})],1)])])])},staticRenderFns:[]}},function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui card"},[i("div",{staticClass:"content"},[i("div",{staticClass:"right floated tiny ui image"},[t.album.cover?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.backend.absoluteUrl(t.album.cover),expression:"backend.absoluteUrl(album.cover)"}]}):i("img",{attrs:{src:a(30)}})]),t._v(" "),i("div",{staticClass:"header"},[i("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.albums.detail",params:{id:t.album.id}}}},[t._v(t._s(t.album.title)+" ")])],1),t._v(" "),i("div",{staticClass:"meta"},[i("span",[i("i18next",{attrs:{path:"By {%0%}"}},[i("router-link",{attrs:{tag:"span",to:{name:"library.artists.detail",params:{id:t.album.artist.id}}}},[t._v("\n          "+t._s(t.album.artist.name))])],1)],1),t.album.release_date?i("span",{staticClass:"time"},[t._v(" "+t._s(t._f("year")(t.album.release_date)))]):t._e()]),t._v(" "),"rich"===t.mode?i("div",{staticClass:"description"},[i("table",{staticClass:"ui very basic fixed single line compact unstackable table"},[i("tbody",t._l(t.tracks,function(e){return i("tr",[i("td",{staticClass:"play-cell"},[i("play-button",{staticClass:"basic icon",attrs:{track:e,discrete:!0}})],1),t._v(" "),i("td",{attrs:{colspan:"6"}},[i("router-link",{staticClass:"track discrete link",attrs:{to:{name:"library.tracks.detail",params:{id:e.id}}}},[e.position?[t._v("\n                  "+t._s(e.position)+".\n                ")]:t._e(),t._v("\n                "+t._s(e.title)+"\n              ")],2)],1),t._v(" "),i("td",[i("track-favorite-icon",{attrs:{track:e}})],1)])}))]),t._v(" "),t.album.tracks.length>t.initialTracks?i("div",{staticClass:"center aligned segment"},[t.showAllTracks?i("em",{staticClass:"expand",on:{click:function(e){t.showAllTracks=!1}}},[i("i18next",{attrs:{path:"Collapse"}})],1):i("em",{staticClass:"expand",on:{click:function(e){t.showAllTracks=!0}}},[i("i18next",{attrs:{path:"Show {%0%} more tracks"}},[t._v(t._s(t.album.tracks.length-t.initialTracks))])],1)]):t._e()]):t._e()]),t._v(" "),i("div",{staticClass:"extra content"},[i("play-button",{staticClass:"mini basic orange right floated",attrs:{tracks:t.album.tracks}},[i("i18next",{attrs:{path:"Play all"}})],1),t._v(" "),i("span",[i("i",{staticClass:"music icon"}),t._v(" "),i("i18next",{attrs:{path:"{%0%} tracks"}},[t._v("\n        "+t._s(t.album.tracks.length)+"\n      ")])],1)],1)])},staticRenderFns:[]}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(14),s=a(18),n=a.n(s);e.default={props:["artist"],components:{PlayButton:n.a},data:function(){return{backend:i.a,initialAlbums:30,showAllAlbums:!0}},computed:{albums:function(){return this.showAllAlbums?this.artist.albums:this.artist.albums.slice(0,this.initialAlbums)}}}},function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui card"},[i("div",{staticClass:"content"},[i("div",{staticClass:"header"},[i("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.artists.detail",params:{id:t.artist.id}}}},[t._v("\n          "+t._s(t.artist.name)+"\n        ")])],1),t._v(" "),i("div",{staticClass:"description"},[i("table",{staticClass:"ui compact very basic fixed single line unstackable table"},[i("tbody",t._l(t.albums,function(e){return i("tr",[i("td",[e.cover?i("img",{staticClass:"ui mini image",attrs:{src:t.backend.absoluteUrl(e.cover)}}):i("img",{staticClass:"ui mini image",attrs:{src:a(30)}})]),t._v(" "),i("td",{attrs:{colspan:"4"}},[i("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.albums.detail",params:{id:e.id}}}},[i("strong",[t._v(t._s(e.title))])]),i("br"),t._v("\n                "+t._s(e.tracks_count)+" tracks\n              ")],1),t._v(" "),i("td",[i("play-button",{staticClass:"right floated basic icon",attrs:{discrete:!0,album:e.id}})],1)])}))]),t._v(" "),t.artist.albums.length>t.initialAlbums?i("div",{staticClass:"center aligned segment"},[t.showAllAlbums?i("em",{staticClass:"expand",on:{click:function(e){t.showAllAlbums=!1}}},[i("i18next",{attrs:{path:"Collapse"}})],1):i("em",{staticClass:"expand",on:{click:function(e){t.showAllAlbums=!0}}},[i("i18next",{attrs:{path:"Show {%0%} more albums"}},[t._v("\n              "+t._s(t.artist.albums.length-t.initialAlbums)+"\n            ")])],1)]):t._e()])]),t._v(" "),i("div",{staticClass:"extra content"},[i("span",[i("i",{staticClass:"sound icon"}),t._v(" "),i("i18next",{attrs:{path:"{%0%} albums"}},[t._v("\n          "+t._s(t.artist.albums.length)+"\n        ")])],1),t._v(" "),i("play-button",{staticClass:"mini basic orange right floated",attrs:{artist:t.artist.id}},[i("i18next",{attrs:{path:"Play all"}})],1)],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[a("i18next",{attrs:{path:"Search for some music"}})],1),t._v(" "),a("div",{class:["ui",{loading:t.isLoading},"search"]},[a("div",{staticClass:"ui icon big input"},[a("i",{staticClass:"search icon"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.query,expression:"query",modifiers:{trim:!0}}],ref:"search",staticClass:"prompt",attrs:{placeholder:"Artist, album, track...",type:"text"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),t.query.length>0?[a("h3",{staticClass:"ui title"},[a("i18next",{attrs:{path:"Artists"}})],1),t._v(" "),t.results.artists.length>0?a("div",{staticClass:"ui stackable three column grid"},t._l(t.results.artists,function(t){return a("div",{key:t.id,staticClass:"column"},[a("artist-card",{staticClass:"fluid",attrs:{artist:t}})],1)})):a("p",[a("i18next",{attrs:{path:"Sorry, we did not found any artist matching your query"}})],1)]:t._e(),t._v(" "),t.query.length>0?[a("h3",{staticClass:"ui title"},[a("i18next",{attrs:{path:"Albums"}})],1),t._v(" "),t.results.albums.length>0?a("div",{staticClass:"ui stackable three column grid"},t._l(t.results.albums,function(t){return a("div",{key:t.id,staticClass:"column"},[a("album-card",{staticClass:"fluid",attrs:{album:t}})],1)})):a("p",[a("i18next",{attrs:{path:"Sorry, we did not found any album matching your query"}})],1)]:t._e()],2)},staticRenderFns:[]}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(19),s=a.n(i);e.default={props:{type:{type:String,required:!0},customRadio:{required:!1}},components:{RadioButton:s.a},computed:{radio:function(){return this.customRadio?this.customRadio:this.$store.getters["radios/types"][this.type]},customRadioId:function(){return this.customRadio?this.customRadio.id:null}}}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{customRadioId:{required:!1},type:{type:String,required:!1},objectId:{type:Number,default:null}},methods:{toggleRadio:function(){this.running?this.$store.dispatch("radios/stop"):this.$store.dispatch("radios/start",{type:this.type,objectId:this.objectId,customRadioId:this.customRadioId})}},computed:{running:function(){var t=this.$store.state.radios,e=t.current;return!!t.running&&(e.type===this.type&&e.objectId===this.objectId&&e.customRadioId===this.customRadioId)}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{class:["ui","blue",{inverted:t.running},"button"],on:{click:t.toggleRadio}},[a("i",{staticClass:"ui feed icon"}),t._v(" "),t.running?[t._v(t._s(t.$t("Stop")))]:[t._v(t._s(t.$t("Start")))],t._v("\n  radio\n")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui card"},[a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[a("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.radios.detail",params:{id:t.radio.id}}}},[t._v("\n        "+t._s(t.radio.name)+"\n      ")])],1),t._v(" "),a("div",{staticClass:"description"},[t._v("\n      "+t._s(t.radio.description)+"\n    ")])]),t._v(" "),a("div",{staticClass:"extra content"},[t.$store.state.auth.authenticated&&"custom"===t.type&&t.customRadio.user===t.$store.state.auth.profile.id?a("router-link",{staticClass:"ui basic yellow button",attrs:{to:{name:"library.radios.edit",params:{id:t.customRadioId}}}},[t._v("\n      "+t._s(t.$t("Edit..."))+"\n    ")]):t._e(),t._v(" "),a("radio-button",{staticClass:"right floated button",attrs:{type:t.type,"custom-radio-id":t.customRadioId}})],1)])},staticRenderFns:[]}},function(t,e,a){function i(t){a(428)}var s=a(1)(a(429),a(430),i,"data-v-55302f95",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i),n=a(2),r=a.n(n),o=a(3);e.default={props:{defaultArtistName:{type:String,default:""},defaultAlbums:{type:String,default:""},defaultComment:{type:String,default:""}},created:function(){this.fetchRequests()},mounted:function(){s()(".ui.radio.checkbox").checkbox()},data:function(){return{currentArtistName:this.defaultArtistName,currentAlbums:this.defaultAlbums,currentComment:this.defaultComment,isLoading:!1,over:!1,requests:[]}},methods:{fetchRequests:function(){var t=this;r.a.get("requests/import-requests/",{}).then(function(e){t.requests=e.data.results})},submit:function(){var t=this;this.isLoading=!0;var e={artist_name:this.currentArtistName,albums:this.currentAlbums,comment:this.currentComment};r.a.post("requests/import-requests/",e).then(function(e){o.a.default.info("Submitted request!"),t.isLoading=!1,t.over=!0,t.requests.unshift(e.data)},function(e){o.a.default.error("error while submitting request"),t.isLoading=!1})},reset:function(){this.over=!1,this.currentArtistName="",this.currentAlbums="",this.currentComment=""},truncate:function(t,e){return t.length>e?t.substring(0,e)+"":t}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.over?a("div",{staticClass:"ui success message"},[a("div",{staticClass:"header"},[t._v("Request submitted!")]),t._v(" "),a("p",[t._v(t._s(t.$t("We've received your request, you'll get some groove soon ;)")))]),t._v(" "),a("button",{staticClass:"ui button",on:{click:t.reset}},[t._v(t._s(t.$t("Submit another request")))])]):a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("p",[t._v(t._s(t.$t("Something's missing in the library? Let us know what you would like to listen!")))]),t._v(" "),a("div",{staticClass:"required field"},[a("label",[t._v(t._s(t.$t("Artist name")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentArtistName,expression:"currentArtistName"}],attrs:{placeholder:"The Beatles, Mickael Jackson",required:"",maxlength:"200"},domProps:{value:t.currentArtistName},on:{input:function(e){e.target.composing||(t.currentArtistName=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Albums")))]),t._v(" "),a("p",[t._v(t._s(t.$t("Leave this field empty if you're requesting the whole discography.")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentAlbums,expression:"currentAlbums"}],attrs:{placeholder:"The White Album, Thriller",maxlength:"2000"},domProps:{value:t.currentAlbums},on:{input:function(e){e.target.composing||(t.currentAlbums=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Comment")))]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentComment,expression:"currentComment"}],attrs:{rows:"3",placeholder:"Use this comment box to add details to your request if needed",maxlength:"2000"},domProps:{value:t.currentComment},on:{input:function(e){e.target.composing||(t.currentComment=e.target.value)}}})]),t._v(" "),a("button",{staticClass:"ui submit button",attrs:{type:"submit"}},[t._v(t._s(t.$t("Submit")))])]),t._v(" "),t.requests.length>0?a("div",[a("div",{staticClass:"ui divider"}),t._v(" "),a("h3",{staticClass:"ui header"},[t._v(t._s(t.$t("Pending requests")))]),t._v(" "),a("div",{staticClass:"ui list"},t._l(t.requests,function(e){return a("div",{staticClass:"item"},[a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[t._v(t._s(e.artist_name))]),t._v(" "),e.albums?a("div",{staticClass:"description"},[t._v("\n            "+t._s(t._f("truncate")(e.albums)))]):t._e(),t._v(" "),e.comment?a("div",{staticClass:"description"},[t._v("\n            "+t._s(t._f("truncate")(e.comment)))]):t._e()])])}))]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Home",expression:"'Home'"}]},[a("div",{staticClass:"ui vertical stripe segment"},[a("search",{attrs:{autofocus:!0}})],1),t._v(" "),a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui stackable three column grid"},[a("div",{staticClass:"column"},[a("h2",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Latest artists"}})],1),t._v(" "),a("div",{class:["ui",{active:t.isLoadingArtists},"inline","loader"]}),t._v(" "),t._l(t.artists.slice(0,3),function(e){return t.artists.length>0?a("div",{key:e.id,staticClass:"ui cards"},[a("artist-card",{attrs:{artist:e}})],1):t._e()})],2),t._v(" "),a("div",{staticClass:"column"},[a("h2",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Radios"}})],1),t._v(" "),a("radio-card",{attrs:{type:"favorites"}}),t._v(" "),a("radio-card",{attrs:{type:"random"}}),t._v(" "),a("radio-card",{attrs:{type:"less-listened"}})],1),t._v(" "),a("div",{staticClass:"column"},[a("h2",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Music requests"}})],1),t._v(" "),t.$store.state.auth.authenticated?a("request-form"):t._e()],1)])])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(433)}var s=a(1)(a(434),a(436),i,"data-v-8e383c36",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(99),s=a.n(i),n=a(2),r=a.n(n),o=a(3),l=a(14),c=a(97),u=a.n(c),d=a(19),v=a.n(d),p=a(18),f=a.n(p);e.default={props:["id"],components:{AlbumCard:u.a,RadioButton:v.a,PlayButton:f.a},data:function(){return{isLoading:!0,isLoadingAlbums:!0,artist:null,albums:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this,e=this;this.isLoading=!0;var a="artists/"+this.id+"/";o.a.default.debug('Fetching artist "'+this.id+'"'),r.a.get(a).then(function(a){e.artist=a.data,e.isLoading=!1,e.isLoadingAlbums=!0,r.a.get("albums/",{params:{artist:t.id,ordering:"-release_date"}}).then(function(t){e.albums=JSON.parse(s()(t.data.results)).map(function(t){return l.a.Album.clean(t)}),e.isLoadingAlbums=!1})})}},computed:{totalTracks:function(){return this.albums.map(function(t){return t.tracks.length}).reduce(function(t,e){return t+e})},wikipediaUrl:function(){return"https://en.wikipedia.org/w/index.php?search="+this.artist.name},musicbrainzUrl:function(){return"https://musicbrainz.org/artist/"+this.artist.mbid},allTracks:function(){var t=[];return this.albums.forEach(function(e){e.tracks.forEach(function(e){t.push(e)})}),t},cover:function(){return this.artist.albums.filter(function(t){return t.cover}).map(function(t){return t.cover})[0]},headerStyle:function(){return this.cover?"background-image: url("+l.a.absoluteUrl(this.cover)+")":""}},watch:{id:function(){this.fetchData()}}}},,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?a("div",{directives:[{name:"title",rawName:"v-title",value:"Artist",expression:"'Artist'"}],staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),t.artist?[a("div",{directives:[{name:"title",rawName:"v-title",value:t.artist.name,expression:"artist.name"}],class:["ui","head",{"with-background":t.cover},"vertical","center","aligned","stripe","segment"],style:t.headerStyle},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui center aligned icon header"},[a("i",{staticClass:"circular inverted users violet icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.artist.name)+"\n            "),t.albums?a("div",{staticClass:"sub header"},[t._v("\n              "+t._s(t.$t("{% track_count %} tracks in {% album_count %} albums",{track_count:t.totalTracks,album_count:t.albums.length}))+"\n            ")]):t._e()])]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("radio-button",{attrs:{type:"artist","object-id":t.artist.id}}),t._v(" "),a("play-button",{staticClass:"orange",attrs:{artist:t.artist.id}},[a("i18next",{attrs:{path:"Play all albums"}})],1),t._v(" "),a("a",{staticClass:"ui button",attrs:{href:t.wikipediaUrl,target:"_blank"}},[a("i",{staticClass:"wikipedia icon"}),t._v(" "),a("i18next",{attrs:{path:"Search on Wikipedia"}})],1),t._v(" "),a("a",{staticClass:"ui button",attrs:{href:t.musicbrainzUrl,target:"_blank"}},[a("i",{staticClass:"external icon"}),t._v(" "),a("i18next",{attrs:{path:"View on MusicBrainz"}})],1)],1)]),t._v(" "),t.isLoadingAlbums?a("div",{staticClass:"ui vertical stripe segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t.albums?a("div",{staticClass:"ui vertical stripe segment"},[a("h2",[a("i18next",{attrs:{path:"Albums by this artist"}})],1),t._v(" "),a("div",{staticClass:"ui stackable doubling three column grid"},t._l(t.albums,function(t){return a("div",{key:t.id,staticClass:"column"},[a("album-card",{staticClass:"fluid",attrs:{mode:"rich",album:t}})],1)}))]):t._e()]:t._e()],2)},staticRenderFns:[]}},function(t,e,a){function i(t){a(438)}var s=a(1)(a(439),a(445),i,"data-v-6743fbde",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(5),r=a.n(n),o=a(4),l=a.n(o),c=a(3),u=a(26),d=a.n(u),v=a(31),p=a.n(v),f=a(67),h=a.n(f),m=a(8),_=a.n(m);e.default={mixins:[d.a,p.a],props:{defaultQuery:{type:String,required:!1,default:""}},components:{ArtistCard:h.a,Pagination:_.a},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{isLoading:!0,result:null,page:parseInt(this.defaultPage),query:this.defaultQuery,paginateBy:parseInt(this.defaultPaginateBy||12),orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","Creation date"],["name","Name"]]}},created:function(){this.fetchData()},mounted:function(){l()(".ui.dropdown").dropdown()},methods:{updateQueryString:r.a.debounce(function(){this.$router.replace({query:{query:this.query,page:this.page,paginateBy:this.paginateBy,ordering:this.getOrderingAsString()}})},500),fetchData:r.a.debounce(function(){var t=this;this.isLoading=!0;var e={page:this.page,page_size:this.paginateBy,name__icontains:this.query,ordering:this.getOrderingAsString(),listenable:"true"};c.a.default.debug("Fetching artists"),s.a.get("artists/",{params:e}).then(function(e){t.result=e.data,t.isLoading=!1})},500),selectPage:function(t){this.page=t}},watch:{page:function(){this.updateQueryString(),this.fetchData()},paginateBy:function(){this.updateQueryString(),this.fetchData()},ordering:function(){this.updateQueryString(),this.fetchData()},orderingDirection:function(){this.updateQueryString(),this.fetchData()},query:function(){this.updateQueryString(),this.fetchData()}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{defaultOrdering:{type:String,required:!1}},methods:{getOrderingFromString:function(t){var e=t.split("-");return e.length>1?{direction:"-",field:e.slice(1).join("-")}:{direction:"+",field:t}},getOrderingAsString:function(){var t=this.orderingDirection;return"+"===t&&(t=""),[t,this.ordering].join("")}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{defaultPage:{required:!1,default:1},defaultPaginateBy:{required:!1}}}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(5),s=a.n(i);e.default={props:{current:{type:Number,default:1},paginateBy:{type:Number,default:25},total:{type:Number},compact:{type:Boolean,default:!1}},computed:{pages:function(){var t=this.current,e=s.a.range(1,Math.min(this.maxPage,3)),a=s.a.range(Math.max(1,t-2+1),Math.min(this.maxPage,t+2)),i=s.a.range(this.maxPage,Math.max(1,this.maxPage-2)),n=e.concat(a,i);n=s.a.uniq(n),n=s.a.sortBy(n,[function(t){return t}]);var r=[];return n.forEach(function(t){var e=r.slice(-1)[0],a=!0;a="skip"!==e&&(!e||e+1===t),a?r.push(t):"skip"!==t&&(r.push("skip"),r.push(t))}),r},maxPage:function(){return Math.ceil(this.total/this.paginateBy)}},methods:{selectPage:function(t){t>this.maxPage||t<1||this.current!==t&&this.$emit("page-changed",t)}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui pagination menu"},[a("div",{class:[{disabled:t.current-1<1},"item"],attrs:{disabled:t.current-1<1},on:{click:function(e){t.selectPage(t.current-1)}}},[a("i",{staticClass:"angle left icon"})]),t._v(" "),t.compact?t._e():t._l(t.pages,function(e){return"skip"!==e?a("div",{class:[{active:e===t.current},"item"],on:{click:function(a){t.selectPage(e)}}},[t._v("\n      "+t._s(e)+"\n    ")]):a("div",{staticClass:"disabled item"},[t._v("\n      ...\n    ")])}),t._v(" "),a("div",{class:[{disabled:t.current+1>t.maxPage},"item"],attrs:{disabled:t.current+1>t.maxPage},on:{click:function(e){t.selectPage(t.current+1)}}},[a("i",{staticClass:"angle right icon"})])],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Artists",expression:"'Artists'"}]},[a("div",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Browsing artists"}})],1),t._v(" "),a("div",{class:["ui",{loading:t.isLoading},"form"]},[a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("label",[a("i18next",{attrs:{path:"Search"}})],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"text",placeholder:"Enter an artist name..."},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Ordering"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,function(e){return a("option",{domProps:{value:e[0]}},[t._v("\n              "+t._s(e[1])+"\n            ")])}))],1),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Ordering direction"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[t._v("Ascending")]),t._v(" "),a("option",{attrs:{value:"-"}},[t._v("Descending")])])],1),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Results per page"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.paginateBy,expression:"paginateBy"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.paginateBy=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:parseInt(12)}},[t._v("12")]),t._v(" "),a("option",{domProps:{value:parseInt(25)}},[t._v("25")]),t._v(" "),a("option",{domProps:{value:parseInt(50)}},[t._v("50")])])],1)])]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),t.result?a("div",{directives:[{name:"masonry",rawName:"v-masonry"}],staticClass:"ui stackable three column doubling grid",attrs:{"transition-duration":"0","item-selector":".column","percent-position":"true",stagger:"0"}},t._l(t.result.results,function(e){return t.result.results.length>0?a("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:e.id,staticClass:"column"},[a("artist-card",{staticClass:"fluid",attrs:{artist:e}})],1):t._e()})):t._e(),t._v(" "),a("div",{staticClass:"ui center aligned basic segment"},[t.result&&t.result.results.length>0?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1)])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(447)}var s=a(1)(a(448),a(459),i,"data-v-7ee98d41",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(3),r=a(14),o=a(18),l=a.n(o),c=a(20),u=a.n(c);e.default={props:["id"],components:{PlayButton:l.a,TrackTable:u.a},data:function(){return{isLoading:!0,album:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="albums/"+this.id+"/";n.a.default.debug('Fetching album "'+this.id+'"'),s.a.get(e).then(function(e){t.album=r.a.Album.clean(e.data),t.isLoading=!1})}},computed:{wikipediaUrl:function(){return"https://en.wikipedia.org/w/index.php?search="+this.album.title+" "+this.album.artist.name},musicbrainzUrl:function(){return"https://musicbrainz.org/release/"+this.album.mbid},headerStyle:function(){return this.album.cover?"background-image: url("+r.a.absoluteUrl(this.album.cover)+")":""}},watch:{id:function(){this.fetchData()}}}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(14),s=a(451),n=a.n(s),r=a(49),o=a.n(r);e.default={props:{tracks:{type:Array,required:!0},displayPosition:{type:Boolean,default:!1}},components:{Modal:o.a,TrackRow:n.a},data:function(){return{backend:i.a,showDownloadModal:!1}}}},function(t,e,a){function i(t){a(452)}var s=a(1)(a(453),a(454),i,"data-v-55bda8c3",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(14),s=a(48),n=a.n(s),r=a(66),o=a.n(r),l=a(18),c=a.n(l);e.default={props:{track:{type:Object,required:!0},displayPosition:{type:Boolean,default:!1}},components:{TrackFavoriteIcon:n.a,TrackPlaylistIcon:o.a,PlayButton:c.a},data:function(){return{backend:i.a}}}},function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[i("play-button",{staticClass:"basic icon",attrs:{discrete:!0,track:t.track}})],1),t._v(" "),i("td",[t.track.album.cover?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.backend.absoluteUrl(t.track.album.cover),expression:"backend.absoluteUrl(track.album.cover)"}],staticClass:"ui mini image"}):i("img",{staticClass:"ui mini image",attrs:{src:a(30)}})]),t._v(" "),i("td",{attrs:{colspan:"6"}},[i("router-link",{staticClass:"track",attrs:{to:{name:"library.tracks.detail",params:{id:t.track.id}}}},[t.displayPosition&&t.track.position?[t._v("\n        "+t._s(t.track.position)+".\n      ")]:t._e(),t._v("\n      "+t._s(t.track.title)+"\n    ")],2)],1),t._v(" "),i("td",{attrs:{colspan:"6"}},[i("router-link",{staticClass:"artist discrete link",attrs:{to:{name:"library.artists.detail",params:{id:t.track.artist.id}}}},[t._v("\n      "+t._s(t.track.artist.name)+"\n    ")])],1),t._v(" "),i("td",{attrs:{colspan:"6"}},[i("router-link",{staticClass:"album discrete link",attrs:{to:{name:"library.albums.detail",params:{id:t.track.album.id}}}},[t._v("\n      "+t._s(t.track.album.title)+"\n    ")])],1),t._v(" "),i("td",[i("track-favorite-icon",{staticClass:"favorite-icon",attrs:{track:t.track}}),t._v(" "),t.$store.state.auth.authenticated?i("track-playlist-icon",{attrs:{track:t.track}}):t._e()],1)])},staticRenderFns:[]}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i);e.default={props:{show:{type:Boolean,required:!0}},data:function(){return{control:null}},beforeDestroy:function(){this.control&&this.control.remove()},methods:{initModal:function(){this.control=s()(this.$el).modal({duration:100,onApprove:function(){this.$emit("approved")}.bind(this),onDeny:function(){this.$emit("deny")}.bind(this),onHidden:function(){this.$emit("update:show",!1)}.bind(this)})}},watch:{show:{handler:function(t){t?(this.initModal(),this.control.modal("show")):this.control&&(this.control.modal("hide"),this.control.remove())}}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["ui",{active:t.show},"modal"]},[a("i",{staticClass:"close icon"}),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"ui compact very basic fixed single line unstackable table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th"),t._v(" "),a("i18next",{attrs:{tag:"th",colspan:"6",path:"Title"}}),t._v(" "),a("i18next",{attrs:{tag:"th",colspan:"6",path:"Artist"}}),t._v(" "),a("i18next",{attrs:{tag:"th",colspan:"6",path:"Album"}}),t._v(" "),a("th")],1)]),t._v(" "),a("tbody",t._l(t.tracks,function(e,i){return a("track-row",{key:i+"-"+e.id,attrs:{"display-position":t.displayPosition,track:e}})})),t._v(" "),a("tfoot",{staticClass:"full-width"},[a("tr",[a("th",{attrs:{colspan:"3"}},[a("button",{staticClass:"ui basic button",on:{click:function(e){t.showDownloadModal=!t.showDownloadModal}}},[a("i18next",{attrs:{path:"Download..."}})],1),t._v(" "),a("modal",{attrs:{show:t.showDownloadModal},on:{"update:show":function(e){t.showDownloadModal=e}}},[a("i18next",{staticClass:"header",attrs:{tag:"div",path:"Download tracks"}}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[a("i18next",{attrs:{tag:"p",path:"There is currently no way to download directly multiple tracks from funkwhale as a ZIP archive. However, you can use a command line tools such as {%0%} to easily download a list of tracks."}},[a("a",{attrs:{href:"https://curl.haxx.se/",target:"_blank"}},[t._v("cURL")])]),t._v(" "),a("i18next",{attrs:{path:"Simply copy paste the snippet below into a terminal to launch the download."}}),t._v(" "),a("i18next",{staticClass:"ui warning message",attrs:{tag:"div",path:"Keep your PRIVATE_TOKEN secret as it gives access to your account."}}),t._v(" "),a("pre",[t._v('export PRIVATE_TOKEN="'+t._s(t.$store.state.auth.token)+'"\n'),t._l(t.tracks,function(e){return[e.files.length>0?[t._v('\ncurl -G -o "'+t._s(e.files[0].filename)+'" '),t.$store.state.auth.authenticated?[t._v('--header "Authorization: JWT $PRIVATE_TOKEN"')]:t._e(),t._v(' "'+t._s(t.backend.absoluteUrl(e.files[0].path))+'"')]:t._e()]}),t._v("\n")],2)],1)]),t._v(" "),a("div",{staticClass:"actions"},[a("i18next",{staticClass:"ui black deny button",attrs:{tag:"div",path:"Cancel"}})],1)],1)],1),t._v(" "),a("th"),t._v(" "),a("th",{attrs:{colspan:"4"}}),t._v(" "),a("th",{attrs:{colspan:"6"}}),t._v(" "),a("th",{attrs:{colspan:"6"}}),t._v(" "),a("th")])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?a("div",{directives:[{name:"title",rawName:"v-title",value:"Album",expression:"'Album'"}],staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),t.album?[a("div",{directives:[{name:"title",rawName:"v-title",value:t.album.title,expression:"album.title"}],class:["ui","head",{"with-background":t.album.cover},"vertical","center","aligned","stripe","segment"],style:t.headerStyle},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui center aligned icon header"},[a("i",{staticClass:"circular inverted sound yellow icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.album.title)+"\n            "),a("i18next",{staticClass:"sub header",attrs:{tag:"div",path:"Album containing {%0%} tracks, by {%1%}"}},[t._v("\n              "+t._s(t.album.tracks.length)+"\n              "),a("router-link",{attrs:{to:{name:"library.artists.detail",params:{id:t.album.artist.id}}}},[t._v("\n                "+t._s(t.album.artist.name)+"\n              ")])],1)],1)]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("play-button",{staticClass:"orange",attrs:{tracks:t.album.tracks}},[a("i18next",{attrs:{path:"Play all"}})],1),t._v(" "),a("a",{staticClass:"ui button",attrs:{href:t.wikipediaUrl,target:"_blank"}},[a("i",{staticClass:"wikipedia icon"}),t._v(" "),a("i18next",{attrs:{path:"Search on Wikipedia"}})],1),t._v(" "),a("a",{staticClass:"ui button",attrs:{href:t.musicbrainzUrl,target:"_blank"}},[a("i",{staticClass:"external icon"}),t._v(" "),a("i18next",{attrs:{path:"View on MusicBrainz"}})],1)],1)]),t._v(" "),a("div",{staticClass:"ui vertical stripe segment"},[a("h2",[a("i18next",{attrs:{path:"Tracks"}})],1),t._v(" "),t.album?a("track-table",{attrs:{"display-position":!0,tracks:t.album.tracks}}):t._e()],1)]:t._e()],2)},staticRenderFns:[]}},function(t,e,a){function i(t){a(461)}var s=a(1)(a(462),a(463),i,"data-v-c8e99bc6",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(32),s=a(2),n=a.n(s),r=a(96),o=a(3),l=a(14),c=a(18),u=a.n(c),d=a(48),v=a.n(d),p=a(66),f=a.n(p);e.default={props:["id"],components:{PlayButton:u.a,TrackPlaylistIcon:f.a,TrackFavoriteIcon:v.a},data:function(){return{time:i.a,isLoadingTrack:!0,isLoadingLyrics:!0,track:null,lyrics:null}},created:function(){this.fetchData(),this.fetchLyrics()},methods:{fetchData:function(){var t=this;this.isLoadingTrack=!0;var e="tracks/"+this.id+"/";o.a.default.debug('Fetching track "'+this.id+'"'),n.a.get(e).then(function(e){t.track=e.data,t.isLoadingTrack=!1})},fetchLyrics:function(){var t=this;this.isLoadingLyrics=!0;var e="tracks/"+this.id+"/lyrics/";o.a.default.debug('Fetching lyrics for track "'+this.id+'"'),n.a.get(e).then(function(e){t.lyrics=e.data,t.isLoadingLyrics=!1},function(e){console.error("No lyrics available"),t.isLoadingLyrics=!1})}},computed:{wikipediaUrl:function(){return"https://en.wikipedia.org/w/index.php?search="+this.track.title+" "+this.track.artist.name},musicbrainzUrl:function(){return"https://musicbrainz.org/recording/"+this.track.mbid},downloadUrl:function(){if(this.track.files.length>0){var t=l.a.absoluteUrl(this.track.files[0].path);return this.$store.state.auth.authenticated&&(t=r.a.updateQueryString(t,"jwt",this.$store.state.auth.token)),t}},file:function(){return this.track.files[0]},lyricsSearchUrl:function(){return"http://lyrics.wikia.com/wiki/Special:Search?query="+this.track.artist.name+" "+this.track.title},cover:function(){return null},headerStyle:function(){return this.cover?"background-image: url("+l.a.absoluteUrl(this.cover)+")":""}},watch:{id:function(){this.fetchData()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoadingTrack?a("div",{directives:[{name:"title",rawName:"v-title",value:"Track",expression:"'Track'"}],staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),t.track?[a("div",{directives:[{name:"title",rawName:"v-title",value:t.track.title,expression:"track.title"}],class:["ui","head",{"with-background":t.cover},"vertical","center","aligned","stripe","segment"],style:t.headerStyle},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui center aligned icon header"},[a("i",{staticClass:"circular inverted music orange icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.track.title)+"\n            "),a("div",{staticClass:"sub header"},[a("i18next",{attrs:{path:"From album {%0%} by {%1%}"}},[a("router-link",{attrs:{to:{name:"library.albums.detail",params:{id:t.track.album.id}}}},[t._v("\n                  "+t._s(t.track.album.title)+"\n                ")]),a("router-link",{attrs:{to:{name:"library.artists.detail",params:{id:t.track.artist.id}}}},[t._v("\n                  "+t._s(t.track.artist.name)+"\n                ")])],1)],1)])]),t._v(" "),a("play-button",{staticClass:"orange",attrs:{track:t.track}},[a("i18next",{attrs:{path:"Play"}})],1),t._v(" "),a("track-favorite-icon",{attrs:{track:t.track,button:!0}}),t._v(" "),t.$store.state.auth.authenticated?a("track-playlist-icon",{attrs:{button:!0,track:t.track}}):t._e(),t._v(" "),a("a",{staticClass:"ui button",attrs:{href:t.wikipediaUrl,target:"_blank"}},[a("i",{staticClass:"wikipedia icon"}),t._v(" "),a("i18next",{attrs:{path:"Search on Wikipedia"}})],1),t._v(" "),a("a",{staticClass:"ui button",attrs:{href:t.musicbrainzUrl,target:"_blank"}},[a("i",{staticClass:"external icon"}),t._v(" "),a("i18next",{attrs:{path:"View on MusicBrainz"}})],1),t._v(" "),t.downloadUrl?a("a",{staticClass:"ui button",attrs:{href:t.downloadUrl,target:"_blank"}},[a("i",{staticClass:"download icon"}),t._v(" "),a("i18next",{attrs:{path:"Download"}})],1):t._e()],1)]),t._v(" "),t.file?a("div",{staticClass:"ui vertical stripe center aligned segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.$t("Track information")))]),t._v(" "),a("table",{staticClass:"ui very basic collapsing celled center aligned table"},[a("tbody",[a("tr",[a("td",[t._v("\n              "+t._s(t.$t("Duration"))+"\n            ")]),t._v(" "),t.file.duration?a("td",[t._v("\n              "+t._s(t.time.parse(t.file.duration))+"\n            ")]):a("td",[t._v("\n              "+t._s(t.$t("N/A"))+"\n            ")])]),t._v(" "),a("tr",[a("td",[t._v("\n              "+t._s(t.$t("Size"))+"\n            ")]),t._v(" "),t.file.size?a("td",[t._v("\n              "+t._s(t._f("humanSize")(t.file.size))+"\n            ")]):a("td",[t._v("\n              "+t._s(t.$t("N/A"))+"\n            ")])]),t._v(" "),a("tr",[a("td",[t._v("\n              "+t._s(t.$t("Bitrate"))+"\n            ")]),t._v(" "),t.file.bitrate?a("td",[t._v("\n              "+t._s(t._f("humanSize")(t.file.bitrate))+"/s\n            ")]):a("td",[t._v("\n              "+t._s(t.$t("N/A"))+"\n            ")])])])])]):t._e(),t._v(" "),a("div",{staticClass:"ui vertical stripe center aligned segment"},[a("h2",[a("i18next",{attrs:{path:"Lyrics"}})],1),t._v(" "),t.isLoadingLyrics?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),t.lyrics?a("div",{domProps:{innerHTML:t._s(t.lyrics.content_rendered)}}):t._e(),t._v(" "),!t.isLoadingLyrics&!t.lyrics?[a("i18next",{attrs:{tag:"p",path:"No lyrics available for this track."}}),t._v(" "),a("a",{staticClass:"ui button",attrs:{target:"_blank",href:t.lyricsSearchUrl}},[a("i",{staticClass:"search icon"}),t._v(" "),a("i18next",{attrs:{path:"Search on lyrics.wikia.com"}})],1)]:t._e()],2)]:t._e()],2)},staticRenderFns:[]}},function(t,e,a){function i(t){a(465)}var s=a(1)(a(466),a(523),i,"data-v-32830f75",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(100),s=a.n(i),n=a(473),r=a.n(n),o=a(477),l=a.n(o),c=a(484),u=a.n(c),d=a(102),v=a.n(d),p=a(499),f=a.n(p),h=a(520),m=a.n(h),_=a(2),g=a.n(_),b=a(37),y=a(4),C=a.n(y);e.default={components:{MetadataSearch:r.a,ArtistCard:u.a,ReleaseCard:l.a,ArtistImport:m.a,ReleaseImport:v.a,FileUpload:f.a,RequestCard:s.a},props:{mbType:{type:String,required:!1},request:{type:String,required:!1},source:{type:String,required:!1},mbId:{type:String,required:!1}},data:function(){return{currentRequest:null,currentType:this.mbType||"artist",currentId:this.mbId,currentStep:0,currentSource:this.source,metadata:{},isImporting:!1,importBatch:null,importData:{tracks:[]},backends:[{id:"youtube",label:"YouTube",icon:"youtube"}]}},created:function(){this.request&&this.fetchRequest(this.request),this.currentSource&&(this.currentStep=1)},mounted:function(){C()(this.$el).find(".ui.checkbox").checkbox()},methods:{updateRoute:function(){b.a.replace({query:{source:this.currentSource,type:this.currentType,id:this.currentId,request:this.request}})},updateImportData:function(t){this.importData=t},updateImportState:function(t){this.isImporting=t},updateMetadata:function(t){this.metadata=t},updateType:function(t){this.currentType=t},updateId:function(t){this.currentId=t},updateBatch:function(t){this.importBatch=t},fetchRequest:function(t){var e=this;g.a.get("requests/import-requests/"+t).then(function(t){e.currentRequest=t.data})},nextStep:function(){0===this.currentStep&&"upload"===this.currentSource?this.currentStep+=2:this.currentStep+=1}},computed:{metadataComponent:function(){return"artist"===this.currentType?"ArtistCard":"release"===this.currentType?"ReleaseCard":"recording"===this.currentType?"RecordingCard":void 0},importComponent:function(){return"artist"===this.currentType?"ArtistImport":"release"===this.currentType?"ReleaseImport":"recording"===this.currentType?"RecordingImport":void 0}},watch:{currentType:function(t){this.currentId="",this.updateRoute()},currentId:function(t){this.updateRoute()}}}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(469),s=a.n(i);e.default={props:{request:{type:Object,required:!0},importAction:{type:Boolean,default:!0}},components:{Comment:s.a},data:function(){return{collapsed:!0}},methods:{createImport:function(){this.$router.push({name:"library.import.launch",query:{request:this.request.id}})}}}},function(t,e,a){var i=a(1)(a(470),a(471),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{user:{type:Object,required:!0},date:{required:!0},content:{type:String,required:!0}},data:function(){return{collapsed:!0,length:50}},computed:{comment:function(){var t=this.content;return this.collapsed&&(t=this.$options.filters.truncate(t,this.length)),this.$options.filters.markdown(t)},truncated:function(){return this.content.length>this.length}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment"},[a("div",{staticClass:"content"},[a("a",{staticClass:"author"},[t._v(t._s(t.user.username))]),t._v(" "),a("div",{staticClass:"metadata"},[a("div",{staticClass:"date"},[a("human-date",{attrs:{date:t.date}})],1)]),t._v(" "),a("div",{staticClass:"text",domProps:{innerHTML:t._s(t.comment)}})]),t._v(" "),a("div",{staticClass:"actions"},[t.truncated&&t.collapsed?a("span",{staticClass:"expand",attrs:{path:"Expand"},on:{click:function(e){t.collapsed=!1}}}):t._e(),t._v(" "),t.truncated&&!t.collapsed?a("i18next",{staticClass:"collapse",attrs:{path:"Collapse"},on:{click:function(e){t.collapsed=!0}}}):t._e()],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["ui",{collapsed:t.collapsed},"card"]},[a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[t._v(t._s(t.request.artist_name))]),t._v(" "),a("div",{staticClass:"description"},[t.request.albums?a("div",{domProps:{innerHTML:t._s(t.$options.filters.markdown(t.request.albums))}}):t._e(),t._v(" "),a("div",{staticClass:"ui comments"},[a("comment",{attrs:{user:t.request.user,content:t.request.comment||"",date:t.request.creation_date}})],1)])]),t._v(" "),a("div",{staticClass:"extra content"},[a("span",["pending"===t.request.status?a("i",{staticClass:"hourglass start icon"}):t._e(),t._v(" "),"accepted"===t.request.status?a("i",{staticClass:"hourglass half icon"}):t._e(),t._v(" "),"imported"===t.request.status?a("i",{staticClass:"check icon"}):t._e(),t._v("\n      "+t._s(t._f("capitalize")(t.request.status))+"\n    ")]),t._v(" "),"pending"===t.request.status&&t.importAction&&t.$store.state.auth.availablePermissions.library?a("button",{staticClass:"ui mini basic green right floated button",on:{click:t.createImport}},[t._v(t._s(t.$t("Create import")))]):t._e()])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(474)}var s=a(1)(a(475),a(476),i,"data-v-6b5aefee",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i),n=a(36);e.default={props:{mbType:{type:String,required:!1},mbId:{type:String,required:!1}},data:function(){return{currentType:this.mbType||"artist",currentId:this.mbId||""}},mounted:function(){s()(this.$el).find(".ui.checkbox").checkbox(),this.setUpSearch()},methods:{setUpSearch:function(){var t=this;s()(this.$el).search({minCharacters:3,onSelect:function(e,a){t.currentId=e.id},apiSettings:{beforeXHR:function(e,a){return e.setRequestHeader("Authorization",t.$store.getters["auth/header"]),e},onResponse:function(e){var a=t.currentTypeObject.value;return{results:e[a+"-list"].map(function(t){var e=[];return"artist"===a?(t.type&&e.push(t.type),t.area?e.push(t.area.name):t["begin-area"]&&e.push(t["begin-area"].name),{title:t.name,id:t.id,description:e.join(" - ")}):"release"===a?(t["medium-track-count"]&&e.push(t["medium-track-count"]+" tracks"),t["artist-credit-phrase"]&&e.push(t["artist-credit-phrase"]),t.date&&e.push(t.date),{title:t.title,id:t.id,description:e.join(" - ")}):"recording"===a?(t["artist-credit-phrase"]&&e.push(t["artist-credit-phrase"]),{title:t.title,id:t.id,description:e.join(" - ")}):void 0})}},url:this.searchUrl}})}},computed:{currentTypeObject:function(){var t=this;return this.types.filter(function(e){return e.value===t.currentType})[0]},searchUrl:function(){return n.a.API_URL+"providers/musicbrainz/search/"+this.currentTypeObject.value+"s/?query={query}"},types:function(){return[{value:"artist",label:this.$t("Artist")},{value:"release",label:this.$t("Album")},{value:"recording",label:this.$t("Track")}]}},watch:{currentType:function(t){this.setUpSearch(),this.$emit("type-changed",t)},currentId:function(t){this.$emit("id-changed",t)}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui form"},[a("div",{staticClass:"inline fields"},t._l(t.types,function(e){return a("div",{staticClass:"field"},[a("div",{staticClass:"ui radio checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentType,expression:"currentType"}],attrs:{type:"radio"},domProps:{value:e.value,checked:t._q(t.currentType,e.value)},on:{change:function(a){t.currentType=e.value}}}),t._v(" "),a("label",[t._v(t._s(e.label))])])])}))]),t._v(" "),a("div",{staticClass:"ui fluid search"},[a("div",{staticClass:"ui icon input"},[a("input",{staticClass:"prompt",attrs:{placeholder:t.$t("Enter your search query..."),type:"text"}}),t._v(" "),a("i",{staticClass:"search icon"})]),t._v(" "),a("div",{staticClass:"results"})])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(478)}var s=a(1)(a(479),a(483),i,"data-v-0304ebe1",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(11),s=a(101),n=a.n(s),r=a(32);e.default=i.a.extend({mixins:[n.a],data:function(){return{time:r.a}},computed:{type:function(){return"release"},tracks:function(){return this.data["medium-list"][0]["track-list"]}}})},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(3);e.default={props:{mbId:{type:String,required:!0}},created:function(){this.fetchData()},data:function(){return{isLoading:!1,data:{}}},methods:{fetchData:function(){var t=this,e=this;this.isLoading=!0;var a="providers/musicbrainz/"+this.type+"s/"+this.mbId+"/";s.a.get(a).then(function(a){n.a.default.info("successfully fetched",e.type,e.mbId),e.data=a.data[e.type],t.$emit("metadata-changed",e.data),e.isLoading=!1},function(t){n.a.default.error("error while fetching",e.type,e.mbId),e.isLoading=!1})},getMusicbrainzUrl:function(t,e){return"https://musicbrainz.org/"+t+"/"+e}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui card"},[a("div",{staticClass:"content"},[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),t.data.id?[a("div",{staticClass:"header"},[a("a",{attrs:{href:t.getMusicbrainzUrl("release",t.data.id),target:"_blank",title:"View on MusicBrainz"}},[t._v(t._s(t.data.title))])]),t._v(" "),a("div",{staticClass:"meta"},[a("a",{attrs:{href:t.getMusicbrainzUrl("artist",t.data["artist-credit"][0].artist.id),target:"_blank",title:"View on MusicBrainz"}},[t._v(t._s(t.data["artist-credit-phrase"]))])]),t._v(" "),a("div",{staticClass:"description"},[a("table",{staticClass:"ui very basic fixed single line compact table"},[a("tbody",t._l(t.tracks,function(e){return a("tr",[a("td",[t._v("\n                "+t._s(e.position)+"\n              ")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("a",{staticClass:"discrete link",attrs:{href:t.getMusicbrainzUrl("recording",e.id),target:"_blank",title:t.$t("View on MusicBrainz")}},[t._v("\n                  "+t._s(e.recording.title)+"\n                ")])]),t._v(" "),a("td",[t._v("\n                  "+t._s(t.time.parse(parseInt(e.length)/1e3))+"\n                ")])])}))])])]:t._e()],2)])},staticRenderFns:[]}},function(t,e,a){function i(t){a(485)}var s=a(1)(a(486),a(487),i,"data-v-55e596bd",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(11),s=a(101),n=a.n(s),r=a(32);e.default=i.a.extend({mixins:[n.a],data:function(){return{time:r.a}},computed:{type:function(){return"artist"},releasesGroups:function(){return this.data["release-group-list"].filter(function(t){return"Album"===t.type})}}})},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui card"},[a("div",{staticClass:"content"},[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),t.data.id?[a("div",{staticClass:"header"},[a("a",{attrs:{href:t.getMusicbrainzUrl("artist",t.data.id),target:"_blank",title:"View on MusicBrainz"}},[t._v(t._s(t.data.name))])]),t._v(" "),a("div",{staticClass:"description"},[a("table",{staticClass:"ui very basic fixed single line compact table"},[a("tbody",t._l(t.releasesGroups,function(e){return a("tr",[a("td",[t._v("\n                "+t._s(e["first-release-date"])+"\n              ")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("a",{staticClass:"discrete link",attrs:{href:t.getMusicbrainzUrl("release-group",e.id),target:"_blank",title:t.$t("View on MusicBrainz")}},[t._v("\n                  "+t._s(e.title)+"\n                ")])]),t._v(" "),a("td")])}))])])]:t._e()],2)])},staticRenderFns:[]}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(11),s=a(68),n=a.n(s),r=a(493),o=a.n(r);e.default=i.a.extend({mixins:[n.a],components:{TrackImport:o.a},data:function(){return{trackImportData:[]}},methods:{recordTrackData:function(t){var e=this.trackImportData.filter(function(e){return e.mbid===t.mbid})[0];e?e.source=t.source:this.trackImportData.push({mbid:t.mbid,enabled:!0,source:t.source})},recordTrackEnabled:function(t,e){var a=this.trackImportData.filter(function(e){return e.mbid===t.mbid})[0];a?a.enabled=e:this.trackImportData.push({mbid:t.mbid,enabled:e,source:null})}},computed:{type:function(){return"release"},importType:function(){return"album"},tracks:function(){return this.metadata["medium-list"][0]["track-list"]},importData:function(){var t=this.trackImportData.filter(function(t){return t.enabled});return{releaseId:this.metadata.id,count:t.length,tracks:t}}},watch:{importData:{handler:function(t){this.$emit("import-data-changed",t)},deep:!0}}})},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(3),r=a(37);e.default={props:{metadata:{type:Object,required:!0},defaultEnabled:{type:Boolean,default:!0},backends:{type:Array},defaultBackendId:{type:String},queryTemplate:{type:String,default:"$artist $title"},request:{type:Object,required:!1}},data:function(){return{customQueryTemplate:this.queryTemplate,currentBackendId:this.defaultBackendId,isImporting:!1,enabled:this.defaultEnabled}},methods:{getMusicbrainzUrl:function(t,e){return"https://musicbrainz.org/"+t+"/"+e},launchImport:function(){var t=this;this.isImporting=!0;var e="submit/"+t.importType+"/",a=t.importData;this.request&&(a.importRequest=this.request.id),s.a.post(e,a).then(function(e){n.a.default.info("launched import for",t.type,t.metadata.id),t.isImporting=!1,r.a.push({name:"library.import.batches.detail",params:{id:e.data.id}})},function(e){n.a.default.error("error while launching import for",t.type,t.metadata.id),t.isImporting=!1})}},computed:{importType:function(){return this.type},currentBackend:function(){var t=this;return this.backends.filter(function(e){return e.id===t.currentBackendId})[0]},realQueryTemplate:function(){}},watch:{isImporting:function(t){this.$emit("import-state-changed",t)},importData:{handler:function(t){this.$emit("import-data-changed",t)},deep:!0},enabled:function(t){this.$emit("enabled",this.importData,t)},queryTemplate:function(t,e){e===this.customQueryTemplate&&(this.customQueryTemplate=t)}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e,a){function i(t){a(494),a(495)}var s=a(1)(a(496),a(497),i,"data-v-1ac78978",null);t.exports=s.exports},function(t,e){},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(11),r=a(32),o=a(3),l=a(68),c=a.n(l),u=a(4),d=a.n(u);n.a.filter("highlight",function(t,e){return e.forEach(function(e){var a=new RegExp("("+e+")","gi");t=t.replace(a,"<span class='highlight'>$1</span>")}),t}),e.default=n.a.extend({mixins:[c.a],props:{releaseMetadata:{type:Object,required:!0}},data:function(){return{isLoading:!1,results:[],currentResultIndex:0,importedUrl:"",warnings:["live","full","cover","mix"],customQuery:"",time:r.a}},created:function(){this.enabled&&this.search()},mounted:function(){d()(".ui.checkbox").checkbox()},methods:{search:function(){var t=this;this.isLoading=!0;var e="providers/"+this.currentBackendId+"/search/";s.a.get(e,{params:{query:this.query}}).then(function(e){o.a.default.debug("searching",t.query,"on",t.currentBackendId),t.results=e.data,t.isLoading=!1},function(e){o.a.default.error("error while searching",t.query,"on",t.currentBackendId),t.isLoading=!1})}},computed:{type:function(){return"track"},currentResult:function(){if(this.results)return this.results[this.currentResultIndex]},importData:function(){return{count:1,mbid:this.metadata.recording.id,source:this.importedUrl}},query:{get:function(){if(this.customQuery.length>0)return this.customQuery;var t=[["artist",this.releaseMetadata["artist-credit"][0].artist.name],["album",this.releaseMetadata.title],["title",this.metadata.recording.title]],e=this.customQueryTemplate;return t.forEach(function(t){e=e.split("$"+t[0]).join(t[1])}),e},set:function(t){this.customQuery=t}}},watch:{query:function(){this.search()},currentResult:function(t){t&&(this.importedUrl=t.url)},importedUrl:function(t){this.$emit("url-changed",this.importData,this.importedUrl)},enabled:function(t){t&&0===this.results.length&&this.search()}}})},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui stackable grid"},[a("div",{staticClass:"three wide column"},[a("h5",{staticClass:"ui header"},[t._v("\n      "+t._s(t.metadata.position)+". "+t._s(t.metadata.recording.title)+"\n      "),a("div",{staticClass:"sub header"},[t._v("\n        "+t._s(t.time.parse(parseInt(t.metadata.length)/1e3))+"\n      ")])]),t._v(" "),a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enabled,expression:"enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.enabled)?t._i(t.enabled,null)>-1:t.enabled},on:{change:function(e){var a=t.enabled,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&(t.enabled=a.concat([null])):n>-1&&(t.enabled=a.slice(0,n).concat(a.slice(n+1)))}else t.enabled=s}}}),t._v(" "),a("i18next",{attrs:{tag:"label",path:"Import this track"}})],1)]),t._v(" "),t.enabled?a("div",{staticClass:"three wide column"},[a("form",{staticClass:"ui mini form",on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Source"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentBackendId,expression:"currentBackendId"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.currentBackendId=e.target.multiple?a:a[0]}}},t._l(t.backends,function(e){return a("option",{domProps:{value:e.id}},[t._v("\n            "+t._s(e.label)+"\n          ")])}))],1)]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),t.currentResult?[a("button",{staticClass:"ui basic tiny icon button",attrs:{disabled:0===t.currentResultIndex},on:{click:function(e){t.currentResultIndex-=1}}},[a("i",{staticClass:"left arrow icon"})]),t._v(" "),a("i18next",{attrs:{path:"Result {%0%}/{%1%}"}},[t._v("\n        "+t._s(t.currentResultIndex+1)+"\n        "+t._s(t.results.length)+"\n      ")]),t._v(" "),a("button",{staticClass:"ui basic tiny icon button",attrs:{disabled:t.currentResultIndex+1===t.results.length},on:{click:function(e){t.currentResultIndex+=1}}},[a("i",{staticClass:"right arrow icon"})])]:t._e()],2):t._e(),t._v(" "),t.enabled?a("div",{staticClass:"four wide column"},[a("form",{staticClass:"ui mini form",on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Search query"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"text"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),a("i18next",{attrs:{tag:"label",path:"Imported URL"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.importedUrl,expression:"importedUrl"}],attrs:{type:"text"},domProps:{value:t.importedUrl},on:{input:function(e){e.target.composing||(t.importedUrl=e.target.value)}}})],1)])]):t._e(),t._v(" "),t.enabled?a("div",{staticClass:"six wide column"},[t.isLoading?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),!t.isLoading&&t.currentResult?a("div",{staticClass:"ui items"},[a("div",{staticClass:"item"},[a("div",{staticClass:"ui small image"},[a("img",{attrs:{src:t.currentResult.cover}})]),t._v(" "),a("div",{staticClass:"content"},[a("a",{staticClass:"description",attrs:{href:t.currentResult.url,target:"_blank"},domProps:{innerHTML:t._s(t.$options.filters.highlight(t.currentResult.title,t.warnings))}}),t._v(" "),t.currentResult.channelTitle?a("div",{staticClass:"meta"},[t._v("\n            "+t._s(t.currentResult.channelTitle)+"\n          ")]):t._e()])])]):t._e()]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticClass:"ui dividing block header"},[a("i18next",{attrs:{path:"Album {%0%} ({%1%} tracks) by {%2%}"}},[a("a",{attrs:{href:t.getMusicbrainzUrl("release",t.metadata.id),target:"_blank",title:"View on MusicBrainz"}},[t._v(t._s(t.metadata.title))]),t._v("\n      ("+t._s(t.tracks.length)+" tracks)\n      "),a("a",{attrs:{href:t.getMusicbrainzUrl("artist",t.metadata["artist-credit"][0].artist.id),target:"_blank",title:"View on MusicBrainz"}},[t._v(t._s(t.metadata["artist-credit-phrase"]))])]),t._v(" "),a("div",{staticClass:"ui divider"}),t._v(" "),a("div",{staticClass:"sub header"},[a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enabled,expression:"enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.enabled)?t._i(t.enabled,null)>-1:t.enabled},on:{change:function(e){var a=t.enabled,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&(t.enabled=a.concat([null])):n>-1&&(t.enabled=a.slice(0,n).concat(a.slice(n+1)))}else t.enabled=s}}}),t._v(" "),a("i18next",{attrs:{tag:"label",path:"Import this release"}})],1)])],1),t._v(" "),t._l(t.tracks,function(e){return t.enabled?[a("track-import",{key:e.recording.id,attrs:{metadata:e,"release-metadata":t.metadata,backends:t.backends,"default-backend-id":t.defaultBackendId,"query-template":t.customQueryTemplate},on:{"import-data-changed":t.recordTrackData,enabled:t.recordTrackEnabled}}),t._v(" "),a("div",{staticClass:"ui divider"})]:t._e()})],2)},staticRenderFns:[]}},function(t,e,a){function i(t){a(500)}var s=a(1)(a(501),a(519),i,"data-v-b862e14e",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(3),r=a(502),o=a.n(r);e.default={components:{FileUploadWidget:o.a},data:function(){return{files:[],uploadUrl:"/api/v1/import-jobs/",batch:null}},mounted:function(){this.createBatch()},methods:{inputFilter:function(t,e,a){if(t&&!e){["ogg","mp3","flac"].indexOf(t.name.split(".").pop())<0&&a()}},inputFile:function(t,e){t&&!e&&(this.batch||this.createBatch())},createBatch:function(){var t=this;return s.a.post("import-batches/",{}).then(function(e){t.batch=e.data},function(t){n.a.default.error("error while launching creating batch")})},startUpload:function(){this.$emit("batch-created",this.batch),this.$refs.upload.active=!0}},computed:{batchId:function(){return this.batch?this.batch.id:null},uploadData:function(){return{batch:this.batchId,source:"file://"}}}}},function(t,e,a){function i(t){a(503)}var s=a(1)(a(504),null,i,"data-v-4132a206",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(99),s=a.n(i),n=a(505),r=a.n(n),o=a(518),l=a.n(o);e.default={extends:l.a,methods:{uploadHtml5:function(t){var e=new window.FormData,a=void 0;for(var i in t.data)a=t.data[i],a&&"object"===(void 0===a?"undefined":r()(a))&&"function"!=typeof a.toString?a instanceof File?e.append(i,a,a.name):e.append(i,s()(a)):null!==a&&void 0!==a&&e.append(i,a);e.append(this.name,t.file,t.file.filename||t.name);var n=new XMLHttpRequest;return n.open("POST",t.postAction),n.setRequestHeader("Authorization",this.$store.getters["auth/header"]),this.uploadXhr(n,t,e)}}}},,,,,,,,,,,,,,,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.batch?a("div",{staticClass:"ui container"},[a("div",{staticClass:"ui message"},[t._v("\n      "+t._s(t.$t("Ensure your music files are properly tagged before uploading them."))+"\n      "),a("a",{attrs:{href:"http://picard.musicbrainz.org/",target:"_blank"}},[t._v(t._s(t.$t("We recommend using Picard for that purpose.")))])]),t._v(" "),a("file-upload-widget",{ref:"upload",class:["ui","icon","left","floated","button"],attrs:{"post-action":t.uploadUrl,multiple:!0,data:t.uploadData,drop:!0,extensions:"ogg,mp3,flac",accept:"audio/*",name:"audio_file",thread:3},on:{"input-filter":t.inputFilter,"input-file":t.inputFile},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[a("i",{staticClass:"upload icon"}),t._v(" "),a("i18next",{attrs:{path:"Select files to upload..."}})],1),t._v(" "),t.$refs.upload&&t.$refs.upload.active?a("button",{staticClass:"ui right floated icon yellow button",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.$refs.upload.active=!1}}},[a("i",{staticClass:"pause icon",attrs:{"aria-hidden":"true"}}),t._v(" "),a("i18next",{attrs:{path:"Stop Upload"}})],1):a("button",{class:["ui","right","floated","icon",{disabled:0===t.files.length},"button"],on:{click:function(e){e.preventDefault(),t.startUpload()}}},[a("i",{staticClass:"play icon",attrs:{"aria-hidden":"true"}}),t._v(" "),a("i18next",{attrs:{path:"Start Upload"}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"ui hidden clearing divider"}),t._v(" "),t.batch?a("i18next",{attrs:{path:"Once all your files are uploaded, simply head over {%0%} to check the import status."}},[a("router-link",{attrs:{to:{name:"library.import.batches.detail",params:{id:t.batch.id}}}},[a("i18next",{attrs:{path:"import detail page"}})],1)],1):t._e(),t._v(" "),a("table",{staticClass:"ui single line table"},[a("thead",[a("tr",[a("i18next",{attrs:{tag:"th",path:"File name"}}),t._v(" "),a("i18next",{attrs:{tag:"th",path:"Size"}}),t._v(" "),a("i18next",{attrs:{tag:"th",path:"Status"}})],1)]),t._v(" "),a("tbody",t._l(t.files,function(e,i){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.size))]),t._v(" "),a("td",[e.error?a("span",{staticClass:"ui red label"},[t._v("\n            "+t._s(e.error)+"\n          ")]):e.success?a("i18next",{staticClass:"ui green label",attrs:{path:"Success"}}):e.active?a("i18next",{staticClass:"ui yellow label",attrs:{path:"Uploading..."}}):[a("i18next",{staticClass:"ui label",attrs:{path:"Pending"}}),t._v(" "),a("button",{staticClass:"ui tiny basic red icon button",on:{click:function(a){a.preventDefault(),t.$refs.upload.remove(e)}}},[a("i",{staticClass:"delete icon"})])]],2)])}))])],1)},staticRenderFns:[]}},function(t,e,a){var i=a(1)(a(521),a(522),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(11),s=a(2),n=a.n(s),r=a(3),o=a(68),l=a.n(o),c=a(102),u=a.n(c);e.default=i.a.extend({mixins:[l.a],components:{ReleaseImport:u.a},data:function(){return{releaseImportData:[],releaseGroupsData:{},releases:[],releaseTypes:["Album"],availableReleaseTypes:["Album","Live","Compilation","EP","Single","Other"]}},created:function(){this.fetchReleaseGroupsData()},methods:{recordReleaseData:function(t){var e=this.releaseImportData.filter(function(e){return e.releaseId===t.releaseId})[0];e?e.tracks=t.tracks:this.releaseImportData.push({releaseId:t.releaseId,enabled:!0,tracks:t.tracks})},recordReleaseEnabled:function(t,e){var a=this.releaseImportData.filter(function(e){return e.releaseId===t.releaseId})[0];a?a.enabled=e:this.releaseImportData.push({releaseId:t.releaseId,enabled:e,tracks:t.tracks})},fetchReleaseGroupsData:function(){var t=this;this.releaseGroups.forEach(function(e){var a="providers/musicbrainz/releases/browse/"+e.id+"/";return n.a.get(a).then(function(a){r.a.default.info("successfully fetched release group",e.id);var i=a.data["release-list"].filter(function(t){return"Official"===t.status})[0];t.releaseGroupsData[e.id]=i,t.releases=t.computeReleaseData()},function(t){r.a.default.error("error while fetching release group",e.id)})})},computeReleaseData:function(){var t=this,e=[];return this.releaseGroups.forEach(function(a){var i=t.releaseGroupsData[a.id];i&&e.push(i)}),e}},computed:{type:function(){return"artist"},releaseGroups:function(){var t=this;return this.metadata["release-group-list"].filter(function(e){return-1!==t.releaseTypes.indexOf(e.type)}).sort(function(t,e){return t["first-release-date"]<e["first-release-date"]?-1:t["first-release-date"]>e["first-release-date"]?1:0})},importData:function(){var t=this.releaseImportData.filter(function(t){return t.enabled});return{artistId:this.metadata.id,count:t.reduce(function(t,e){return t+e.tracks.length},0),albums:t}}},watch:{releaseTypes:function(t){this.fetchReleaseGroupsData()}}})},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticClass:"ui dividing block header"},[a("a",{attrs:{href:t.getMusicbrainzUrl("artist",t.metadata.id),target:"_blank",title:"View on MusicBrainz"}},[t._v(t._s(t.metadata.name))])]),t._v(" "),a("form",{staticClass:"ui form",on:{submit:function(t){t.preventDefault()}}},[a("h6",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Filter album types"}})],1),t._v(" "),a("div",{staticClass:"inline fields"},[t._l(t.availableReleaseTypes,function(e){return a("div",{staticClass:"field"},[a("div",{staticClass:"ui checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.releaseTypes,expression:"releaseTypes"}],attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.releaseTypes)?t._i(t.releaseTypes,e)>-1:t.releaseTypes},on:{change:function(a){var i=t.releaseTypes,s=a.target,n=!!s.checked;if(Array.isArray(i)){var r=e,o=t._i(i,r);s.checked?o<0&&(t.releaseTypes=i.concat([r])):o>-1&&(t.releaseTypes=i.slice(0,o).concat(i.slice(o+1)))}else t.releaseTypes=n}}}),t._v(" "),a("label",[t._v(t._s(e))])])])}),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Query template"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customQueryTemplate,expression:"customQueryTemplate"}],domProps:{value:t.customQueryTemplate},on:{input:function(e){e.target.composing||(t.customQueryTemplate=e.target.value)}}})],1)],2)]),t._v(" "),t._l(t.releases,function(e){return[a("release-import",{key:e.id,attrs:{metadata:e,backends:t.backends,defaultEnabled:!1,"default-backend-id":t.defaultBackendId,"query-template":t.customQueryTemplate},on:{"import-data-changed":t.recordReleaseData,enabled:t.recordReleaseEnabled}}),t._v(" "),a("div",{staticClass:"ui divider"})]})],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Import Music",expression:"'Import Music'"}]},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui top three attached ordered steps"},[a("a",{class:["step",{active:0===t.currentStep},{completed:t.currentStep>0}],on:{click:function(e){t.currentStep=0}}},[a("div",{staticClass:"content"},[a("i18next",{staticClass:"title",attrs:{tag:"div",path:"Import source"}}),t._v(" "),a("i18next",{staticClass:"description",attrs:{tag:"div",path:"Uploaded files or external source"}})],1)]),t._v(" "),a("a",{class:["step",{active:1===t.currentStep},{completed:t.currentStep>1}],on:{click:function(e){t.currentStep=1}}},[a("div",{staticClass:"content"},[a("i18next",{staticClass:"title",attrs:{tag:"div",path:"Metadata"}}),t._v(" "),a("i18next",{staticClass:"description",attrs:{tag:"div",path:"Grab corresponding metadata"}})],1)]),t._v(" "),a("a",{class:["step",{active:2===t.currentStep},{completed:t.currentStep>2}],on:{click:function(e){t.currentStep=2}}},[a("div",{staticClass:"content"},[a("i18next",{staticClass:"title",attrs:{tag:"div",path:"Music"}}),t._v(" "),a("i18next",{staticClass:"description",attrs:{tag:"div",path:"Select relevant sources or files for import"}})],1)])]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("div",{staticClass:"ui centered buttons"},[a("button",{staticClass:"ui icon button",attrs:{disabled:0===t.currentStep},on:{click:function(e){t.currentStep-=1}}},[a("i",{staticClass:"left arrow icon"}),a("i18next",{attrs:{path:"Previous step"}})],1),t._v(" "),t.currentStep<2?a("button",{staticClass:"ui icon button",on:{click:function(e){t.nextStep()}}},[a("i18next",{attrs:{path:"Next step"}}),a("i",{staticClass:"right arrow icon"})],1):t._e(),t._v(" "),2===t.currentStep&&"upload"!=t.currentSource?a("button",{class:["ui","positive","icon",{loading:t.isImporting},"button"],attrs:{disabled:t.isImporting||0===t.importData.count},on:{click:function(e){t.$refs.import.launchImport()}}},[a("i18next",{attrs:{path:"Import {%0%} tracks"}},[t._v(t._s(t.importData.count))]),t._v(" "),a("i",{staticClass:"check icon"})],1):2===t.currentStep&&"upload"===t.currentSource?a("button",{class:["ui","positive","icon",{disabled:!t.importBatch},"button"],attrs:{disabled:!t.importBatch},on:{click:function(e){t.$router.push({name:"library.import.batches.detail",params:{id:t.importBatch.id}})}}},[t._v("\n          "+t._s(t.$t("Finish import"))+"\n          "),a("i",{staticClass:"check icon"})]):t._e()]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("div",{staticClass:"ui attached segment"},[0===t.currentStep?[a("i18next",{attrs:{tag:"p",path:"First, choose where you want to import the music from"}}),t._v(" "),a("form",{staticClass:"ui form"},[a("div",{staticClass:"field"},[a("div",{staticClass:"ui radio checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentSource,expression:"currentSource"}],attrs:{type:"radio",id:"external",value:"external"},domProps:{checked:t._q(t.currentSource,"external")},on:{change:function(e){t.currentSource="external"}}}),t._v(" "),a("label",{attrs:{for:"external"}},[a("i18next",{attrs:{path:"External source. Supported backends"}}),t._v(" "),t._l(t.backends,function(e){return a("div",{staticClass:"ui basic label"},[e.icon?a("i",{class:[e.icon,"icon"]}):t._e(),t._v("\n                  "+t._s(e.label)+"\n                ")])})],2)])]),t._v(" "),a("div",{staticClass:"field"},[a("div",{staticClass:"ui radio checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentSource,expression:"currentSource"}],attrs:{type:"radio",id:"upload",value:"upload"},domProps:{checked:t._q(t.currentSource,"upload")},on:{change:function(e){t.currentSource="upload"}}}),t._v(" "),a("i18next",{attrs:{tag:"label",for:"upload",path:"File upload"}})],1)])])]:t._e(),t._v(" "),1===t.currentStep?a("div",{staticClass:"ui stackable two column grid"},[a("div",{staticClass:"column"},[a("form",{staticClass:"ui form",on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Search an entity you want to import:"}}),t._v(" "),a("metadata-search",{attrs:{"mb-type":t.mbType,"mb-id":t.mbId},on:{"id-changed":t.updateId,"type-changed":t.updateType}})],1)]),t._v(" "),a("i18next",{staticClass:"ui horizontal divider",attrs:{tag:"div",path:"Or"}}),t._v(" "),a("form",{staticClass:"ui form",on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Input a MusicBrainz ID manually:"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentId,expression:"currentId"}],attrs:{type:"text"},domProps:{value:t.currentId},on:{input:function(e){e.target.composing||(t.currentId=e.target.value)}}})],1)]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),t.currentType&&t.currentId?[a("h4",{staticClass:"ui header"},[a("i18next",{attrs:{path:"You will import:"}})],1),t._v(" "),a(t.metadataComponent,{tag:"component",attrs:{mbId:t.currentId},on:{"metadata-changed":this.updateMetadata}})]:t._e(),t._v(" "),a("i18next",{attrs:{tag:"p",path:"You can also skip this step and enter metadata manually."}})],2),t._v(" "),a("div",{staticClass:"column"},[a("h5",{staticClass:"ui header"},[t._v("What is metadata?")]),t._v(" "),a("i18next",{attrs:{tag:"p",path:"Metadata is the data related to the music you want to import. This includes all the information about the artists, albums and tracks. In order to have a high quality library, it is recommended to grab data from the {%0%} project, which you can think about as the Wikipedia of music."}},[a("a",{attrs:{href:"http://musicbrainz.org/",target:"_blank"}},[t._v("MusicBrainz")])])],1)]):t._e(),t._v(" "),2===t.currentStep?a("div",["upload"==t.currentSource?a("file-upload",{ref:"import",on:{"batch-created":t.updateBatch}}):t._e(),t._v(" "),"external"==t.currentSource?a(t.importComponent,{ref:"import",tag:"component",attrs:{request:t.currentRequest,metadata:t.metadata,backends:t.backends,"default-backend-id":t.backends[0].id},on:{"import-data-changed":t.updateImportData,"import-state-changed":t.updateImportState}}):t._e()],1):t._e()],2)]),t._v(" "),t.currentRequest?a("div",{staticClass:"ui vertical stripe segment"},[a("h3",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Music request"}})],1),t._v(" "),a("i18next",{attrs:{tag:"p",path:"This import will be associated with the music request below. After the import is finished, the request will be marked as fulfilled."}}),t._v(" "),a("request-card",{attrs:{request:t.currentRequest,"import-action":!1}})],1):t._e()])},staticRenderFns:[]}},function(t,e,a){function i(t){a(525)}var s=a(1)(a(526),a(527),i,"data-v-d7768414",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(5),r=a.n(n),o=a(4),l=a.n(o),c=a(3),u=a(26),d=a.n(u),v=a(31),p=a.n(v),f=a(98),h=a.n(f),m=a(8),_=a.n(m);e.default={mixins:[d.a,p.a],props:{defaultQuery:{type:String,required:!1,default:""}},components:{RadioCard:h.a,Pagination:_.a},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{isLoading:!0,result:null,page:parseInt(this.defaultPage),query:this.defaultQuery,paginateBy:parseInt(this.defaultPaginateBy||12),orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","Creation date"],["name","Name"]]}},created:function(){this.fetchData()},mounted:function(){l()(".ui.dropdown").dropdown()},methods:{updateQueryString:r.a.debounce(function(){this.$router.replace({query:{query:this.query,page:this.page,paginateBy:this.paginateBy,ordering:this.getOrderingAsString()}})},500),fetchData:r.a.debounce(function(){var t=this;this.isLoading=!0;var e={page:this.page,page_size:this.paginateBy,name__icontains:this.query,ordering:this.getOrderingAsString()};c.a.default.debug("Fetching radios"),s.a.get("radios/radios/",{params:e}).then(function(e){t.result=e.data,t.isLoading=!1})},500),selectPage:function(t){this.page=t}},watch:{page:function(){this.updateQueryString(),this.fetchData()},paginateBy:function(){this.updateQueryString(),this.fetchData()},ordering:function(){this.updateQueryString(),this.fetchData()},orderingDirection:function(){this.updateQueryString(),this.fetchData()},query:function(){this.updateQueryString(),this.fetchData()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Radios",expression:"'Radios'"}]},[a("div",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Browsing radios"}})],1),t._v(" "),a("router-link",{staticClass:"ui green basic button",attrs:{to:"/library/radios/build",exact:""}},[a("i18next",{attrs:{path:"Create your own radio"}})],1),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("div",{class:["ui",{loading:t.isLoading},"form"]},[a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Search"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"text",placeholder:"Enter a radio name..."},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Ordering"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,function(e){return a("option",{domProps:{value:e[0]}},[t._v("\n              "+t._s(e[1])+"\n            ")])}))],1),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Ordering direction"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("i18next",{attrs:{path:"Ascending"}})],1),t._v(" "),a("option",{attrs:{value:"-"}},[a("i18next",{attrs:{path:"Descending"}})],1)])],1),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Results per page"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.paginateBy,expression:"paginateBy"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.paginateBy=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:parseInt(12)}},[t._v("12")]),t._v(" "),a("option",{domProps:{value:parseInt(25)}},[t._v("25")]),t._v(" "),a("option",{domProps:{value:parseInt(50)}},[t._v("50")])])],1)])]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),t.result?a("div",{directives:[{name:"masonry",rawName:"v-masonry"}],staticClass:"ui stackable three column doubling grid",attrs:{"transition-duration":"0","item-selector":".column","percent-position":"true",stagger:"0"}},t._l(t.result.results,function(e){return t.result.results.length>0?a("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:e.id,staticClass:"column"},[a("radio-card",{staticClass:"fluid",attrs:{type:"custom","custom-radio":e}})],1):t._e()})):t._e(),t._v(" "),a("div",{staticClass:"ui center aligned basic segment"},[t.result&&t.result.results.length>0?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1)],1)])},staticRenderFns:[]}},function(t,e,a){var i=a(1)(a(529),a(532),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(4),r=a.n(n),o=a(5),l=a.n(o),c=a(104),u=a.n(c),d=a(20),v=a.n(d),p=a(19),f=a.n(p);e.default={props:{id:{required:!1}},components:{BuilderFilter:u.a,TrackTable:v.a,RadioButton:f.a},data:function(){return{availableFilters:[],currentFilterType:null,filters:[],checkResult:null,radioName:"",isPublic:!0}},created:function(){var t=this;this.fetchFilters().then(function(){t.id&&t.fetch()})},mounted:function(){r()(".ui.dropdown").dropdown()},methods:{fetchFilters:function(){var t=this;return s.a.get("radios/radios/filters/").then(function(e){t.availableFilters=e.data})},add:function(){this.filters.push({config:{},filter:this.currentFilter,hash:+new Date}),this.fetchCandidates()},updateConfig:function(t,e,a){this.filters[t].config[e]=a,this.fetchCandidates()},deleteFilter:function(t){this.filters.splice(t,1),this.fetchCandidates()},fetch:function(){var t=this,e=this,a="radios/radios/"+this.id+"/";s.a.get(a).then(function(a){e.filters=a.data.config.map(function(e){return{config:e,filter:t.availableFilters.filter(function(t){return t.type===e.type})[0],hash:+new Date}}),e.radioName=a.data.name,e.isPublic=a.data.is_public})},fetchCandidates:function(){var t=this,e=this.filters.map(function(t){var e=l.a.clone(t.config);return e.type=t.filter.type,e});e={filters:[{type:"group",filters:e}]},s.a.post("radios/radios/validate/",e).then(function(e){t.checkResult=e.data.filters[0]})},save:function(){var t=this,e=this.filters.map(function(t){var e=l.a.clone(t.config);return e.type=t.filter.type,e});if(e={name:this.radioName,is_public:this.isPublic,config:e},this.id){var a="radios/radios/"+this.id+"/";s.a.put(a,e).then(function(t){})}else{s.a.post("radios/radios/",e).then(function(e){t.$router.push({name:"library.radios.detail",params:{id:e.data.id}})})}}},computed:{canSave:function(){return this.radioName.length>0&&0===this.checkErrors.length},checkErrors:function(){return this.checkResult?this.checkResult.errors:[]},currentFilter:function(){var t=this;return this.availableFilters.filter(function(e){return e.type===t.currentFilterType})[0]}},watch:{filters:{handler:function(){this.fetchCandidates()},deep:!0}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(36),r=a(4),o=a.n(r),l=a(5),c=a.n(l),u=a(49),d=a.n(u),v=a(20),p=a.n(v),f=a(104),h=a.n(f);e.default={components:{BuilderFilter:h.a,TrackTable:p.a,Modal:d.a},props:{filter:{type:Object},config:{type:Object},index:{type:Number}},data:function(){return{checkResult:null,showCandidadesModal:!1,exclude:n.a.not}},mounted:function(){var t=this;this.filter.fields.forEach(function(e){var a=[".dropdown"],i={onChange:function(a,i,s){a=o()(this).dropdown("get value").split(","),"list"===e.type&&"number"===e.subtype&&(a=a.map(function(t){return parseInt(t)})),t.value=a,t.$emit("update-config",t.index,e.name,a),t.fetchCandidates()}};"list"===e.type&&a.push(".multiple"),e.autocomplete&&(a.push(".autocomplete"),i.fields=e.autocomplete_fields,i.minCharacters=1,i.apiSettings={url:e.autocomplete+"?"+e.autocomplete_qs,beforeXHR:function(e){return e.setRequestHeader("Authorization",t.$store.getters["auth/header"]),e},onResponse:function(t){return i.fields.remoteValues?t:{results:t.results}}}),o()(t.$el).find(a.join("")).dropdown(i)})},methods:{fetchCandidates:function(){var t=this,e=c.a.clone(this.config);e.type=this.filter.type,e={filters:[e]},s.a.post("radios/radios/validate/",e).then(function(e){t.checkResult=e.data.filters[0]})}},watch:{exclude:function(){this.fetchCandidates()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v(t._s(t.filter.label))]),t._v(" "),a("td",[a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.exclude,expression:"exclude"}],attrs:{name:"public",type:"checkbox"},domProps:{checked:Array.isArray(t.exclude)?t._i(t.exclude,null)>-1:t.exclude},on:{change:[function(e){var a=t.exclude,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&(t.exclude=a.concat([null])):n>-1&&(t.exclude=a.slice(0,n).concat(a.slice(n+1)))}else t.exclude=s},function(e){t.$emit("update-config",t.index,"not",t.exclude)}]}}),t._v(" "),a("label")])]),t._v(" "),a("td",t._l(t.filter.fields,function(e,i){return a("div",{key:(e.name,i),ref:e.name,refInFor:!0,staticClass:"ui field"},[a("div",{class:["ui","search","selection","dropdown",{autocomplete:e.autocomplete},{multiple:"list"===e.type}]},[a("i",{staticClass:"dropdown icon"}),t._v(" "),a("div",{staticClass:"default text"},[t._v(t._s(e.placeholder))]),t._v(" "),"list"===e.type&&t.config[e.name]?a("input",{attrs:{type:"hidden"},domProps:{value:t.config[e.name].join(",")}}):t._e(),t._v(" "),t.config[e.name]?a("div",{staticClass:"ui menu"},t._l(t.config[e.name],function(i,s){return"list"===e.type?a("div",{staticClass:"ui item",attrs:{"data-value":i}},[t.config.names?[t._v("\n                  "+t._s(t.config.names[s])+"\n                ")]:[t._v(t._s(i))]],2):t._e()})):t._e()])])})),t._v(" "),a("td",[t.checkResult?a("span",{class:["ui",{green:t.checkResult.candidates.count>10},"label"],on:{click:function(e){t.showCandidadesModal=!t.showCandidadesModal}}},[t._v("\n      "+t._s(t.checkResult.candidates.count)+" tracks matching filter\n    ")]):t._e(),t._v(" "),t.checkResult?a("modal",{attrs:{show:t.showCandidadesModal},on:{"update:show":function(e){t.showCandidadesModal=e}}},[a("div",{staticClass:"header"},[a("i18next",{attrs:{path:"Track matching filter"}})],1),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[t.checkResult.candidates.count>0?a("track-table",{attrs:{tracks:t.checkResult.candidates.sample}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui black deny button"},[a("i18next",{attrs:{path:"Cancel"}})],1)])]):t._e()],1),t._v(" "),a("td",[a("button",{staticClass:"ui basic red button",on:{click:function(e){t.$emit("delete",t.index)}}},[a("i18next",{attrs:{path:"Remove"}})],1)])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Radio Builder",expression:"'Radio Builder'"}],staticClass:"ui vertical stripe segment"},[a("div",[a("div",[a("h2",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Builder"}})],1),t._v(" "),a("i18next",{attrs:{tag:"p",path:"You can use this interface to build your own custom radio, which will play tracks according to your criteria"}}),t._v(" "),a("div",{staticClass:"ui form"},[a("div",{staticClass:"inline fields"},[a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",for:"name",path:"Radio name"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.radioName,expression:"radioName"}],attrs:{id:"name",type:"text",placeholder:"My awesome radio"},domProps:{value:t.radioName},on:{input:function(e){e.target.composing||(t.radioName=e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isPublic,expression:"isPublic"}],attrs:{id:"public",type:"checkbox"},domProps:{checked:Array.isArray(t.isPublic)?t._i(t.isPublic,null)>-1:t.isPublic},on:{change:function(e){var a=t.isPublic,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&(t.isPublic=a.concat([null])):n>-1&&(t.isPublic=a.slice(0,n).concat(a.slice(n+1)))}else t.isPublic=s}}}),t._v(" "),a("i18next",{attrs:{tag:"label",for:"public",path:"Display publicly"}})],1),t._v(" "),a("button",{staticClass:"ui green button",attrs:{disabled:!t.canSave},on:{click:t.save}},[a("i18next",{attrs:{path:"Save"}})],1),t._v(" "),t.id?a("radio-button",{attrs:{type:"custom","custom-radio-id":t.id}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"ui form"},[a("p",[a("i18next",{attrs:{path:"Add filters to customize your radio"}})],1),t._v(" "),a("div",{staticClass:"inline field"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentFilterType,expression:"currentFilterType"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.currentFilterType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[a("i18next",{attrs:{path:"Select a filter"}})],1),t._v(" "),t._l(t.availableFilters,function(e){return a("option",{domProps:{value:e.type}},[t._v(t._s(e.label))])})],2),t._v(" "),a("button",{staticClass:"ui button",attrs:{disabled:!t.currentFilterType},on:{click:t.add}},[a("i18next",{attrs:{path:"Add filter"}})],1)]),t._v(" "),t.currentFilter?a("p",[t._v("\n          "+t._s(t.currentFilter.help_text)+"\n        ")]):t._e()]),t._v(" "),a("table",{staticClass:"ui table"},[a("thead",[a("tr",[a("i18next",{staticClass:"two wide",attrs:{tag:"th",path:"Filter name"}}),t._v(" "),a("i18next",{staticClass:"one wide",attrs:{tag:"th",path:"Exclude"}}),t._v(" "),a("i18next",{staticClass:"six wide",attrs:{tag:"th",path:"Config"}}),t._v(" "),a("i18next",{staticClass:"five wide",attrs:{tag:"th",path:"Candidates"}}),t._v(" "),a("i18next",{staticClass:"two wide",attrs:{tag:"th",path:"Actions"}})],1)]),t._v(" "),a("tbody",t._l(t.filters,function(e,i){return a("builder-filter",{key:e.hash,attrs:{index:i,config:e.config,filter:e.filter},on:{"update-config":t.updateConfig,delete:t.deleteFilter}})}))]),t._v(" "),t.checkResult?[a("i18next",{staticClass:"ui header",attrs:{tag:"h3",path:"{%0%} tracks matching combined filters"}},[t._v("\n          "+t._s(t.checkResult.candidates.count)+"\n        ")]),t._v(" "),t.checkResult.candidates.sample?a("track-table",{attrs:{tracks:t.checkResult.candidates.sample}}):t._e()]:t._e()],2)])])},staticRenderFns:[]}},function(t,e,a){var i=a(1)(a(534),a(535),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(20),r=a.n(n),o=a(19),l=a.n(o),c=a(8),u=a.n(c);e.default={props:{id:{required:!0}},components:{TrackTable:r.a,RadioButton:l.a,Pagination:u.a},data:function(){return{isLoading:!1,radio:null,tracks:[],totalTracks:0,page:1}},created:function(){this.fetch()},methods:{selectPage:function(t){this.page=t},fetch:function(){var t=this,e=this;e.isLoading=!0;var a="radios/radios/"+this.id+"/";s.a.get(a).then(function(i){e.radio=i.data,s.a.get(a+"tracks",{params:{page:t.page}}).then(function(e){t.totalTracks=e.data.count,t.tracks=e.data.results}).then(function(){e.isLoading=!1})})},deleteRadio:function(){var t=this,e="radios/radios/"+this.id+"/";s.a.delete(e).then(function(e){t.$router.push({path:"/library"})})}},watch:{page:function(){this.fetch()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?a("div",{directives:[{name:"title",rawName:"v-title",value:"Radio",expression:"'Radio'"}],staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),!t.isLoading&&t.radio?a("div",{directives:[{name:"title",rawName:"v-title",value:t.radio.name,expression:"radio.name"}],staticClass:"ui head vertical center aligned stripe segment"},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui center aligned icon header"},[a("i",{staticClass:"circular inverted feed blue icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n          "+t._s(t.radio.name)+"\n          "),a("div",{staticClass:"sub header"},[t._v("\n            Radio containing "+t._s(t.totalTracks)+" tracks,\n            by "),a("username",{attrs:{username:t.radio.user.username}})],1)])]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("radio-button",{attrs:{type:"custom","custom-radio-id":t.radio.id}}),t._v(" "),a("router-link",{staticClass:"ui icon button",attrs:{to:{name:"library.radios.edit",params:{id:t.radio.id}},exact:""}},[a("i",{staticClass:"pencil icon"}),t._v("\n        Edit\n      ")]),t._v(" "),a("dangerous-button",{staticClass:"labeled icon",attrs:{action:t.deleteRadio}},[a("i",{staticClass:"trash icon"}),t._v(" Delete\n        "),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[t._v('Do you want to delete the radio "'+t._s(t.radio.name)+'"?')]),t._v(" "),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[t._v("This will completely delete this radio and cannot be undone.")]),t._v(" "),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[t._v("Delete radio")])])],1)]):t._e(),t._v(" "),a("div",{staticClass:"ui vertical stripe segment"},[a("h2",[t._v("Tracks")]),t._v(" "),a("track-table",{attrs:{tracks:t.tracks}}),t._v(" "),a("div",{staticClass:"ui center aligned basic segment"},[t.totalTracks>25?a("pagination",{attrs:{current:t.page,"paginate-by":25,total:t.totalTracks},on:{"page-changed":t.selectPage}}):t._e()],1)],1)])},staticRenderFns:[]}},function(t,e,a){function i(t){a(537)}var s=a(1)(a(538),a(539),i,"data-v-1ee2106c",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(3),r=a(8),o=a.n(r);e.default={components:{Pagination:o.a},data:function(){return{result:null,isLoading:!1,filters:{status:null,source:null,search:"",paginateBy:25,page:1}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t={page_size:this.filters.paginateBy,page:this.filters.page,q:this.filters.search};this.filters.status&&(t.status=this.filters.status),this.filters.source&&(t.source=this.filters.source);var e=this;this.isLoading=!0,n.a.default.time("Loading import batches"),s.a.get("import-batches/",{params:t}).then(function(t){e.result=t.data,n.a.default.timeEnd("Loading import batches"),e.isLoading=!1})},selectPage:function(t){this.filters.page=t}},watch:{filters:{handler:function(){this.fetchData()},deep:!0}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Import Batches",expression:"'Import Batches'"}]},[a("div",{staticClass:"ui vertical stripe segment"},[t.isLoading?a("div",{class:["ui","centered","active","inline","loader"]}):t._e(),t._v(" "),a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui field"},[a("label",[t._v(t._s(t.$t("Search")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.search,expression:"filters.search"}],attrs:{type:"text",placeholder:"Search by submitter, source..."},domProps:{value:t.filters.search},on:{input:function(e){e.target.composing||t.$set(t.filters,"search",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"ui field"},[a("label",[t._v(t._s(t.$t("Status")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.status,expression:"filters.status"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.filters,"status",e.target.multiple?a:a[0])}}},[a("option",{domProps:{value:null}},[t._v(t._s(t.$t("Any")))]),t._v(" "),a("option",{domProps:{value:"pending"}},[t._v(t._s(t.$t("Pending")))]),t._v(" "),a("option",{domProps:{value:"errored"}},[t._v(t._s(t.$t("Errored")))]),t._v(" "),a("option",{domProps:{value:"finished"}},[t._v(t._s(t.$t("Success")))])])]),t._v(" "),a("div",{staticClass:"ui field"},[a("label",[t._v(t._s(t.$t("Import source")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.source,expression:"filters.source"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.filters,"source",e.target.multiple?a:a[0])}}},[a("option",{domProps:{value:null}},[t._v(t._s(t.$t("Any")))]),t._v(" "),a("option",{domProps:{value:"shell"}},[t._v(t._s(t.$t("CLI")))]),t._v(" "),a("option",{domProps:{value:"api"}},[t._v(t._s(t.$t("API")))]),t._v(" "),a("option",{domProps:{value:"federation"}},[t._v(t._s(t.$t("Federation")))])])])])]),t._v(" "),a("div",{staticClass:"ui hidden clearing divider"}),t._v(" "),t.result&&t.result.results.length>0?a("table",{staticClass:"ui unstackable table"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("ID")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Launch date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Jobs")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Status")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Source")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Submitted by")))])])]),t._v(" "),a("tbody",t._l(t.result.results,function(e){return a("tr",[a("td",[t._v(t._s(e.id))]),a("td",[a("router-link",{attrs:{to:{name:"library.import.batches.detail",params:{id:e.id}}}},[a("human-date",{attrs:{date:e.creation_date}})],1)],1),t._v(" "),a("td",[t._v(t._s(e.job_count))]),t._v(" "),a("td",[a("span",{class:["ui",{yellow:"pending"===e.status},{red:"errored"===e.status},{green:"finished"===e.status},"label"]},[t._v(t._s(e.status)+"\n            ")])]),t._v(" "),a("td",[t._v(t._s(e.source))]),t._v(" "),a("td",[e.submitted_by?[t._v(t._s(e.submitted_by.username))]:t._e()],2)])})),t._v(" "),a("tfoot",{staticClass:"full-width"},[a("tr",[a("th",[t.result&&t.result.results.length>0?a("pagination",{attrs:{compact:!0,current:t.filters.page,"paginate-by":t.filters.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1),t._v(" "),t.result&&t.result.results.length>0?a("th",[t._v("\n            "+t._s(t.$t("Showing results {%start%}-{%end%} on {%total%}",{start:(t.filters.page-1)*t.filters.paginateBy+1,end:(t.filters.page-1)*t.filters.paginateBy+t.result.results.length,total:t.result.count}))+"\n          ")]):t._e(),a("th"),a("th"),t._v(" "),a("th"),t._v(" "),a("th")])])]):t._e()])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(541)}var s=a(1)(a(542),a(543),i,"data-v-4be39dc2",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(5),s=a.n(i),n=a(2),r=a.n(n),o=a(3),l=a(8),c=a.n(l);e.default={props:["id"],components:{Pagination:c.a},data:function(){return{isLoading:!0,batch:null,stats:null,jobResult:null,timeout:null,jobFilters:{status:null,source:null,search:"",paginateBy:25,page:1}}},created:function(){var t=this;this.fetchData().then(function(){t.fetchJobs(),t.fetchStats()})},destroyed:function(){this.timeout&&clearTimeout(this.timeout)},methods:{fetchData:function(){var t=this;this.isLoading=!0;var e="import-batches/"+this.id+"/";return o.a.default.debug('Fetching batch "'+this.id+'"'),r.a.get(e).then(function(e){t.batch=e.data,t.isLoading=!1})},fetchStats:function(){var t=this;r.a.get("import-jobs/stats/",{params:{batch:t.id}}).then(function(e){var a=t.stats;t.stats=e.data,t.isLoading=!1,s.a.isEqual(a,t.stats)||(t.fetchJobs(),t.fetchData()),t.stats.pending>0&&(t.timeout=setTimeout(t.fetchStats,5e3))})},rerun:function(t){var e=t.jobs,a=t.batches,i={jobs:e,batches:a},s=this;r.a.post("import-jobs/run/",i).then(function(t){s.fetchStats()})},fetchJobs:function(){var t={batch:this.id,page_size:this.jobFilters.paginateBy,page:this.jobFilters.page,q:this.jobFilters.search};this.jobFilters.status&&(t.status=this.jobFilters.status),this.jobFilters.source&&(t.source=this.jobFilters.source);var e=this;r.a.get("import-jobs/",{params:t}).then(function(t){e.jobResult=t.data})},selectPage:function(t){this.jobFilters.page=t}},watch:{id:function(){this.fetchData()},jobFilters:{handler:function(){this.fetchJobs()},deep:!0}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Import Batch #"+t.id,expression:"'Import Batch #' + id"}]},[t.isLoading&&!t.batch?a("div",{staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),t.batch?a("div",{staticClass:"ui vertical stripe segment"},[a("table",{staticClass:"ui very basic table"},[a("tbody",[a("tr",[a("td",[a("strong",[t._v(t._s(t.$t("Import batch")))])]),t._v(" "),a("td",[t._v("\n            #"+t._s(t.batch.id)+"\n          ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v(t._s(t.$t("Launch date")))])]),t._v(" "),a("td",[a("human-date",{attrs:{date:t.batch.creation_date}})],1)]),t._v(" "),t.batch.user?a("tr",[a("td",[a("strong",[t._v(t._s(t.$t("Submitted by")))])]),t._v(" "),a("td",[a("username",{attrs:{username:t.batch.user.username}})],1)]):t._e(),t._v(" "),t.stats?a("tr",[a("td",[a("strong",[t._v(t._s(t.$t("Pending")))])]),t._v(" "),a("td",[t._v(t._s(t.stats.pending))])]):t._e(),t._v(" "),t.stats?a("tr",[a("td",[a("strong",[t._v(t._s(t.$t("Skipped")))])]),t._v(" "),a("td",[t._v(t._s(t.stats.skipped))])]):t._e(),t._v(" "),t.stats?a("tr",[a("td",[a("strong",[t._v(t._s(t.$t("Errored")))])]),t._v(" "),a("td",[t._v("\n            "+t._s(t.stats.errored)+"\n            "),t.stats.errored>0?a("button",{staticClass:"ui tiny basic icon button",on:{click:function(e){t.rerun({batches:[t.batch.id],jobs:[]})}}},[a("i",{staticClass:"redo icon"}),t._v("\n              "+t._s(t.$t("Rerun errored jobs"))+"\n            ")]):t._e()])]):t._e(),t._v(" "),t.stats?a("tr",[a("td",[a("strong",[t._v(t._s(t.$t("Finished")))])]),t._v(" "),a("td",[t._v(t._s(t.stats.finished)+"/"+t._s(t.stats.count))])]):t._e()])]),t._v(" "),a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui field"},[a("label",[t._v(t._s(t.$t("Search")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobFilters.search,expression:"jobFilters.search"}],attrs:{type:"text",placeholder:"Search by source..."},domProps:{value:t.jobFilters.search},on:{input:function(e){e.target.composing||t.$set(t.jobFilters,"search",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"ui field"},[a("label",[t._v(t._s(t.$t("Status")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.jobFilters.status,expression:"jobFilters.status"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.jobFilters,"status",e.target.multiple?a:a[0])}}},[a("option",{domProps:{value:null}},[t._v(t._s(t.$t("Any")))]),t._v(" "),a("option",{domProps:{value:"pending"}},[t._v(t._s(t.$t("Pending")))]),t._v(" "),a("option",{domProps:{value:"errored"}},[t._v(t._s(t.$t("Errored")))]),t._v(" "),a("option",{domProps:{value:"finished"}},[t._v(t._s(t.$t("Success")))]),t._v(" "),a("option",{domProps:{value:"skipped"}},[t._v(t._s(t.$t("Skipped")))])])])])]),t._v(" "),t.jobResult?a("table",{staticClass:"ui unstackable table"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("Job ID")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Recording MusicBrainz ID")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Source")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Status")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Track")))])])]),t._v(" "),a("tbody",t._l(t.jobResult.results,function(e){return a("tr",[a("td",[t._v(t._s(e.id))]),a("td",[a("a",{attrs:{href:"https://www.musicbrainz.org/recording/"+e.mbid,target:"_blank"}},[t._v(t._s(e.mbid))])]),t._v(" "),a("td",[a("a",{attrs:{title:e.source,href:e.source,target:"_blank"}},[t._v("\n              "+t._s(t._f("truncate")(e.source,50))+"\n            ")])]),t._v(" "),a("td",[a("span",{class:["ui",{yellow:"pending"===e.status},{red:"errored"===e.status},{green:"finished"===e.status},"label"]},[t._v("\n              "+t._s(e.status))]),t._v(" "),"errored"===e.status?a("button",{staticClass:"ui tiny basic icon button",attrs:{title:t.$t("Rerun job")},on:{click:function(a){t.rerun({batches:[],jobs:[e.id]})}}},[a("i",{staticClass:"redo icon"})]):t._e()]),t._v(" "),a("td",[e.track_file?a("router-link",{attrs:{to:{name:"library.tracks.detail",params:{id:e.track_file.track}}}},[t._v(t._s(e.track_file.track))]):t._e()],1)])})),t._v(" "),a("tfoot",{staticClass:"full-width"},[a("tr",[a("th",[t.jobResult&&t.jobResult.results.length>0?a("pagination",{attrs:{compact:!0,current:t.jobFilters.page,"paginate-by":t.jobFilters.paginateBy,total:t.jobResult.count},on:{"page-changed":t.selectPage}}):t._e()],1),t._v(" "),t.jobResult&&t.jobResult.results.length>0?a("th",[t._v("\n            "+t._s(t.$t("Showing results {%start%}-{%end%} on {%total%}",{start:(t.jobFilters.page-1)*t.jobFilters.paginateBy+1,end:(t.jobFilters.page-1)*t.jobFilters.paginateBy+t.jobResult.results.length,total:t.jobResult.count}))+"\n          ")]):t._e(),a("th"),a("th"),t._v(" "),a("th"),t._v(" "),a("th")])])]):t._e()]):t._e()])},staticRenderFns:[]}},function(t,e,a){function i(t){a(545)}var s=a(1)(a(546),a(547),i,"data-v-07d3cd53",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(5),r=a.n(n),o=a(4),l=a.n(o),c=a(3),u=a(26),d=a.n(u),v=a(31),p=a.n(v),f=a(100),h=a.n(f),m=a(8),_=a.n(m);e.default={mixins:[d.a,p.a],props:{defaultQuery:{type:String,required:!1,default:""},defaultStatus:{required:!1,default:"any"}},components:{RequestCard:h.a,Pagination:_.a},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{isLoading:!0,result:null,page:parseInt(this.defaultPage),query:this.defaultQuery,paginateBy:parseInt(this.defaultPaginateBy||12),orderingDirection:t.direction||"+",ordering:t.field,status:this.defaultStatus||"any"}},created:function(){this.fetchData()},mounted:function(){l()(".ui.dropdown").dropdown()},methods:{updateQueryString:r.a.debounce(function(){var t={query:{query:this.query,page:this.page,paginateBy:this.paginateBy,ordering:this.getOrderingAsString()}};"any"!==this.status&&(t.query.status=this.status),this.$router.replace(t)},500),fetchData:r.a.debounce(function(){var t=this;this.isLoading=!0;var e={page:this.page,page_size:this.paginateBy,q:this.query,ordering:this.getOrderingAsString()};"any"!==this.status&&(e.status=this.status),c.a.default.debug("Fetching request..."),s.a.get("requests/import-requests/",{params:e}).then(function(e){t.result=e.data,t.isLoading=!1})},500),selectPage:function(t){this.page=t}},computed:{orderingOptions:function(){return[["creation_date",this.$t("Creation date")],["artist_name",this.$t("Artist name")],["user__username",this.$t("User")]]}},watch:{page:function(){this.updateQueryString(),this.fetchData()},paginateBy:function(){this.updateQueryString(),this.fetchData()},ordering:function(){this.updateQueryString(),this.fetchData()},orderingDirection:function(){this.updateQueryString(),this.fetchData()},query:function(){this.updateQueryString(),this.fetchData()},status:function(){this.updateQueryString(),this.fetchData()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Import Requests",expression:"'Import Requests'"}]},[a("div",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.$t("Music requests")))]),t._v(" "),a("div",{class:["ui",{loading:t.isLoading},"form"]},[a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Search")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"text",placeholder:"Enter an artist name, a username..."},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Status")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.status=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:"any"}},[t._v(t._s(t.$t("Any")))]),t._v(" "),a("option",{domProps:{value:"pending"}},[t._v(t._s(t.$t("Pending")))]),t._v(" "),a("option",{domProps:{value:"accepted"}},[t._v(t._s(t.$t("Accepted")))]),t._v(" "),a("option",{domProps:{value:"imported"}},[t._v(t._s(t.$t("Imported")))]),t._v(" "),a("option",{domProps:{value:"closed"}},[t._v(t._s(t.$t("Closed")))])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Ordering")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,function(e){return a("option",{domProps:{value:e[0]}},[t._v("\n              "+t._s(e[1])+"\n            ")])}))]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Ordering direction")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[t._v("Ascending")]),t._v(" "),a("option",{attrs:{value:"-"}},[t._v("Descending")])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Results per page")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.paginateBy,expression:"paginateBy"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.paginateBy=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:parseInt(12)}},[t._v("12")]),t._v(" "),a("option",{domProps:{value:parseInt(25)}},[t._v("25")]),t._v(" "),a("option",{domProps:{value:parseInt(50)}},[t._v("50")])])])])]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),t.result?a("div",{directives:[{name:"masonry",rawName:"v-masonry"}],staticClass:"ui stackable three column doubling grid",attrs:{"transition-duration":"0","item-selector":".column","percent-position":"true",stagger:"0"}},t._l(t.result.results,function(e){return t.result.results.length>0?a("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:e.id,staticClass:"column"},[a("request-card",{staticClass:"fluid",attrs:{request:e}})],1):t._e()})):t._e(),t._v(" "),a("div",{staticClass:"ui center aligned basic segment"},[t.result&&t.result.results.length>0?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1)])])},staticRenderFns:[]}},function(t,e,a){var i=a(1)(a(549),a(558),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(20),r=a.n(n),o=a(19),l=a.n(o),c=a(18),u=a.n(c),d=a(550),v=a.n(d);e.default={props:{id:{required:!0},defaultEdit:{type:Boolean,default:!1}},components:{PlaylistEditor:v.a,TrackTable:r.a,PlayButton:u.a,RadioButton:l.a},data:function(){return{edit:this.defaultEdit,isLoading:!1,playlist:null,tracks:[],playlistTracks:[]}},created:function(){this.fetch()},methods:{updatePlts:function(t){this.playlistTracks=t,this.tracks=t.map(function(t,e){var a=t.track;return a.position=e+1,a})},fetch:function(){var t=this;t.isLoading=!0;var e="playlists/"+this.id+"/";s.a.get(e).then(function(a){t.playlist=a.data,s.a.get(e+"tracks").then(function(e){t.updatePlts(e.data.results)}).then(function(){t.isLoading=!1})})},deletePlaylist:function(){var t=this,e="playlists/"+this.id+"/";s.a.delete(e).then(function(e){t.$store.dispatch("playlists/fetchOwn"),t.$router.push({path:"/library"})})}}}},function(t,e,a){function i(t){a(551)}var s=a(1)(a(552),a(557),i,"data-v-3784fca5",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(17),s=a.n(i),n=a(13),r=a(2),o=a.n(r),l=a(105),c=a.n(l),u=a(106),d=a.n(u);e.default={components:{draggable:d.a,PlaylistForm:c.a},props:["playlist","playlistTracks"],data:function(){return{plts:this.playlistTracks,isLoading:!1,errors:[]}},methods:{success:function(){this.isLoading=!1,this.errors=[]},errored:function(t){this.isLoading=!1,this.errors=t},reorder:function(t){var e=(t.oldIndex,t.newIndex),a=this;a.isLoading=!0;var i=this.plts[e],s="playlist-tracks/"+i.id+"/";o.a.patch(s,{index:e}).then(function(t){a.success()},function(t){a.errored(t.backendErrors)})},removePlt:function(t){var e=this.plts[t];this.plts.splice(t,1);var a=this;a.isLoading=!0;var i="playlist-tracks/"+e.id+"/";o.a.delete(i).then(function(t){a.success(),a.$store.dispatch("playlists/fetchOwn")},function(t){a.errored(t.backendErrors)})},clearPlaylist:function(){this.plts=[];var t=this;t.isLoading=!0;var e="playlists/"+this.playlist.id+"/clear";o.a.delete(e).then(function(e){t.success(),t.$store.dispatch("playlists/fetchOwn")},function(e){t.errored(e.backendErrors)})},insertMany:function(t){var e=this,a=t.map(function(t){return t.id});e.isLoading=!0;var i="playlists/"+this.playlist.id+"/add/";o.a.post(i,{tracks:a}).then(function(t){t.data.results.forEach(function(t){e.plts.push(t)}),e.success(),e.$store.dispatch("playlists/fetchOwn")},function(t){e.errored(t.backendErrors)})}},computed:s()({},Object(n.d)({queueTracks:function(t){return t.queue.tracks}}),{status:function(){return this.isLoading?"loading":this.errors.length>0?"errored":"saved"}}),watch:{plts:{handler:function(t){t.forEach(function(t,e){t.index=e}),this.$emit("tracks-updated",t)},deep:!0}}}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i),n=a(2),r=a.n(n),o=a(3);e.default={props:{title:{type:Boolean,default:!0},playlist:{type:Object,default:null}},mounted:function(){s()(this.$el).find(".dropdown").dropdown()},data:function(){var t={errors:[],success:!1,isLoading:!1};return this.playlist?(t.name=this.playlist.name,t.privacyLevel=this.playlist.privacy_level):(t.privacyLevel=this.$store.state.auth.profile.privacy_level,t.name=""),t},computed:{privacyLevelChoices:function(){return[{value:"me",label:this.$t("Nobody except me")},{value:"instance",label:this.$t("Everyone on this instance")},{value:"everyone",label:this.$t("Everyone")}]}},methods:{submit:function(){this.isLoading=!0,this.success=!1,this.errors=[];var t=this,e={name:this.name,privacy_level:this.privacyLevel},a=void 0,i=void 0;return this.playlist?(i="playlists/"+this.playlist.id+"/",a=r.a.patch(i,e)):(i="playlists/",a=r.a.post(i,e)),a.then(function(e){t.success=!0,t.isLoading=!1,t.playlist||(t.name=""),t.$emit("updated",e.data),t.$store.dispatch("playlists/fetchOwn")},function(e){o.a.default.error("Error while creating playlist"),t.isLoading=!1,t.errors=e.backendErrors})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){e.preventDefault(),t.submit()}}},[t.title?a("h4",{staticClass:"ui header"},[t._v(t._s(t.$t("Create a new playlist")))]):t._e(),t._v(" "),t.success?a("div",{staticClass:"ui positive message"},[a("div",{staticClass:"header"},[t.playlist?[t._v("\n        "+t._s(t.$t("Playlist updated"))+"\n      ")]:[t._v("\n        "+t._s(t.$t("Playlist created"))+"\n      ")]],2)]):t._e(),t._v(" "),t.errors.length>0?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[t._v(t._s(t.$t("We cannot create the playlist")))]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}))]):t._e(),t._v(" "),a("div",{staticClass:"three fields"},[a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Playlist name")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{required:"",type:"text",placeholder:"My awesome playlist"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Playlist visibility")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.privacyLevel,expression:"privacyLevel"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.privacyLevel=e.target.multiple?a:a[0]}}},t._l(t.privacyLevelChoices,function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.label))])}))]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v("")]),t._v(" "),a("button",{class:["ui","fluid",{loading:t.isLoading},"button"],attrs:{type:"submit"}},[t.playlist?[t._v(t._s(t.$t("Update playlist")))]:[t._v(t._s(t.$t("Create playlist")))]],2)])])])},staticRenderFns:[]}},,function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui text container"},[i("playlist-form",{attrs:{title:!1,playlist:t.playlist},on:{updated:function(e){t.$emit("playlist-updated",e)}}}),t._v(" "),i("h3",{staticClass:"ui top attached header"},[t._v("\n    "+t._s(t.$t("Playlist editor"))+"\n  ")]),t._v(" "),i("div",{staticClass:"ui attached segment"},["loading"===t.status?[i("div",{staticClass:"ui active tiny inline loader"}),t._v("\n      "+t._s(t.$t("Syncing changes to server..."))+"\n    ")]:"errored"===t.status?[i("i",{staticClass:"red close icon"}),t._v("\n      "+t._s(t.$t("An error occured while saving your changes"))+"\n      "),t.errors.length>0?i("div",{staticClass:"ui negative message"},[i("ul",{staticClass:"list"},t._l(t.errors,function(e){return i("li",[t._v(t._s(e))])}))]):t._e()]:"saved"===t.status?[i("i",{staticClass:"green check icon"}),t._v(" "+t._s(t.$t("Changes synced with server"))+"\n    ")]:t._e()],2),t._v(" "),i("div",{staticClass:"ui bottom attached segment"},[i("div",{class:["ui",{disabled:0===t.queueTracks.length},"labeled","icon","button"],attrs:{disabled:0===t.queueTracks.length,title:"Copy tracks from current queue to playlist"},on:{click:function(e){t.insertMany(t.queueTracks)}}},[i("i",{staticClass:"plus icon"}),t._v("\n        "+t._s(t.$t("Insert from queue ({%count%} tracks)",{count:t.queueTracks.length}))+"\n      ")]),t._v(" "),i("dangerous-button",{staticClass:"labeled right floated icon",attrs:{disabled:0===t.plts.length,color:"yellow",action:t.clearPlaylist}},[i("i",{staticClass:"eraser icon"}),t._v(" "+t._s(t.$t("Clear playlist"))+"\n      "),i("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[t._v(t._s(t.$t('Do you want to clear the playlist "{%name%}"?',{name:t.playlist.name})))]),t._v(" "),i("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[t._v(t._s(t.$t("This will remove all tracks from this playlist and cannot be undone.")))]),t._v(" "),i("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[t._v(t._s(t.$t("Clear playlist")))])]),t._v(" "),i("div",{staticClass:"ui hidden divider"}),t._v(" "),t.plts.length>0?[i("p",[t._v("Drag and drop rows to reorder tracks in the playlist")]),t._v(" "),i("table",{staticClass:"ui compact very basic fixed single line unstackable table"},[i("draggable",{attrs:{element:"tbody"},on:{update:t.reorder},model:{value:t.plts,callback:function(e){t.plts=e},expression:"plts"}},t._l(t.plts,function(e,s){return i("tr",{key:e.id},[i("td",{staticClass:"left aligned"},[t._v(t._s(e.index+1))]),t._v(" "),i("td",{staticClass:"center aligned"},[e.track.album.cover?i("img",{staticClass:"ui mini image",attrs:{src:e.track.album.cover}}):i("img",{staticClass:"ui mini image",attrs:{src:a(30)}})]),t._v(" "),i("td",{attrs:{colspan:"4"}},[i("strong",[t._v(t._s(e.track.title))]),i("br"),t._v("\n                "+t._s(e.track.artist.name)+"\n            ")]),t._v(" "),i("td",{staticClass:"right aligned"},[i("i",{staticClass:"circular red trash icon",on:{click:function(e){e.stopPropagation(),t.removePlt(s)}}})])])}))],1)]:t._e()],2)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?a("div",{directives:[{name:"title",rawName:"v-title",value:t.$t("Playlist"),expression:"$t('Playlist')"}],staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),!t.isLoading&&t.playlist?a("div",{directives:[{name:"title",rawName:"v-title",value:t.playlist.name,expression:"playlist.name"}],staticClass:"ui head vertical center aligned stripe segment"},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui center aligned icon header"},[a("i",{staticClass:"circular inverted list yellow icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n          "+t._s(t.playlist.name)+"\n          "),a("i18next",{staticClass:"sub header",attrs:{tag:"div",path:"Playlist containing {%0%} tracks, by {%1%}"}},[t._v("\n            "+t._s(t.playlistTracks.length)+"\n            "),a("username",{attrs:{username:t.playlist.user.username}})],1)],1)]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("play-button",{staticClass:"orange",attrs:{tracks:t.tracks}},[t._v(t._s(t.$t("Play all")))]),t._v(" "),t.playlist.user.id===t.$store.state.auth.profile.id?a("button",{staticClass:"ui icon button",on:{click:function(e){t.edit=!t.edit}}},[a("i",{staticClass:"pencil icon"}),t._v(" "),t.edit?[t._v(t._s(t.$t("End edition")))]:[t._v(t._s(t.$t("Edit...")))]],2):t._e(),t._v(" "),a("dangerous-button",{staticClass:"labeled icon",attrs:{action:t.deletePlaylist}},[a("i",{staticClass:"trash icon"}),t._v(" "+t._s(t.$t("Delete"))+"\n        "),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[t._v(t._s(t.$t('Do you want to delete the playlist "{% playlist %}"?',{playlist:t.playlist.name})))]),t._v(" "),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[t._v(t._s(t.$t("This will completely delete this playlist and cannot be undone.")))]),t._v(" "),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[t._v(t._s(t.$t("Delete playlist")))])])],1)]):t._e(),t._v(" "),a("div",{staticClass:"ui vertical stripe segment"},[t.edit?[a("playlist-editor",{attrs:{playlist:t.playlist,"playlist-tracks":t.playlistTracks},on:{"playlist-updated":function(e){t.playlist=e},"tracks-updated":t.updatePlts}})]:[a("h2",[t._v("Tracks")]),t._v(" "),a("track-table",{attrs:{"display-position":!0,tracks:t.tracks}})]],2)])},staticRenderFns:[]}},function(t,e,a){function i(t){a(560)}var s=a(1)(a(561),a(570),i,"data-v-78b1816c",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(5),r=a.n(n),o=a(4),l=a.n(o),c=a(26),u=a.n(c),d=a(31),v=a.n(d),p=a(562),f=a.n(p),h=a(8),m=a.n(h);e.default={mixins:[u.a,v.a],props:{defaultQuery:{type:String,required:!1,default:""}},components:{PlaylistCardList:f.a,Pagination:m.a},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{isLoading:!0,result:null,page:parseInt(this.defaultPage),query:this.defaultQuery,paginateBy:parseInt(this.defaultPaginateBy||12),orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","Creation date"],["modification_date","Last modification date"],["name","Name"]]}},created:function(){this.fetchData()},mounted:function(){l()(".ui.dropdown").dropdown()},methods:{updateQueryString:r.a.debounce(function(){this.$router.replace({query:{query:this.query,page:this.page,paginateBy:this.paginateBy,ordering:this.getOrderingAsString()}})},500),fetchData:r.a.debounce(function(){var t=this;this.isLoading=!0;var e={page:this.page,page_size:this.paginateBy,q:this.query,ordering:this.getOrderingAsString()};s.a.get("playlists/",{params:e}).then(function(e){t.result=e.data,t.isLoading=!1})},500),selectPage:function(t){this.page=t}},watch:{page:function(){this.updateQueryString(),this.fetchData()},paginateBy:function(){this.updateQueryString(),this.fetchData()},ordering:function(){this.updateQueryString(),this.fetchData()},orderingDirection:function(){this.updateQueryString(),this.fetchData()},query:function(){this.updateQueryString(),this.fetchData()}}}},function(t,e,a){function i(t){a(563)}var s=a(1)(a(564),a(569),i,"data-v-54161286",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(565),s=a.n(i);e.default={props:["playlists"],components:{PlaylistCard:s.a}}},function(t,e,a){function i(t){a(566)}var s=a(1)(a(567),a(568),i,"data-v-1ae9d670",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(18),s=a.n(i);e.default={props:["playlist"],components:{PlayButton:s.a}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui card"},[a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[a("router-link",{staticClass:"discrete link",attrs:{to:{name:"library.playlists.detail",params:{id:t.playlist.id}}}},[t._v("\n        "+t._s(t.playlist.name)+"\n      ")])],1),t._v(" "),a("div",{staticClass:"meta"},[a("i",{staticClass:"user icon"}),t._v(" "+t._s(t.playlist.user.username)+"\n    ")]),t._v(" "),a("div",{staticClass:"meta"},[a("i",{staticClass:"clock icon"}),t._v(" "),a("i18next",{attrs:{path:"Updated {%0%}"}},[a("human-date",{attrs:{date:t.playlist.modification_date}})],1)],1)]),t._v(" "),a("div",{staticClass:"extra content"},[a("span",[a("i",{staticClass:"sound icon"}),t._v("\n      "+t._s(t.$t("{%count%} tracks",{count:t.playlist.tracks_count}))+"\n    ")]),t._v(" "),a("play-button",{staticClass:"mini basic orange right floated",attrs:{playlist:t.playlist}},[t._v("Play all")])],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.playlists.length>0?a("div",{directives:[{name:"masonry",rawName:"v-masonry"}],staticClass:"ui stackable three column doubling grid",attrs:{"transition-duration":"0","item-selector":".column","percent-position":"true",stagger:"0"}},t._l(t.playlists,function(t){return a("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:t.id,staticClass:"column"},[a("playlist-card",{staticClass:"fluid",attrs:{playlist:t}})],1)})):t._e()},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:t.$t("Playlists"),expression:"$t('Playlists')"}]},[a("div",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.$t("Browsing playlists")))]),t._v(" "),a("div",{class:["ui",{loading:t.isLoading},"form"]},[t.$store.state.auth.authenticated?[a("button",{staticClass:"ui basic green button",on:{click:function(e){t.$store.commit("playlists/chooseTrack",null)}}},[t._v(t._s(t.$t("Manage your playlists")))]),t._v(" "),a("div",{staticClass:"ui hidden divider"})]:t._e(),t._v(" "),a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Search")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"text",placeholder:t.$t("Enter an playlist name...")},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Ordering")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,function(e){return a("option",{domProps:{value:e[0]}},[t._v("\n              "+t._s(e[1])+"\n            ")])}))]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Ordering direction")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[t._v(t._s(t.$t("Ascending")))]),t._v(" "),a("option",{attrs:{value:"-"}},[t._v(t._s(t.$t("Descending")))])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Results per page")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.paginateBy,expression:"paginateBy"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.paginateBy=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:parseInt(12)}},[t._v("12")]),t._v(" "),a("option",{domProps:{value:parseInt(25)}},[t._v("25")]),t._v(" "),a("option",{domProps:{value:parseInt(50)}},[t._v("50")])])])])],2),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),t.result?a("playlist-card-list",{attrs:{playlists:t.result.results}}):t._e(),t._v(" "),a("div",{staticClass:"ui center aligned basic segment"},[t.result&&t.result.results.length>0?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1)],1)])},staticRenderFns:[]}},function(t,e,a){function i(t){a(572)}var s=a(1)(a(573),a(574),i,"data-v-93bd32c0",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(4),r=a.n(n),o=a(3),l=a(20),c=a.n(l),u=a(19),d=a.n(u),v=a(8),p=a.n(v),f=a(26),h=a.n(f),m=a(31),_=a.n(m);e.default={mixins:[h.a,_.a],components:{TrackTable:c.a,RadioButton:d.a,Pagination:p.a},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{results:null,isLoading:!1,nextLink:null,previousLink:null,page:parseInt(this.defaultPage),paginateBy:parseInt(this.defaultPaginateBy||25),orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","Creation date"],["title","Track name"],["album__title","Album name"],["artist__name","Artist name"]]}},created:function(){this.fetchFavorites("tracks/")},mounted:function(){r()(".ui.dropdown").dropdown()},methods:{updateQueryString:function(){this.$router.replace({query:{page:this.page,paginateBy:this.paginateBy,ordering:this.getOrderingAsString()}})},fetchFavorites:function(t){var e=this;this.isLoading=!0;var a={favorites:"true",page:this.page,page_size:this.paginateBy,ordering:this.getOrderingAsString()};o.a.default.time("Loading user favorites"),s.a.get(t,{params:a}).then(function(t){e.results=t.data,e.nextLink=t.data.next,e.previousLink=t.data.previous,e.results.results.forEach(function(t){e.$store.commit("favorites/track",{id:t.id,value:!0})}),o.a.default.timeEnd("Loading user favorites"),e.isLoading=!1})},selectPage:function(t){this.page=t}},watch:{page:function(){this.updateQueryString()},paginateBy:function(){this.updateQueryString()},orderingDirection:function(){this.updateQueryString()},ordering:function(){this.updateQueryString()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Your Favorites",expression:"'Your Favorites'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical center aligned stripe segment"},[a("div",{class:["ui",{active:t.isLoading},"inverted","dimmer"]},[a("div",{staticClass:"ui text loader"},[a("i18next",{attrs:{path:"Loading your favorites..."}})],1)]),t._v(" "),t.results?a("h2",{staticClass:"ui center aligned icon header"},[a("i",{staticClass:"circular inverted heart pink icon"}),t._v(" "),a("i18next",{attrs:{path:"{%0%} favorites"}},[t._v("\n        "+t._s(t.$store.state.favorites.count)+"\n      ")])],1):t._e(),t._v(" "),a("radio-button",{attrs:{type:"favorites"}})],1),t._v(" "),a("div",{staticClass:"ui vertical stripe segment"},[a("div",{class:["ui",{loading:t.isLoading},"form"]},[a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Ordering"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,function(e){return a("option",{domProps:{value:e[0]}},[t._v("\n              "+t._s(e[1])+"\n            ")])}))],1),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Ordering direction"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[a("i18next",{attrs:{path:"Ascending"}})],1),t._v(" "),a("option",{attrs:{value:"-"}},[a("i18next",{attrs:{path:"Descending"}})],1)])],1),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Results per page"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.paginateBy,expression:"paginateBy"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.paginateBy=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:parseInt(12)}},[t._v("12")]),t._v(" "),a("option",{domProps:{value:parseInt(25)}},[t._v("25")]),t._v(" "),a("option",{domProps:{value:parseInt(50)}},[t._v("50")])])],1)])]),t._v(" "),t.results?a("track-table",{attrs:{tracks:t.results.results}}):t._e(),t._v(" "),a("div",{staticClass:"ui center aligned basic segment"},[t.results&&t.results.count>0?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.results.count},on:{"page-changed":t.selectPage}}):t._e()],1)],1)])},staticRenderFns:[]}},function(t,e,a){var i=a(1)(a(576),a(581),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(4),r=a.n(n),o=a(577),l=a.n(o);e.default={components:{SettingsGroup:l.a},data:function(){return{isLoading:!1,settingsData:null,current:null}},created:function(){var t=this;this.fetchSettings().then(function(e){t.$nextTick(function(){t.$store.state.route.hash&&t.scrollTo(t.$store.state.route.hash.substr(1)),r()("select.dropdown").dropdown()})})},methods:{scrollTo:function(t){this.current=t,document.getElementById(t).scrollIntoView()},fetchSettings:function(){var t=this;return t.isLoading=!0,s.a.get("instance/admin/settings/").then(function(e){t.settingsData=e.data,t.isLoading=!1})}},computed:{groups:function(){return[{label:this.$t("Instance information"),id:"instance",settings:["instance__name","instance__short_description","instance__long_description"]},{label:this.$t("Users"),id:"users",settings:["users__registration_enabled","common__api_authentication_required","users__default_permissions"]},{label:this.$t("Imports"),id:"imports",settings:["providers_youtube__api_key"]},{label:this.$t("Playlists"),id:"playlists",settings:["playlists__max_tracks"]},{label:this.$t("Federation"),id:"federation",settings:["federation__enabled","federation__music_needs_approval","federation__collection_page_size","federation__music_cache_duration","federation__actor_fetch_delay"]},{label:this.$t("Subsonic"),id:"subsonic",settings:["subsonic__enabled"]},{label:this.$t("Statistics"),id:"statistics",settings:["instance__nodeinfo_enabled","instance__nodeinfo_stats_enabled","instance__nodeinfo_private"]},{label:this.$t("Error reporting"),id:"reporting",settings:["raven__front_enabled","raven__front_dsn"]}]}},watch:{settingsData:function(){var t=this;this.$nextTick(function(){r()(t.$el).find(".sticky").sticky({context:"#settings-grid"})})}}}},function(t,e,a){function i(t){a(578)}var s=a(1)(a(579),a(580),i,"data-v-67eb1382",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i);e.default={props:{group:{type:Object,required:!0},settingsData:{type:Array,required:!0}},data:function(){return{values:{},result:null,errors:[],isLoading:!1}},created:function(){var t=this;this.settings.forEach(function(e){t.values[e.identifier]=e.value})},methods:{save:function(){var t=this;this.isLoading=!0,t.errors=[],t.result=null,s.a.post("instance/admin/settings/bulk/",t.values).then(function(e){t.result=!0,t.isLoading=!1,t.$store.dispatch("instance/fetchSettings")},function(e){t.isLoading=!1,t.errors=e.backendErrors})}},computed:{settings:function(){var t={};return this.settingsData.forEach(function(e){t[e.identifier]=e}),this.group.settings.map(function(e){return t[e]})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",attrs:{id:t.group.id},on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("div",{staticClass:"ui divider"}),t._v(" "),a("h3",{staticClass:"ui header"},[t._v(t._s(t.group.label))]),t._v(" "),t.errors.length>0?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[t._v(t._s(t.$t("Error while saving settings")))]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}))]):t._e(),t._v(" "),t.result?a("div",{staticClass:"ui positive message"},[t._v("\n    "+t._s(t.$t("Settings updated successfully."))+"\n  ")]):t._e(),t._v(" "),t.group.help?a("p",[t._v(t._s(t.group.help))]):t._e(),t._v(" "),t._l(t.settings,function(e){return a("div",{staticClass:"ui field"},["CheckboxInput"!==e.field.widget.class?[a("label",{attrs:{for:e.identifier}},[t._v(t._s(e.verbose_name))]),t._v(" "),e.help_text?a("p",[t._v(t._s(e.help_text))]):t._e()]:t._e(),t._v(" "),"PasswordInput"===e.field.widget.class?a("input",{directives:[{name:"model",rawName:"v-model",value:t.values[e.identifier],expression:"values[setting.identifier]"}],staticClass:"ui input",attrs:{id:e.identifier,type:"password"},domProps:{value:t.values[e.identifier]},on:{input:function(a){a.target.composing||t.$set(t.values,e.identifier,a.target.value)}}}):t._e(),t._v(" "),"TextInput"===e.field.widget.class?a("input",{directives:[{name:"model",rawName:"v-model",value:t.values[e.identifier],expression:"values[setting.identifier]"}],staticClass:"ui input",attrs:{id:e.identifier,type:"text"},domProps:{value:t.values[e.identifier]},on:{input:function(a){a.target.composing||t.$set(t.values,e.identifier,a.target.value)}}}):t._e(),t._v(" "),"IntegerField"===e.field.class?a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.values[e.identifier],expression:"values[setting.identifier]",modifiers:{number:!0}}],staticClass:"ui input",attrs:{id:e.identifier,type:"number"},domProps:{value:t.values[e.identifier]},on:{input:function(a){a.target.composing||t.$set(t.values,e.identifier,t._n(a.target.value))},blur:function(e){t.$forceUpdate()}}}):"Textarea"===e.field.widget.class?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.values[e.identifier],expression:"values[setting.identifier]"}],staticClass:"ui input",attrs:{id:e.identifier,type:"text"},domProps:{value:t.values[e.identifier]},on:{input:function(a){a.target.composing||t.$set(t.values,e.identifier,a.target.value)}}}):"CheckboxInput"===e.field.widget.class?a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.values[e.identifier],expression:"values[setting.identifier]"}],attrs:{id:e.identifier,name:e.identifier,type:"checkbox"},domProps:{checked:Array.isArray(t.values[e.identifier])?t._i(t.values[e.identifier],null)>-1:t.values[e.identifier]},on:{change:function(a){var i=t.values[e.identifier],s=a.target,n=!!s.checked;if(Array.isArray(i)){var r=t._i(i,null);s.checked?r<0&&t.$set(t.values,e.identifier,i.concat([null])):r>-1&&t.$set(t.values,e.identifier,i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.values,e.identifier,n)}}}),t._v(" "),a("label",{attrs:{for:e.identifier}},[t._v(t._s(e.verbose_name))]),t._v(" "),e.help_text?a("p",[t._v(t._s(e.help_text))]):t._e()]):"MultipleChoiceField"===e.field.class?a("select",{directives:[{name:"model",rawName:"v-model",value:t.values[e.identifier],expression:"values[setting.identifier]"}],staticClass:"ui search selection dropdown",attrs:{multiple:""},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.values,e.identifier,a.target.multiple?i:i[0])}}},t._l(e.additional_data.choices,function(e){return a("option",{domProps:{value:e[0]}},[t._v(t._s(e[1]))])})):t._e()],2)}),t._v(" "),a("button",{class:["ui",{loading:t.isLoading},"right","floated","green","button"],attrs:{type:"submit"}},[t._v("\n      "+t._s(t.$t("Save"))+"\n  ")])],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:t.$t("Instance settings"),expression:"$t('Instance settings')"}],staticClass:"main pusher"},[a("div",{staticClass:"ui vertical stripe segment"},[a("div",{staticClass:"ui text container"},[a("div",{class:["ui",{loading:t.isLoading},"form"]}),t._v(" "),t.settingsData?a("div",{staticClass:"ui grid",attrs:{id:"settings-grid"}},[a("div",{staticClass:"twelve wide stretched column"},t._l(t.groups,function(e){return a("settings-group",{key:e.title,attrs:{"settings-data":t.settingsData,group:e}})})),t._v(" "),a("div",{staticClass:"four wide column"},[a("div",{staticClass:"ui sticky vertical secondary menu"},[a("div",{staticClass:"header item"},[t._v(t._s(t.$t("Sections")))]),t._v(" "),t._l(t.groups,function(e){return a("a",{class:["menu",{active:e.id===t.current},"item"],attrs:{href:"#"+e.id},on:{click:function(a){a.preventDefault(),t.scrollTo(e.id)}}},[t._v(t._s(e.label))])})],2)])]):t._e()])])])},staticRenderFns:[]}},function(t,e,a){function i(t){a(583)}var s=a(1)(a(584),a(585),i,null,null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Manage library",expression:"'Manage library'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui secondary pointing menu"},[a("router-link",{staticClass:"ui item",attrs:{to:{name:"manage.library.files"}}},[t._v(t._s(t.$t("Files")))])],1),t._v(" "),a("router-view",{key:t.$route.fullPath})],1)},staticRenderFns:[]}},function(t,e,a){function i(t){a(587)}var s=a(1)(a(588),a(595),i,"data-v-3f81481e",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(589),s=a.n(i);e.default={components:{LibraryFilesTable:s.a}}},function(t,e,a){var i=a(1)(a(590),a(594),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(5),r=a.n(n),o=a(32),l=a(8),c=a.n(l),u=a(107),d=a.n(u),v=a(26),p=a.n(v);e.default={mixins:[p.a],props:{filters:{type:Object,required:!1}},components:{Pagination:c.a,ActionTable:d.a},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{time:o.a,isLoading:!1,result:null,page:1,paginateBy:25,search:"",orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","Creation date"],["accessed_date","Accessed date"],["modification_date","Modification date"],["size","Size"],["bitrate","Bitrate"],["duration","Duration"]]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=r.a.merge({page:this.page,page_size:this.paginateBy,q:this.search,ordering:this.getOrderingAsString()},this.filters),e=this;e.isLoading=!0,e.checked=[],s.a.get("/manage/library/track-files/",{params:t}).then(function(t){e.result=t.data,e.isLoading=!1},function(t){e.isLoading=!1,e.errors=t.backendErrors})},selectPage:function(t){this.page=t}},computed:{actionFilters:function(){var t={q:this.search};return this.filters?r.a.merge(t,this.filters):t},actions:function(){return[{name:"delete",label:this.$t("Delete"),isDangerous:!0}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},ordering:function(){this.fetchData()},orderingDirection:function(){this.fetchData()}}}},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i);e.default={props:{actionUrl:{type:String,required:!0},objectsData:{type:Object,required:!0},actions:{type:Array,required:!0,default:function(){return[]}},filters:{type:Object,required:!1,default:function(){return{}}}},components:{},data:function(){var t={checked:[],actionLoading:!1,actionResult:null,actionErrors:[],currentActionName:null,selectAll:!1,lastCheckedIndex:-1};return this.actions.length>0&&(t.currentActionName=this.actions[0].name),t},methods:{toggleCheckAll:function(){this.lastCheckedIndex=-1,this.checked.length===this.checkable.length?this.checked=[]:this.checked=this.checkable.map(function(t){return t})},toggleCheck:function(t,e,a){var i=this,s=[e],n=null;if(this.checked.indexOf(e)>-1?(this.selectAll=!1,n=!1):n=!0,t.shiftKey&&this.lastCheckedIndex>-1){var r=[a,this.lastCheckedIndex];r.sort(function(t,e){return t-e});var o=this.objectsData.results.slice(r[0],r[1]+1);s=s.concat(o.map(function(t){return t.id}))}s.forEach(function(t){var e=i.checked.indexOf(t)>-1;if(n&&!e&&i.checkable.indexOf(t)>-1)return i.checked.push(t);!n&&e&&i.checked.splice(i.checked.indexOf(t),1)}),this.lastCheckedIndex=a},launchAction:function(){var t=this;t.actionLoading=!0,t.result=null;var e={action:this.currentActionName,filters:this.filters};this.selectAll?e.objects="all":e.objects=this.checked,s.a.post(this.actionUrl,e).then(function(e){t.actionResult=e.data,t.actionLoading=!1,t.$emit("action-launched",e.data)},function(e){t.actionLoading=!1,t.actionErrors=e.backendErrors})}},computed:{currentAction:function(){var t=this;return this.actions.filter(function(e){return e.name===t.currentActionName})[0]},checkable:function(){var t=this.objectsData.results,e=this.currentAction.filterCheckable;return e&&(t=t.filter(function(t){return e(t)})),t.map(function(t){return t.id})}},watch:{objectsData:{handler:function(){this.checked=[],this.selectAll=!1},deep:!0}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"ui compact very basic single line unstackable table"},[a("thead",[t.actions.length>0?a("tr",[a("th",{attrs:{colspan:"1000"}},[a("div",{staticClass:"ui small form"},[a("div",{staticClass:"ui inline fields"},[a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Actions")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentActionName,expression:"currentActionName"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.currentActionName=e.target.multiple?a:a[0]}}},t._l(t.actions,function(e){return a("option",{domProps:{value:e.name}},[t._v("\n                  "+t._s(e.label)+"\n                ")])}))]),t._v(" "),a("div",{staticClass:"field"},[t.selectAll?t.currentAction.isDangerous?t._e():a("dangerous-button",{class:["ui",{disabled:0===t.checked.length},{loading:t.actionLoading},"button"],attrs:{"confirm-color":"green",color:""},on:{confirm:t.launchAction}},[t._v("\n                "+t._s(t.$t("Go"))+"\n                "),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[t._v(t._s(t.$t('Do you want to launch action "{% action %}" on {% total %} elements?',{action:t.currentActionName,total:t.objectsData.count}))+"\n                ")]),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[t._v("\n                  "+t._s(t.$t("This may affect a lot of elements, please double check this is really what you want."))+"\n                ")]),t._v(" "),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[t._v(t._s(t.$t("Launch")))])]):a("div",{class:["ui",{disabled:0===t.checked.length},{loading:t.actionLoading},"button"],attrs:{disabled:0===t.checked.length},on:{click:t.launchAction}},[t._v("\n                "+t._s(t.$t("Go")))])],1),t._v(" "),a("div",{staticClass:"count field"},[t.selectAll?a("span",[t._v(t._s(t.$t("{% count %} on {% total %} selected",{count:t.objectsData.count,total:t.objectsData.count})))]):a("span",[t._v(t._s(t.$t("{% count %} on {% total %} selected",{count:t.checked.length,total:t.objectsData.count})))]),t._v(" "),t.currentAction.isDangerous||t.checkable.length!==t.checked.length?t._e():[t.selectAll?a("a",{on:{click:function(e){t.selectAll=!1}}},[t._v("\n                  "+t._s(t.$t("Select only current page"))+"\n                ")]):a("a",{on:{click:function(e){t.selectAll=!0}}},[t._v("\n                  "+t._s(t.$t("Select all {% total %} elements",{total:t.objectsData.count}))+"\n                ")])]],2)]),t._v(" "),t.actionErrors.length>0?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[t._v(t._s(t.$t("Error while applying action")))]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.actionErrors,function(e){return a("li",[t._v(t._s(e))])}))]):t._e(),t._v(" "),t.actionResult?a("div",{staticClass:"ui positive message"},[a("p",[t._v(t._s(t.$t("Action {% action %} was launched successfully on {% count %} objects.",{action:t.actionResult.action,count:t.actionResult.updated})))]),t._v(" "),t._t("action-success-footer",null,{result:t.actionResult})],2):t._e()])])]):t._e(),t._v(" "),a("tr",[a("th",[a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",disabled:0===t.checkable.length},domProps:{checked:t.checkable.length>0&&t.checked.length===t.checkable.length},on:{change:t.toggleCheckAll}}),a("label",[t._v("")])])]),t._v(" "),t._t("header-cells")],2)]),t._v(" "),t.objectsData.count>0?a("tbody",t._l(t.objectsData.results,function(e,i){return a("tr",[a("td",{staticClass:"collapsing"},[a("input",{attrs:{type:"checkbox",disabled:-1===t.checkable.indexOf(e.id)},domProps:{checked:t.checked.indexOf(e.id)>-1},on:{click:function(a){t.toggleCheck(a,e.id,i)}}}),a("label",[t._v("")])]),t._v(" "),t._t("row-cells",null,{obj:e})],2)})):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui field"},[a("label",[t._v(t._s(t.$t("Search")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search by title, artist, domain..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Ordering"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,function(e){return a("option",{domProps:{value:e[0]}},[t._v("\n            "+t._s(e[1])+"\n          ")])}))],1),t._v(" "),a("div",{staticClass:"field"},[a("i18next",{attrs:{tag:"label",path:"Ordering direction"}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[t._v("Ascending")]),t._v(" "),a("option",{attrs:{value:"-"}},[t._v("Descending")])])],1)])]),t._v(" "),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t._v(" "),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"manage/library/track-files/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"row-cells",fn:function(e){return[a("td",[a("span",{attrs:{title:e.obj.track.title}},[t._v(t._s(t._f("truncate")(e.obj.track.title,30)))])]),t._v(" "),a("td",[a("span",{attrs:{title:e.obj.track.artist.name}},[t._v(t._s(t._f("truncate")(e.obj.track.artist.name,30)))])]),t._v(" "),a("td",[a("span",{attrs:{title:e.obj.track.album.title}},[t._v(t._s(t._f("truncate")(e.obj.track.album.title,20)))])]),t._v(" "),a("td",[a("human-date",{attrs:{date:e.obj.creation_date}})],1),t._v(" "),e.obj.audio_mimetype?a("td",[t._v("\n          "+t._s(e.obj.audio_mimetype)+"\n        ")]):a("td",[t._v("\n          "+t._s(t.$t("N/A"))+"\n        ")]),t._v(" "),e.obj.bitrate?a("td",[t._v("\n          "+t._s(t._f("humanSize")(e.obj.bitrate))+"/s\n        ")]):a("td",[t._v("\n          "+t._s(t.$t("N/A"))+"\n        ")]),t._v(" "),e.obj.duration?a("td",[t._v("\n          "+t._s(t.time.parse(e.obj.duration))+"\n        ")]):a("td",[t._v("\n          "+t._s(t.$t("N/A"))+"\n        ")]),t._v(" "),e.obj.size?a("td",[t._v("\n          "+t._s(t._f("humanSize")(e.obj.size))+"\n        ")]):a("td",[t._v("\n          "+t._s(t.$t("N/A"))+"\n        ")])]}}])},[a("template",{slot:"header-cells"},[a("th",[t._v(t._s(t.$t("Title")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Artist")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Album")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Import date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Bitrate")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Duration")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Size")))])])],2):t._e()],1),t._v(" "),a("div",[t.result&&t.result.results.length>0?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t._v(" "),t.result&&t.result.results.length>0?a("span",[t._v("\n      "+t._s(t.$t("Showing results {%start%}-{%end%} on {%total%}",{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}))+"\n    ")]):t._e()],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Files",expression:"'Files'"}]},[a("div",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.$t("Library files")))]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("library-files-table",{attrs:{"show-library":!0}})],1)])},staticRenderFns:[]}},function(t,e,a){function i(t){a(597)}var s=a(1)(a(598),a(599),i,null,null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i);e.default={data:function(){return{requestsCount:0}},created:function(){this.fetchRequestsCount()},methods:{fetchRequestsCount:function(){var t=this;s.a.get("federation/libraries/followers/",{params:{pending:!0}}).then(function(e){t.requestsCount=e.data.count})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Federation",expression:"'Federation'"}],staticClass:"main pusher"},[a("div",{staticClass:"ui secondary pointing menu"},[a("router-link",{staticClass:"ui item",attrs:{to:{name:"federation.libraries.list"}}},[t._v(t._s(t.$t("Libraries")))]),t._v(" "),a("router-link",{staticClass:"ui item",attrs:{to:{name:"federation.tracks.list"}}},[t._v(t._s(t.$t("Tracks")))]),t._v(" "),a("div",{staticClass:"ui secondary right menu"},[a("router-link",{staticClass:"ui item",attrs:{to:{name:"federation.followers.list"}}},[t._v("\n          "+t._s(t.$t("Followers"))+"\n          "),a("div",{staticClass:"ui teal label",attrs:{title:t.$t("Pending requests")}},[t._v(t._s(t.requestsCount))])])],1)],1),t._v(" "),a("router-view",{key:t.$route.fullPath})],1)},staticRenderFns:[]}},function(t,e,a){var i=a(1)(a(601),a(607),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(20),s=a.n(i),n=a(19),r=a.n(n),o=a(8),l=a.n(o),c=a(602),u=a.n(c),d=a(108),v=a.n(d);e.default={components:{TrackTable:s.a,RadioButton:r.a,Pagination:l.a,LibraryForm:u.a,LibraryCard:v.a},data:function(){return{libraryData:null}},methods:{updateLibraryData:function(t){this.libraryData=t}}}},function(t,e,a){var i=a(1)(a(603),a(604),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(20),r=a.n(n),o=a(19),l=a.n(o),c=a(8),u=a.n(c);e.default={components:{TrackTable:r.a,RadioButton:l.a,Pagination:u.a},data:function(){return{isLoading:!1,libraryUsername:"",result:null,errors:[]}},methods:{follow:function(){var t={actor:this.result.actor.id,autoimport:!1,download_files:!1,federation_enabled:!0},e=this;e.isFollowing=!1,s.a.post("/federation/libraries/",t).then(function(t){e.$emit("follow",{data:e.result,library:t.data}),e.result=t.data,e.isFollowing=!1},function(t){e.isFollowing=!1,e.errors=t.backendErrors})},fetchInstanceInfo:function(){var t=this;this.isLoading=!0,t.errors=[],t.result=null,s.a.get("/federation/libraries/fetch/",{params:{account:this.libraryUsername.trim()}}).then(function(e){t.result=e.data,t.result.display_name=t.libraryUsername,t.isLoading=!1},function(e){t.isLoading=!1,t.errors=e.backendErrors})}},computed:{scanErrors:function(){var t=this,e=[];return this.result?(["webfinger","actor","library"].forEach(function(a){t.result[a]&&t.result[a].errors&&t.result[a].errors.forEach(function(t){e.push(t)})}),e):e}},watch:{result:function(t,e){this.$emit("scanned",t)}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"ui form",on:{submit:function(e){return e.preventDefault(),t.fetchInstanceInfo(e)}}},[a("h3",{staticClass:"ui header"},[a("i18next",{attrs:{path:"Federate with a new instance"}})],1),t._v(" "),a("p",[a("i18next",{attrs:{path:"Use this form to scan an instance and setup federation."}})],1),t._v(" "),t.errors.length>0||t.scanErrors.length>0?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[a("i18next",{attrs:{path:"Error while scanning library"}})],1),t._v(" "),a("ul",{staticClass:"list"},[t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}),t._v(" "),t._l(t.scanErrors,function(e){return a("li",[t._v(t._s(e))])})],2)]):t._e(),t._v(" "),a("div",{staticClass:"ui two fields"},[a("div",{staticClass:"ui field"},[a("label",[a("i18next",{attrs:{path:"Library name"}})],1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.libraryUsername,expression:"libraryUsername"}],attrs:{type:"text",placeholder:"library@demo.funkwhale.audio"},domProps:{value:t.libraryUsername},on:{input:function(e){e.target.composing||(t.libraryUsername=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"ui field"},[a("label",[t._v("")]),t._v(" "),a("button",{class:["ui","icon",{loading:t.isLoading},"button"],attrs:{type:"submit",disabled:t.isLoading}},[a("i",{staticClass:"search icon"}),t._v(" "),a("i18next",{attrs:{path:"Launch scan"}})],1)])])])},staticRenderFns:[]}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i);e.default={props:["libraryData","libraryInstance"],data:function(){return{library:this.libraryInstance,isLoading:!1,data:null,errors:[]}},methods:{follow:function(){var t={actor:this.libraryData.actor.id,autoimport:!1,download_files:!1,federation_enabled:!0},e=this;e.isLoading=!0,s.a.post("/federation/libraries/",t).then(function(t){e.$emit("follow",{data:e.libraryData,library:t.data}),e.library=t.data,e.isLoading=!1},function(t){e.isLoading=!1,e.errors=t.backendErrors})}},computed:{displayName:function(){return this.libraryData?this.libraryData.display_name:this.library.actor.preferred_username+"@"+this.library.actor.domain},manuallyApprovesFollowers:function(){return this.libraryData?this.libraryData.actor.manuallyApprovesFollowers:this.library.actor.manually_approves_followers},totalItems:function(){return this.libraryData?this.libraryData.library.totalItems:this.library.tracks_count},awaitingApproval:function(){return this.libraryData?this.libraryData.local.awaiting_approval:null===this.library.follow.approved},following:function(){return this.libraryData?this.libraryData.local.following:this.library.follow.approved}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui card"},[a("div",{staticClass:"content"},[a("div",{staticClass:"header ellipsis"},[t.library?a("router-link",{attrs:{title:t.displayName,to:{name:"federation.libraries.detail",params:{id:t.library.uuid}}}},[t._v("\n        "+t._s(t.displayName)+"\n      ")]):a("span",{attrs:{title:t.displayName}},[t._v(t._s(t.displayName))])],1)]),t._v(" "),a("div",{staticClass:"content"},[t.following?a("span",{staticClass:"right floated"},[a("i",{staticClass:"check icon"}),a("i18next",{attrs:{path:"Following"}})],1):t.manuallyApprovesFollowers?a("span",{staticClass:"right floated"},[a("i",{staticClass:"lock icon"}),a("i18next",{attrs:{path:"Followers only"}})],1):a("span",{staticClass:"right floated"},[a("i",{staticClass:"open lock icon"}),a("i18next",{attrs:{path:"Open"}})],1),t._v(" "),t.totalItems?a("span",[a("i",{staticClass:"music icon"}),t._v(" "),a("i18next",{attrs:{path:"{%0%} tracks"}},[t._v("\n        "+t._s(t.totalItems)+"\n      ")])],1):t._e()]),t._v(" "),a("div",{staticClass:"extra content"},[t.awaitingApproval?[a("i",{staticClass:"clock icon"}),t._v(" "),a("i18next",{attrs:{path:"Follow request pending approval"}})]:t._e(),t._v(" "),t.library?a("router-link",{staticClass:"ui basic button",attrs:{to:{name:"federation.libraries.detail",params:{id:t.library.uuid}}}},[a("i18next",{attrs:{path:"Detail"}})],1):a("div",{class:["ui","basic",{loading:t.isLoading},"green","button"],attrs:{disabled:t.isLoading},on:{click:t.follow}},[t.manuallyApprovesFollowers?a("i18next",{attrs:{path:"Send a follow request"}}):a("i18next",{attrs:{path:"Follow"}})],1)],2)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui vertical stripe segment"},[a("library-form",{on:{scanned:t.updateLibraryData}}),t._v(" "),t.libraryData?a("library-card",{attrs:{"library-data":t.libraryData}}):t._e()],1),t._v(" "),a("div",{staticClass:"ui vertical stripe segment"})])},staticRenderFns:[]}},function(t,e,a){function i(t){a(609)}var s=a(1)(a(610),a(613),i,"data-v-10448f40",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(3),r=a(109),o=a.n(r);e.default={props:["id"],components:{LibraryTrackTable:o.a},data:function(){return{isLoading:!0,isScanLoading:!1,object:null,scanTrigerred:!1}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.scanTrigerred=!1,this.isLoading=!0;var e="federation/libraries/"+this.id+"/";n.a.default.debug('Fetching library "'+this.id+'"'),s.a.get(e).then(function(e){t.object=e.data,t.isLoading=!1})},scan:function(t){var e=this;this.isScanLoading=!0;var a={},i="federation/libraries/"+this.id+"/scan/";n.a.default.debug('Triggering scan for library "'+this.id+'"'),s.a.post(i,a).then(function(t){e.scanTrigerred=!0,n.a.default.debug("Scan triggered with id",t.data),e.isScanLoading=!1})},update:function(t){var e=this.object[t],a={},i=this;a[t]=e,s.a.patch("federation/libraries/"+this.id+"/",a).then(function(a){n.a.default.info(t+" was updated succcessfully to "+e)},function(a){n.a.default.error("Error while setting "+t+" to "+e,a),i.object[t]=!e})}},computed:{libraryUsername:function(){var t=this.object.actor;return t.preferred_username+"@"+t.domain}},watch:{id:function(){this.fetchData()}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(5),r=a.n(n),o=a(8),l=a.n(o),c=a(107),u=a.n(c);e.default={props:{filters:{type:Object,required:!1},showLibrary:{type:Boolean,default:!1}},components:{Pagination:l.a,ActionTable:u.a},data:function(){return{isLoading:!1,result:null,page:1,paginateBy:25,search:"",importedFilter:null}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=r.a.merge({page:this.page,page_size:this.paginateBy,q:this.search},this.filters);null!==this.importedFilter&&(t.status=this.importedFilter);var e=this;e.isLoading=!0,e.checked=[],s.a.get("/federation/library-tracks/",{params:t}).then(function(t){e.result=t.data,e.isLoading=!1},function(t){e.isLoading=!1,e.errors=t.backendErrors})},selectPage:function(t){this.page=t}},computed:{actionFilters:function(){var t={q:this.search};return this.filters?r.a.merge(t,this.filters):t},actions:function(){return[{name:"import",label:this.$t("Import"),filterCheckable:function(t){return"not_imported"===t.status}}]}},watch:{search:function(t){this.page=1,this.fetchData()},page:function(){this.fetchData()},importedFilter:function(){this.page=1,this.fetchData()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui inline form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui field"},[a("label",[t._v(t._s(t.$t("Search")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search by title, artist, domain..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"ui field"},[a("label",[t._v(t._s(t.$t("Import status")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.importedFilter,expression:"importedFilter"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.importedFilter=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:null}},[t._v(t._s(t.$t("Any")))]),t._v(" "),a("option",{domProps:{value:"imported"}},[t._v(t._s(t.$t("Imported")))]),t._v(" "),a("option",{domProps:{value:"not_imported"}},[t._v(t._s(t.$t("Not imported")))]),t._v(" "),a("option",{domProps:{value:"import_pending"}},[t._v(t._s(t.$t("Import pending")))])])])])]),t._v(" "),a("div",{staticClass:"dimmable"},[t.isLoading?a("div",{staticClass:"ui active inverted dimmer"},[a("div",{staticClass:"ui loader"})]):t._e(),t._v(" "),t.result?a("action-table",{attrs:{"objects-data":t.result,actions:t.actions,"action-url":"federation/library-tracks/action/",filters:t.actionFilters},on:{"action-launched":t.fetchData},scopedSlots:t._u([{key:"action-success-footer",fn:function(e){return["import"===e.result.action?a("router-link",{attrs:{to:{name:"library.import.batches.detail",params:{id:e.result.result.batch.id}}}},[t._v("\n          "+t._s(t.$t("Import #{% id %} launched",{id:e.result.result.batch.id}))+"\n        ")]):t._e()]}},{key:"row-cells",fn:function(e){return[a("td",["imported"===e.obj.status?a("span",{staticClass:"ui basic green label"},[t._v(t._s(t.$t("In library")))]):"import_pending"===e.obj.status?a("span",{staticClass:"ui basic yellow label"},[t._v(t._s(t.$t("Import pending")))]):a("span",{staticClass:"ui basic label"},[t._v(t._s(t.$t("Not imported")))])]),t._v(" "),a("td",[a("span",{attrs:{title:e.obj.title}},[t._v(t._s(t._f("truncate")(e.obj.title,30)))])]),t._v(" "),a("td",[a("span",{attrs:{title:e.obj.artist_name}},[t._v(t._s(t._f("truncate")(e.obj.artist_name,30)))])]),t._v(" "),a("td",[a("span",{attrs:{title:e.obj.album_title}},[t._v(t._s(t._f("truncate")(e.obj.album_title,20)))])]),t._v(" "),a("td",[a("human-date",{attrs:{date:e.obj.published_date}})],1),t._v(" "),t.showLibrary?a("td",[t._v("\n          "+t._s(e.obj.library.actor.domain)+"\n        ")]):t._e()]}}])},[a("template",{slot:"header-cells"},[a("th",[t._v(t._s(t.$t("Status")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Title")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Artist")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Album")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Published date")))]),t._v(" "),t.showLibrary?a("th",[t._v(t._s(t.$t("Library")))]):t._e()])],2):t._e()],1),t._v(" "),a("div",[t.result&&t.result.results.length>0?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e(),t._v(" "),t.result&&t.result.results.length>0?a("span",[t._v("\n      "+t._s(t.$t("Showing results {%start%}-{%end%} on {%total%}",{start:(t.page-1)*t.paginateBy+1,end:(t.page-1)*t.paginateBy+t.result.results.length,total:t.result.count}))+"\n    ")]):t._e()],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?a("div",{directives:[{name:"title",rawName:"v-title",value:"Library",expression:"'Library'"}],staticClass:"ui vertical segment"},[a("div",{class:["ui","centered","active","inline","loader"]})]):t._e(),t._v(" "),t.object?[a("div",{directives:[{name:"title",rawName:"v-title",value:t.libraryUsername,expression:"libraryUsername"}],class:["ui","head","vertical","center","aligned","stripe","segment"]},[a("div",{staticClass:"segment-content"},[a("h2",{staticClass:"ui center aligned icon header"},[a("i",{staticClass:"circular inverted cloud olive icon"}),t._v(" "),a("div",{staticClass:"content"},[t._v("\n            "+t._s(t.libraryUsername)+"\n          ")])])]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("div",{staticClass:"ui one column centered grid"},[a("table",{staticClass:"ui collapsing very basic table"},[a("tbody",[a("tr",[a("td",[t._v("\n                "+t._s(t.$t("Follow status"))+"\n                "),a("span",{attrs:{"data-tooltip":t.$t("This indicate if the remote library granted you access")}},[a("i",{staticClass:"question circle icon"})])]),t._v(" "),a("td",[null===t.object.follow.approved?[a("i",{staticClass:"loading icon"}),t._v(" "+t._s(t.$t("Pending approval"))+"\n                ")]:!0===t.object.follow.approved?[a("i",{staticClass:"check icon"}),t._v(" "+t._s(t.$t("Following"))+"\n                ")]:!1===t.object.follow.approved?[a("i",{staticClass:"x icon"}),t._v(" "+t._s(t.$t("Not following"))+"\n                ")]:t._e()],2),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("\n                "+t._s(t.$t("Federation"))+"\n                "),a("span",{attrs:{"data-tooltip":t.$t("Use this flag to enable/disable federation with this library")}},[a("i",{staticClass:"question circle icon"})])]),t._v(" "),a("td",[a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.object.federation_enabled,expression:"object.federation_enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.object.federation_enabled)?t._i(t.object.federation_enabled,null)>-1:t.object.federation_enabled},on:{change:[function(e){var a=t.object.federation_enabled,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&t.$set(t.object,"federation_enabled",a.concat([null])):n>-1&&t.$set(t.object,"federation_enabled",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.object,"federation_enabled",s)},function(e){t.update("federation_enabled")}]}}),t._v(" "),a("label")])]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("\n                "+t._s(t.$t("Auto importing"))+"\n                "),a("span",{attrs:{"data-tooltip":t.$t("When enabled, auto importing will automatically import new tracks published in this library")}},[a("i",{staticClass:"question circle icon"})])]),t._v(" "),a("td",[a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.object.autoimport,expression:"object.autoimport"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.object.autoimport)?t._i(t.object.autoimport,null)>-1:t.object.autoimport},on:{change:[function(e){var a=t.object.autoimport,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&t.$set(t.object,"autoimport",a.concat([null])):n>-1&&t.$set(t.object,"autoimport",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.object,"autoimport",s)},function(e){t.update("autoimport")}]}}),t._v(" "),a("label")])]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v(t._s(t.$t("Library size")))]),t._v(" "),a("td",[t.object.tracks_count?[t._v("\n                  "+t._s(t.$t("{%count%} tracks",{count:t.object.tracks_count}))+"\n                ")]:[t._v("\n                  "+t._s(t.$t("Unkwnown"))+"\n                ")]],2),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v(t._s(t.$t("Last fetched")))]),t._v(" "),a("td",[t.object.fetched_date?a("human-date",{attrs:{date:t.object.fetched_date}}):[t._v("Never")],t._v(" "),t.scanTrigerred?a("button",{staticClass:"ui success button"},[a("i",{staticClass:"check icon"}),t._v(" "+t._s(t.$t("Scan triggered!"))+"\n                ")]):a("button",{class:["ui","basic",{loading:t.isScanLoading},"button"],on:{click:t.scan}},[a("i",{staticClass:"sync icon"}),t._v(" "+t._s(t.$t("Trigger scan"))+"\n                ")])],2),t._v(" "),a("td")])])])]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("button",{staticClass:"ui basic button",on:{click:t.fetchData}},[t._v(t._s(t.$t("Refresh")))])]),t._v(" "),a("div",{staticClass:"ui vertical stripe segment"},[a("h2",[t._v(t._s(t.$t("Tracks available in this library")))]),t._v(" "),t.isLoading?t._e():a("library-track-table",{attrs:{filters:{library:t.id}}})],1)]:t._e()],2)},staticRenderFns:[]}},function(t,e,a){function i(t){a(615)}var s=a(1)(a(616),a(617),i,"data-v-3ca8fa66",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(5),r=a.n(n),o=a(4),l=a.n(o),c=a(3),u=a(26),d=a.n(u),v=a(31),p=a.n(v),f=a(108),h=a.n(f),m=a(8),_=a.n(m);e.default={mixins:[d.a,p.a],props:{defaultQuery:{type:String,required:!1,default:""}},components:{LibraryCard:h.a,Pagination:_.a},data:function(){var t=this.getOrderingFromString(this.defaultOrdering||"-creation_date");return{isLoading:!0,result:null,page:parseInt(this.defaultPage),query:this.defaultQuery,paginateBy:parseInt(this.defaultPaginateBy||50),orderingDirection:t.direction||"+",ordering:t.field,orderingOptions:[["creation_date","Creation date"],["tracks_count","Available tracks"]]}},created:function(){this.fetchData()},mounted:function(){l()(".ui.dropdown").dropdown(),l()(this.$el).find(".field .search").focus()},methods:{updateQueryString:r.a.debounce(function(){this.$router.replace({query:{query:this.query,page:this.page,paginateBy:this.paginateBy,ordering:this.getOrderingAsString()}})},500),fetchData:r.a.debounce(function(){var t=this;this.isLoading=!0;var e={page:this.page,q:this.query,ordering:this.getOrderingAsString()};c.a.default.debug("Fetching libraries"),s.a.get("federation/libraries/",{params:e}).then(function(e){t.result=e.data,t.isLoading=!1})},500),selectPage:function(t){this.page=t}},watch:{page:function(){this.updateQueryString(),this.fetchData()},ordering:function(){this.updateQueryString(),this.fetchData()},orderingDirection:function(){this.updateQueryString(),this.fetchData()},query:function(){this.updateQueryString(),this.fetchData()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Libraries",expression:"'Libraries'"}]},[a("div",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.$t("Browsing libraries")))]),t._v(" "),a("router-link",{staticClass:"ui basic green button",attrs:{to:{name:"federation.libraries.scan"}}},[a("i",{staticClass:"plus icon"}),t._v("\n      "+t._s(t.$t("Add a new library"))+"\n    ")]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("div",{class:["ui",{loading:t.isLoading},"form"]},[a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Search")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"search",attrs:{type:"text",placeholder:"Enter an library domain name..."},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Ordering")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ordering,expression:"ordering"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ordering=e.target.multiple?a:a[0]}}},t._l(t.orderingOptions,function(e){return a("option",{domProps:{value:e[0]}},[t._v("\n              "+t._s(e[1])+"\n            ")])}))]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Ordering direction")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderingDirection,expression:"orderingDirection"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderingDirection=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"+"}},[t._v(t._s(t.$t("Ascending")))]),t._v(" "),a("option",{attrs:{value:"-"}},[t._v(t._s(t.$t("Descending")))])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v(t._s(t.$t("Results per page")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.paginateBy,expression:"paginateBy"}],staticClass:"ui dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.paginateBy=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:parseInt(12)}},[t._v("12")]),t._v(" "),a("option",{domProps:{value:parseInt(25)}},[t._v("25")]),t._v(" "),a("option",{domProps:{value:parseInt(50)}},[t._v("50")])])])])]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),t.result?a("div",{directives:[{name:"masonry",rawName:"v-masonry"}],staticClass:"ui stackable three column doubling grid",attrs:{"transition-duration":"0","item-selector":".column","percent-position":"true",stagger:"0"}},t._l(t.result.results,function(e){return t.result.results.length>0?a("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:e.id,staticClass:"column"},[a("library-card",{staticClass:"fluid",attrs:{"library-instance":e}})],1):t._e()})):t._e(),t._v(" "),a("div",{staticClass:"ui center aligned basic segment"},[t.result&&t.result.results.length>0?a("pagination",{attrs:{current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1)],1)])},staticRenderFns:[]}},function(t,e,a){function i(t){a(619)}var s=a(1)(a(620),a(621),i,"data-v-cb4eb32c",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(109),s=a.n(i);e.default={components:{LibraryTrackTable:s.a}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Federated tracks",expression:"'Federated tracks'"}]},[a("div",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.$t("Browsing federated tracks")))]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("library-track-table",{attrs:{"show-library":!0}})],1)])},staticRenderFns:[]}},function(t,e,a){function i(t){a(623)}var s=a(1)(a(624),a(628),i,"data-v-399a22b4",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(625),s=a.n(i);e.default={components:{LibraryFollowTable:s.a}}},function(t,e,a){var i=a(1)(a(626),a(627),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(2),s=a.n(i),n=a(5),r=a.n(n),o=a(8),l=a.n(o);e.default={props:{filters:{type:Object,required:!1,default:function(){}}},components:{Pagination:l.a},data:function(){return{isLoading:!1,result:null,page:1,paginateBy:25,search:"",pending:!1}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=r.a.merge({page:this.page,page_size:this.paginateBy,q:this.search},this.filters);this.pending&&(t.pending=!0);var e=this;e.isLoading=!0,s.a.get("/federation/libraries/followers/",{params:t}).then(function(t){e.result=t.data,e.isLoading=!1},function(t){e.isLoading=!1,e.errors=t.backendErrors})},selectPage:function(t){this.page=t},updateFollow:function(t,e){var a={follow:t.id,approved:e},i=this;s.a.patch("/federation/libraries/followers/",a).then(function(e){t.approved=e.data.approved,i.isLoading=!1},function(t){i.isLoading=!1,i.errors=t.backendErrors})}},watch:{search:function(t){t.length>0&&this.fetchData()},page:function(){this.fetchData()},pending:function(){this.fetchData()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"ui six wide field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search by username, domain..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"ui four wide inline field"},[a("div",{staticClass:"ui checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pending,expression:"pending"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.pending)?t._i(t.pending,null)>-1:t.pending},on:{change:function(e){var a=t.pending,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&(t.pending=a.concat([null])):n>-1&&(t.pending=a.slice(0,n).concat(a.slice(n+1)))}else t.pending=s}}}),t._v(" "),a("label",[a("i18next",{attrs:{path:"Pending approval"}})],1)])])])]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),t.result?a("table",{staticClass:"ui very basic single line unstackable table"},[a("thead",[a("tr",[a("i18next",{attrs:{tag:"th",path:"Actor"}}),t._v(" "),a("i18next",{attrs:{tag:"th",path:"Creation date"}}),t._v(" "),a("i18next",{attrs:{tag:"th",path:"Status"}}),t._v(" "),a("i18next",{attrs:{tag:"th",path:"Actions"}})],1)]),t._v(" "),a("tbody",t._l(t.result.results,function(e){return a("tr",[a("td",[t._v("\n          "+t._s(e.actor.preferred_username)+"@"+t._s(e.actor.domain)+"\n        ")]),t._v(" "),a("td",[a("human-date",{attrs:{date:e.creation_date}})],1),t._v(" "),a("td",[!0===e.approved?[a("i",{staticClass:"check icon"}),a("i18next",{attrs:{path:"Approved"}})]:!1===e.approved?[a("i",{staticClass:"x icon"}),a("i18next",{attrs:{path:"Refused"}})]:[a("i",{staticClass:"clock icon"}),a("i18next",{attrs:{path:"Pending"}})]],2),t._v(" "),a("td",[!1!==e.approved?a("dangerous-button",{staticClass:"tiny basic labeled icon",attrs:{color:"red"},on:{confirm:function(a){t.updateFollow(e,!1)}}},[a("i",{staticClass:"x icon"}),a("i18next",{attrs:{path:"Deny"}}),t._v(" "),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("i18next",{attrs:{path:"Deny access?"}})],1),t._v(" "),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("i18next",{attrs:{path:"By confirming, {%0%}@{%1%} will be denied access to your library."}},[t._v("\n                "+t._s(e.actor.preferred_username)+"\n                "+t._s(e.actor.domain)+"\n              ")])],1),t._v(" "),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("i18next",{attrs:{path:"Deny"}})],1)],1):t._e(),t._v(" "),!0!==e.approved?a("dangerous-button",{staticClass:"tiny basic labeled icon",attrs:{color:"green"},on:{confirm:function(a){t.updateFollow(e,!0)}}},[a("i",{staticClass:"check icon"}),t._v(" "),a("i18next",{attrs:{path:"Approve"}}),t._v(" "),a("p",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("i18next",{attrs:{path:"Approve access?"}})],1),t._v(" "),a("p",{attrs:{slot:"modal-content"},slot:"modal-content"},[a("i18next",{attrs:{path:"By confirming, {%0%}@{%1%} will be granted access to your library."}},[t._v("\n                "+t._s(e.actor.preferred_username)+"\n                "+t._s(e.actor.domain)+"\n              ")])],1),a("p",{attrs:{slot:"modal-confirm"},slot:"modal-confirm"},[a("i18next",{attrs:{path:"Approve"}})],1)],1):t._e()],1)])})),t._v(" "),a("tfoot",{staticClass:"full-width"},[a("tr",[a("th",[t.result&&t.result.results.length>0?a("pagination",{attrs:{compact:!0,current:t.page,"paginate-by":t.paginateBy,total:t.result.count},on:{"page-changed":t.selectPage}}):t._e()],1),t._v(" "),t.result&&t.result.results.length>0?a("th",[a("i18next",{attrs:{path:"Showing results {%0%}-{%1%} on {%2%}"}},[t._v("\n            "+t._s((t.page-1)*t.paginateBy+1)+"\n            "+t._s((t.page-1)*t.paginateBy+t.result.results.length)+"\n            "+t._s(t.result.count)+"\n          ")])],1):t._e(),t._v(" "),a("th"),t._v(" "),a("th")])])]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"title",rawName:"v-title",value:"Followers",expression:"'Followers'"}]},[a("div",{staticClass:"ui vertical stripe segment"},[a("h2",{staticClass:"ui header"},[t._v(t._s(t.$t("Browsing followers")))]),t._v(" "),a("p",[t._v("\n      "+t._s(t.$t("Be careful when accepting follow requests, as it means the follower will have access to your entire library."))+"\n    ")]),t._v(" "),a("div",{staticClass:"ui hidden divider"}),t._v(" "),a("library-follow-table")],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui fluid category search"},[t._t("default"),t._m(0),t._v(" "),a("div",{staticClass:"results"}),t._v(" "),t._t("after")],2)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui icon input"},[a("input",{staticClass:"prompt",attrs:{placeholder:"Search for artists, albums, tracks...",type:"text"}}),t._v(" "),a("i",{staticClass:"search icon"})])}]}},function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["ui","vertical","left","visible","wide",{collapsed:t.isCollapsed},"sidebar"]},[i("div",{staticClass:"ui inverted segment header-wrapper"},[i("search-bar",{on:{search:function(e){t.isCollapsed=!1}}},[i("router-link",{attrs:{title:"Funkwhale",to:{name:"index"}}},[i("i",{staticClass:"logo bordered inverted orange big icon"},[i("logo",{staticClass:"logo"})],1)]),i("span",{class:["ui","basic","big",{inverted:t.isCollapsed},"orange","icon","collapse","button"],attrs:{slot:"after"},on:{click:function(e){t.isCollapsed=!t.isCollapsed}},slot:"after"},[i("i",{staticClass:"sidebar icon"})])],1)],1),t._v(" "),i("div",{staticClass:"menu-area"},[i("div",{staticClass:"ui compact fluid two item inverted menu"},[i("a",{staticClass:"active item",attrs:{"data-tab":"library"},on:{click:function(e){t.selectedTab="library"}}},[t._v("Browse")]),t._v(" "),i("a",{staticClass:"item",attrs:{"data-tab":"queue"},on:{click:function(e){t.selectedTab="queue"}}},[t._v("\n        "+t._s(t.$t("Queue"))+"\n         "),0===t.queue.tracks.length?[t._v("\n           "+t._s(t.$t("(empty)"))+"\n         ")]:[t._v("\n           "+t._s(t.$t("({%index%} of {%length%})",{index:t.queue.currentIndex+1,length:t.queue.tracks.length}))+"\n         ")]],2)])]),t._v(" "),i("div",{staticClass:"tabs"},[i("div",{staticClass:"ui bottom attached active tab",attrs:{"data-tab":"library"}},[i("div",{staticClass:"ui inverted vertical large fluid menu"},[i("div",{staticClass:"item"},[i("div",{staticClass:"header"},[t._v(t._s(t.$t("My account")))]),t._v(" "),i("div",{staticClass:"menu"},[t.$store.state.auth.authenticated?i("router-link",{staticClass:"item",attrs:{to:{name:"profile",params:{username:t.$store.state.auth.username}}}},[i("i",{staticClass:"user icon"}),t._v(t._s(t.$t("Logged in as {%name%}",{name:t.$store.state.auth.username})))]):t._e(),t._v(" "),t.$store.state.auth.authenticated?i("router-link",{staticClass:"item",attrs:{to:{name:"logout"}}},[i("i",{staticClass:"sign out icon"}),t._v(t._s(t.$t("Logout")))]):i("router-link",{staticClass:"item",attrs:{to:{name:"login"}}},[i("i",{staticClass:"sign in icon"}),t._v(t._s(t.$t("Login")))])],1)]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"header"},[t._v(t._s(t.$t("Music")))]),t._v(" "),i("div",{staticClass:"menu"},[i("router-link",{staticClass:"item",attrs:{to:{path:"/library"}}},[i("i",{staticClass:"sound icon"}),t._v(t._s(t.$t("Browse library")))]),t._v(" "),t.$store.state.auth.authenticated?i("router-link",{staticClass:"item",attrs:{to:{path:"/favorites"}}},[i("i",{staticClass:"heart icon"}),t._v(t._s(t.$t("Favorites")))]):t._e(),t._v(" "),t.$store.state.auth.authenticated?i("a",{staticClass:"item",on:{click:function(e){t.$store.commit("playlists/chooseTrack",null)}}},[i("i",{staticClass:"list icon"}),t._v(t._s(t.$t("Playlists"))+"\n            ")]):t._e(),t._v(" "),t.$store.state.auth.authenticated?i("router-link",{staticClass:"item",attrs:{to:{path:"/activity"}}},[i("i",{staticClass:"bell icon"}),t._v(t._s(t.$t("Activity")))]):t._e()],1)]),t._v(" "),t.showAdmin?i("div",{staticClass:"item"},[i("div",{staticClass:"header"},[t._v(t._s(t.$t("Administration")))]),t._v(" "),i("div",{staticClass:"menu"},[t.$store.state.auth.availablePermissions.library?i("router-link",{staticClass:"item",attrs:{to:{name:"library.requests",query:{status:"pending"}}}},[i("i",{staticClass:"download icon"}),t._v(t._s(t.$t("Import requests"))+"\n              "),i("div",{class:["ui",{teal:t.notifications.importRequests>0},"label"],attrs:{title:t.$t("Pending import requests")}},[t._v("\n                "+t._s(t.notifications.importRequests))])]):t._e(),t._v(" "),t.$store.state.auth.availablePermissions.library?i("router-link",{staticClass:"item",attrs:{to:{name:"manage.library.files"}}},[i("i",{staticClass:"book icon"}),t._v(t._s(t.$t("Library"))+"\n            ")]):t.$store.state.auth.availablePermissions.upload?i("router-link",{staticClass:"item",attrs:{to:"/library/import/launch"}},[i("i",{staticClass:"download icon"}),t._v(t._s(t.$t("Import music"))+"\n            ")]):t._e(),t._v(" "),t.$store.state.auth.availablePermissions.federation?i("router-link",{staticClass:"item",attrs:{to:{path:"/manage/federation/libraries"}}},[i("i",{staticClass:"sitemap icon"}),t._v(t._s(t.$t("Federation"))+"\n              "),i("div",{class:["ui",{teal:t.notifications.federation>0},"label"],attrs:{title:t.$t("Pending follow requests")}},[t._v("\n                "+t._s(t.notifications.federation))])]):t._e(),t._v(" "),t.$store.state.auth.availablePermissions.settings?i("router-link",{staticClass:"item",attrs:{to:{path:"/manage/settings"}}},[i("i",{staticClass:"settings icon"}),t._v(t._s(t.$t("Settings"))+"\n            ")]):t._e()],1)]):t._e()])]),t._v(" "),t.queue.previousQueue?i("div",{staticClass:"ui black icon message"},[i("i",{staticClass:"history icon"}),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"header"},[t._v("\n          "+t._s(t.$t("Do you want to restore your previous queue?"))+"\n        ")]),t._v(" "),i("p",[t._v(t._s(t.$t("{%count%} tracks",{count:t.queue.previousQueue.tracks.length})))]),t._v(" "),i("div",{staticClass:"ui two buttons"},[i("div",{staticClass:"ui basic inverted green button",on:{click:function(e){t.queue.restore()}}},[t._v(t._s(t.$t("Yes")))]),t._v(" "),i("div",{staticClass:"ui basic inverted red button",on:{click:function(e){t.queue.removePrevious()}}},[t._v(t._s(t.$t("No")))])])])]):t._e(),t._v(" "),i("div",{staticClass:"ui bottom attached tab",attrs:{"data-tab":"queue"}},[i("table",{staticClass:"ui compact inverted very basic fixed single line unstackable table"},[i("draggable",{attrs:{element:"tbody"},on:{update:t.reorder},model:{value:t.queue.tracks,callback:function(e){t.$set(t.queue,"tracks",e)},expression:"queue.tracks"}},t._l(t.queue.tracks,function(e,s){return i("tr",{key:s,class:[{active:s===t.queue.currentIndex}],on:{click:function(e){t.$store.dispatch("queue/currentIndex",s)}}},[i("td",{staticClass:"right aligned"},[t._v(t._s(s+1))]),t._v(" "),i("td",{staticClass:"center aligned"},[e.album.cover?i("img",{staticClass:"ui mini image",attrs:{src:t.backend.absoluteUrl(e.album.cover)}}):i("img",{staticClass:"ui mini image",attrs:{src:a(30)}})]),t._v(" "),i("td",{attrs:{colspan:"4"}},[i("strong",[t._v(t._s(e.title))]),i("br"),t._v("\n                  "+t._s(e.artist.name)+"\n              ")]),t._v(" "),i("td",[t.$store.getters["favorites/isFavorite"](e.id)?[i("i",{staticClass:"pink heart icon"})]:t._e()],2),t._v(" "),i("td",[i("i",{staticClass:"circular trash icon",on:{click:function(e){e.stopPropagation(),t.cleanTrack(s)}}})])])}))],1),t._v(" "),t.$store.state.radios.running?i("div",{staticClass:"ui black message"},[i("div",{staticClass:"content"},[i("div",{staticClass:"header"},[i("i",{staticClass:"feed icon"}),t._v(" "+t._s(t.$t("You have a radio playing"))+"\n          ")]),t._v(" "),i("p",[t._v(t._s(t.$t("New tracks will be appended here automatically.")))]),t._v(" "),i("div",{staticClass:"ui basic inverted red button",on:{click:function(e){t.$store.dispatch("radios/stop")}}},[t._v(t._s(t.$t("Stop radio")))])])]):t._e()])]),t._v(" "),i("player",{on:{next:t.scrollToCurrent,previous:t.scrollToCurrent}})],1)},staticRenderFns:[]}},function(t,e,a){function i(t){a(632)}var s=a(1)(a(633),a(641),i,"data-v-1f21bfb6",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(634),s=a.n(i),n=a(640),r=a.n(n),o=a(11),l=a(3);e.default={props:["dsn"],created:function(){s.a.uninstall(),this.setUp()},destroyed:function(){s.a.uninstall()},methods:{setUp:function(){s.a.uninstall(),l.a.default.info("Installing raven..."),s.a.config(this.dsn).addPlugin(r.a,o.a).install()}},watch:{dsn:function(){this.setUp()}}}},,,,,,,,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"raven"})},staticRenderFns:[]}},function(t,e,a){function i(t){a(643)}var s=a(1)(a(644),a(645),i,"data-v-28802df3",null);t.exports=s.exports},function(t,e){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(17),s=a.n(i),n=a(5),r=a.n(n),o=a(2),l=a.n(o),c=a(13),u=a(3),d=a(49),v=a.n(d),p=a(105),f=a.n(p);e.default={components:{Modal:v.a,PlaylistForm:f.a},data:function(){return{errors:[]}},methods:{update:function(t){this.$store.commit("playlists/showModal",t)},addToPlaylist:function(t){var e=this,a={track:this.track.id,playlist:t};return l.a.post("playlist-tracks/",a).then(function(t){u.a.default.info("Successfully added track to playlist"),e.update(!1),e.$store.dispatch("playlists/fetchOwn")},function(t){u.a.default.error("Error while adding track to playlist"),e.errors=t.backendErrors})}},computed:s()({},Object(c.d)({playlists:function(t){return t.playlists.playlists},track:function(t){return t.playlists.modalTrack}}),{sortedPlaylists:function(){var t=r.a.sortBy(this.playlists,[function(t){return t.modification_date}]);return t.reverse(),t},trackDisplay:function(){return this.$t('"{%title%}" by {%artist%}',{title:this.track.title,artist:this.track.artist.name})}}),watch:{"$store.state.route.path":function(){this.$store.commit("playlists/showModal",!1)}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{show:t.$store.state.playlists.showModal},on:{"update:show":t.update}},[a("div",{staticClass:"header"},[t._v("\n    "+t._s(t.$t("Manage playlists"))+"\n  ")]),t._v(" "),a("div",{staticClass:"scrolling content"},[a("div",{staticClass:"description"},[t.track?[a("h4",{staticClass:"ui header"},[t._v(t._s(t.$t("Current track")))]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.trackDisplay)}}),t._v(" "),a("div",{staticClass:"ui divider"})]:t._e(),t._v(" "),a("playlist-form"),t._v(" "),a("div",{staticClass:"ui divider"}),t._v(" "),t.errors.length>0?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[t._v(t._s(t.$t("We cannot add the track to a playlist")))]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}))]):t._e()],2),t._v(" "),a("h4",{staticClass:"ui header"},[t._v(t._s(t.$t("Available playlists")))]),t._v(" "),a("table",{staticClass:"ui unstackable very basic table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",{staticClass:"sorted descending"},[t._v(t._s(t.$t("Last modification")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Tracks")))]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.sortedPlaylists,function(e){return a("tr",[a("td",[a("router-link",{staticClass:"ui icon basic small button",attrs:{to:{name:"library.playlists.detail",params:{id:e.id},query:{mode:"edit"}}}},[a("i",{staticClass:"ui pencil icon"})])],1),t._v(" "),a("td",[a("router-link",{attrs:{to:{name:"library.playlists.detail",params:{id:e.id}}}},[t._v(t._s(e.name))])],1),t._v(" "),a("td",[a("human-date",{attrs:{date:e.modification_date}})],1),t._v(" "),a("td",[t._v(t._s(e.tracks_count))]),t._v(" "),a("td",[t.track?a("div",{staticClass:"ui green icon basic small right floated button",attrs:{title:t.$t("Add to this playlist")},on:{click:function(a){t.addToPlaylist(e.id)}}},[a("i",{staticClass:"plus icon"}),t._v(" "+t._s(t.$t("Add track"))+"\n              ")]):t._e()])])}))])]),t._v(" "),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui cancel button"},[t._v(t._s(t.$t("Cancel")))])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("sidebar"),t._v(" "),a("router-view",{key:t.$route.fullPath}),t._v(" "),a("div",{staticClass:"ui fitted divider"}),t._v(" "),a("div",{staticClass:"ui vertical footer segment",attrs:{id:"footer"}},[a("div",{staticClass:"ui container"},[a("div",{staticClass:"ui stackable equal height stackable grid"},[a("div",{staticClass:"three wide column"},[a("i18next",{staticClass:"ui header",attrs:{tag:"h4",path:"Links"}}),t._v(" "),a("div",{staticClass:"ui link list"},[a("router-link",{staticClass:"item",attrs:{to:"/about"}},[a("i18next",{attrs:{path:"About this instance"}})],1),t._v(" "),a("a",{staticClass:"item",attrs:{href:"https://funkwhale.audio",target:"_blank"}},[t._v(t._s(t.$t("Official website")))]),t._v(" "),a("a",{staticClass:"item",attrs:{href:"https://docs.funkwhale.audio",target:"_blank"}},[t._v(t._s(t.$t("Documentation")))]),t._v(" "),a("a",{staticClass:"item",attrs:{href:"https://code.eliotberriot.com/funkwhale/funkwhale",target:"_blank"}},[t.version?[t._v(t._s(t.$t("Source code ({% version %})",{version:t.version})))]:[t._v(t._s(t.$t("Source code")))]],2),t._v(" "),a("a",{staticClass:"item",attrs:{href:"https://code.eliotberriot.com/funkwhale/funkwhale/issues",target:"_blank"}},[t._v(t._s(t.$t("Issue tracker")))])],1)],1),t._v(" "),a("div",{staticClass:"ten wide column"},[a("i18next",{staticClass:"ui header",attrs:{tag:"h4",path:"About funkwhale"}}),t._v(" "),a("p",[a("i18next",{attrs:{path:"Funkwhale is a free and open-source project run by volunteers. You can help us improve the platform by reporting bugs, suggesting features and share the project with your friends!"}})],1),t._v(" "),a("p",[a("i18next",{attrs:{path:"The funkwhale logo was kindly designed and provided by Francis Gading."}})],1)],1)])])]),t._v(" "),t.$store.state.instance.settings.raven.front_enabled.value?a("raven",{attrs:{dsn:t.$store.state.instance.settings.raven.front_dsn.value}}):t._e(),t._v(" "),t.$store.state.auth.authenticated?a("playlist-modal"):t._e()],1)},staticRenderFns:[]}},,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";var i=a(11),s=a(13),n=a(670),r=a(673),o=a(674),l=a(678),c=a(679),u=a(680),d=a(681),v=a(682),p=a(683);i.a.use(s.a),e.a=new s.a.Store({modules:{ui:p.a,auth:o.a,favorites:r.a,instance:l.a,queue:c.a,radios:u.a,playlists:v.a,player:d.a},plugins:[Object(n.a)({key:"auth",paths:["auth"],filter:function(t){return t.type.startsWith("auth/")}}),Object(n.a)({key:"instance",paths:["instance.events"]}),Object(n.a)({key:"radios",paths:["radios"],filter:function(t){return t.type.startsWith("radios/")}}),Object(n.a)({key:"player",paths:["player.looping","player.volume","player.duration","player.errored"],filter:function(t){return t.type.startsWith("player/")&&"player/currentTime"!==t.type}}),Object(n.a)({key:"queue",filter:function(t){return t.type.startsWith("queue/")},reducer:function(t){return{queue:{currentIndex:t.queue.currentIndex,tracks:t.queue.tracks.map(function(t){var e={id:t.artist.id,mbid:t.artist.mbid,name:t.artist.name};return{id:t.id,title:t.title,mbid:t.mbid,album:{id:t.album.id,title:t.album.title,mbid:t.album.mbid,cover:t.album.cover,artist:e},artist:e,files:t.files}})}}}})]})},,,,function(t,e,a){"use strict";var i=a(2),s=a.n(i),n=a(3);e.a={namespaced:!0,state:{tracks:[],count:0},mutations:{track:function(t,e){var a=e.id;if(e.value)-1===t.tracks.indexOf(a)&&t.tracks.push(a);else{var i=t.tracks.indexOf(a);i>-1&&t.tracks.splice(i,1)}t.count=t.tracks.length},reset:function(t){t.tracks=[],t.count=0}},getters:{isFavorite:function(t){return function(e){return t.tracks.indexOf(e)>-1}}},actions:{set:function(t,e){var a=t.commit,i=(t.state,e.id),r=e.value;return a("track",{id:i,value:r}),r?s.a.post("favorites/tracks/",{track:i}).then(function(t){n.a.default.info("Successfully added track to favorites")},function(t){n.a.default.info("Error while adding track to favorites"),a("track",{id:i,value:!r})}):s.a.post("favorites/tracks/remove/",{track:i}).then(function(t){n.a.default.info("Successfully removed track from favorites")},function(t){n.a.default.info("Error while removing track from favorites"),a("track",{id:i,value:!r})})},toggle:function(t,e){var a=t.getters;(0,t.dispatch)("set",{id:e,value:!a.isFavorite(e)})},fetch:function(t,e){var a=t.dispatch,i=(t.state,t.commit);return e=e||"favorites/tracks/",s.a.get(e).then(function(t){n.a.default.info("Fetched a batch of "+t.data.results.length+" favorites"),t.data.results.forEach(function(t){i("track",{id:t.track,value:!0})}),t.data.next&&a("fetch",t.data.next)})}}}},function(t,e,a){"use strict";var i=a(95),s=a.n(i),n=a(2),r=a.n(n),o=a(675),l=a.n(o),c=a(3),u=a(37);e.a={namespaced:!0,state:{authenticated:!1,username:"",availablePermissions:{},profile:null,token:"",tokenData:{}},getters:{header:function(t){return"JWT "+t.token}},mutations:{reset:function(t){t.authenticated=!1,t.profile=null,t.username="",t.token="",t.tokenData={},t.availablePermissions={}},profile:function(t,e){t.profile=e},authenticated:function(t,e){t.authenticated=e,!1===e&&(t.username=null,t.token=null,t.tokenData=null,t.profile=null,t.availablePermissions={})},username:function(t,e){t.username=e},token:function(t,e){t.token=e,t.tokenData=e?l()(e):{}},permission:function(t,e){var a=e.key,i=e.status;t.availablePermissions[a]=i}},actions:{login:function(t,e){var a=t.commit,i=t.dispatch,s=e.next,n=e.credentials,o=e.onError;return r.a.post("token/",n).then(function(t){c.a.default.info("Successfully logged in as",n.username),a("token",t.data.token),i("fetchProfile"),u.a.push(s)},function(t){c.a.default.error("Error while logging in",t.data),o(t)})},logout:function(t){var e=t.commit;["auth","favorites","player","playlists","queue","radios"].forEach(function(t){e(t+"/reset",null,{root:!0})}),c.a.default.info("Log out, goodbye!"),u.a.push({name:"index"})},check:function(t){var e=t.commit,a=t.dispatch,i=t.state;c.a.default.info("Checking authentication...");var s=i.token;s?(e("token",s),a("fetchProfile"),a("refreshToken")):(c.a.default.info("Anonymous user"),e("authenticated",!1))},fetchProfile:function(t){var e=t.commit,a=t.dispatch;t.state;return document&&(document.cookie="sessionid=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"),r.a.get("users/users/me/").then(function(t){c.a.default.info("Successfully fetched user profile");var i=t.data;return e("authenticated",!0),e("profile",i),e("username",i.username),a("favorites/fetch",null,{root:!0}),a("playlists/fetchOwn",null,{root:!0}),s()(i.permissions).forEach(function(t){e("permission",{key:t,status:i.permissions[String(t)]})}),t.data},function(t){c.a.default.info("Error while fetching user profile")})},refreshToken:function(t){var e=t.commit,a=(t.dispatch,t.state);return r.a.post("token/refresh/",{token:a.token}).then(function(t){c.a.default.info("Refreshed auth token"),e("token",t.data.token)},function(t){c.a.default.error("Error while refreshing token",t.data)})}}}},,,,function(t,e,a){"use strict";var i=a(2),s=a.n(i),n=a(3),r=a(5),o=a.n(r);e.a={namespaced:!0,state:{maxEvents:200,events:[],settings:{instance:{name:{value:""},short_description:{value:""},long_description:{value:""}},users:{registration_enabled:{value:!0}},subsonic:{enabled:{value:!0}},raven:{front_enabled:{value:!1},front_dsn:{value:null}}}},mutations:{settings:function(t,e){o.a.merge(t.settings,e)},event:function(t,e){t.events.unshift(e),t.events.length>t.maxEvents&&(t.events=t.events.slice(0,t.maxEvents))},events:function(t,e){t.events=e}},actions:{fetchSettings:function(t,e){var a=t.commit;return s.a.get("instance/settings/").then(function(t){n.a.default.info("Successfully fetched instance settings");var i={};t.data.forEach(function(t){i[t.section]={}}),t.data.forEach(function(t){i[t.section][t.name]=t}),a("settings",i),e&&e.callback&&e.callback()},function(t){n.a.default.error("Error while fetching settings",t.data)})}}}},function(t,e,a){"use strict";var i=a(3),s=a(5),n=a.n(s);e.a={namespaced:!0,state:{tracks:[],currentIndex:-1,ended:!0,previousQueue:null},mutations:{reset:function(t){t.tracks=[],t.currentIndex=-1,t.ended=!0,t.previousQueue=null},currentIndex:function(t,e){t.currentIndex=e},ended:function(t,e){t.ended=e},splice:function(t,e){var a=e.start,i=e.size;t.tracks.splice(a,i)},tracks:function(t,e){t.tracks=e},insert:function(t,e){var a=e.track,i=e.index;t.tracks.splice(i,0,a)},reorder:function(t,e){var a=e.oldIndex,i=e.newIndex;if(a===t.currentIndex)return void(t.currentIndex=i);a<t.currentIndex&&i>=t.currentIndex&&(t.currentIndex-=1),a>t.currentIndex&&i<=t.currentIndex&&(t.currentIndex+=1)}},getters:{currentTrack:function(t){return t.tracks[t.currentIndex]},hasNext:function(t){return t.currentIndex<t.tracks.length-1},isEmpty:function(t){return 0===t.tracks.length}},actions:{append:function(t,e){var a=t.commit,i=t.state,s=t.dispatch,n=e.track,r=e.index,o=e.skipPlay;r=r||i.tracks.length,r>i.tracks.length-1?a("insert",{track:n,index:i.tracks.length}):a("insert",{track:n,index:r}),o||s("resume")},appendMany:function(t,e){var a=t.state,s=t.dispatch,n=e.tracks,r=e.index;i.a.default.info("Appending many tracks to the queue",n.map(function(t){return t.title})),r=0===a.tracks.length?0:r||a.tracks.length,n.forEach(function(t){s("append",{track:t,index:r,skipPlay:!0}),r+=1}),s("resume")},cleanTrack:function(t,e){var a=t.state,i=t.dispatch,s=t.commit,n=e===a.currentIndex;n&&i("player/stop",null,{root:!0}),s("splice",{start:e,size:1}),e<a.currentIndex&&s("currentIndex",a.currentIndex-1),n&&i("currentIndex",e),a.currentIndex+1===a.tracks.length&&i("radios/populateQueue",null,{root:!0})},resume:function(t){var e=t.state,a=t.dispatch,i=t.rootState;e.ended|i.player.errored&&a("next")},previous:function(t){var e=t.state,a=t.dispatch,i=t.rootState;e.currentIndex>0&&i.player.currentTime<3?a("currentIndex",e.currentIndex-1):a("currentIndex",e.currentIndex)},next:function(t){var e=t.state,a=t.dispatch,s=t.commit;return 2===t.rootState.player.looping&&e.currentIndex>=e.tracks.length-1?(i.a.default.info("Going back to the beginning of the queue"),a("currentIndex",0)):e.currentIndex<e.tracks.length-1?(i.a.default.debug("Playing next track"),a("currentIndex",e.currentIndex+1)):void s("ended",!0)},currentIndex:function(t,e){var a=t.commit,i=t.state,s=t.rootState,n=t.dispatch;a("ended",!1),a("player/currentTime",0,{root:!0}),a("player/playing",!0,{root:!0}),a("player/errored",!1,{root:!0}),a("currentIndex",e),i.tracks.length-e<=2&&s.radios.running&&n("radios/populateQueue",null,{root:!0})},clean:function(t){var e=t.dispatch,a=t.commit;e("radios/stop",null,{root:!0}),e("player/stop",null,{root:!0}),a("tracks",[]),e("currentIndex",-1),a("ended",!0)},shuffle:function(t){var e=t.dispatch,a=t.commit,i=t.state,s=i.tracks.slice(0,i.currentIndex+1),r=i.tracks.slice(i.currentIndex+1),o=s.concat(n.a.shuffle(r));a("player/currentTime",0,{root:!0}),a("tracks",[]),e("appendMany",{tracks:o})}}}},function(t,e,a){"use strict";var i=a(2),s=a.n(i),n=a(3);e.a={namespaced:!0,state:{current:null,running:!1},getters:{types:function(t){return{random:{name:"Random",description:"Totally random picks, maybe you'll discover new things?"},favorites:{name:"Favorites",description:"Play your favorites tunes in a never-ending happiness loop."},"less-listened":{name:"Less listened",description:"Listen to tracks you usually don't. It's time to restore some balance."}}}},mutations:{reset:function(t){t.running=!1,t.current=!1},current:function(t,e){t.current=e},running:function(t,e){t.running=e}},actions:{start:function(t,e){var a=t.commit,i=t.dispatch,r=e.type,o=e.objectId,l=e.customRadioId,c={radio_type:r,related_object_id:o,custom_radio:l};return s.a.post("radios/sessions/",c).then(function(t){n.a.default.info("Successfully started radio ",r),a("current",{type:r,objectId:o,session:t.data.id,customRadioId:l}),a("running",!0),i("populateQueue")},function(t){n.a.default.error("Error while starting radio",r)})},stop:function(t){var e=t.commit;e("current",null),e("running",!1)},populateQueue:function(t){var e=t.rootState,a=t.state,i=t.dispatch;if(a.running&&!(e.player.errorCount>=e.player.maxConsecutiveErrors-1)){var r={session:a.current.session};return s.a.post("radios/tracks/",r).then(function(t){n.a.default.info("Adding track to queue from radio"),i("queue/append",{track:t.data.track},{root:!0})},function(t){n.a.default.error("Error while adding track to queue from radio")})}}}}},function(t,e,a){"use strict";var i=a(2),s=a.n(i),n=a(3),r=a(32);e.a={namespaced:!0,state:{maxConsecutiveErrors:5,errorCount:0,playing:!1,volume:.5,duration:0,currentTime:0,errored:!1,looping:0},mutations:{reset:function(t){t.errorCount=0,t.playing=!1},volume:function(t,e){e=parseFloat(e),e=Math.min(e,1),e=Math.max(e,0),t.volume=e},incrementVolume:function(t,e){e=parseFloat(t.volume+e),e=Math.min(e,1),e=Math.max(e,0),t.volume=e},incrementErrorCount:function(t){t.errorCount+=1},resetErrorCount:function(t){t.errorCount=0},duration:function(t,e){t.duration=e},errored:function(t,e){t.errored=e},currentTime:function(t,e){t.currentTime=e},looping:function(t,e){t.looping=e},playing:function(t,e){t.playing=e},toggleLooping:function(t){t.looping>1?t.looping=0:t.looping+=1}},getters:{durationFormatted:function(t){var e=parseInt(t.duration);return e%1!=0?r.a.parse(0):(e=Math.round(t.duration),r.a.parse(e))},currentTimeFormatted:function(t){return r.a.parse(Math.round(t.currentTime))},progress:function(t){return Math.round(t.currentTime/t.duration*100)}},actions:{incrementVolume:function(t,e){(0,t.commit)("volume",t.state.volume+e)},stop:function(t){},togglePlay:function(t){(0,t.commit)("playing",!t.state.playing)},trackListened:function(t,e){t.commit;if(t.rootState.auth.authenticated)return s.a.post("history/listenings/",{track:e.id}).then(function(t){},function(t){n.a.default.error("Could not record track in history")})},trackEnded:function(t,e){var a=t.dispatch,i=t.rootState;a("trackListened",e);var s=i.queue;s.currentIndex===s.tracks.length-1&&a("radios/populateQueue",null,{root:!0}),a("queue/next",null,{root:!0})},trackErrored:function(t){var e=t.commit,a=t.dispatch;t.state;e("errored",!0),e("incrementErrorCount"),a("queue/next",null,{root:!0})},updateProgress:function(t,e){(0,t.commit)("currentTime",e)}}}},function(t,e,a){"use strict";var i=a(2),s=a.n(i);e.a={namespaced:!0,state:{playlists:[],showModal:!1,modalTrack:null},mutations:{playlists:function(t,e){t.playlists=e},chooseTrack:function(t,e){t.showModal=!0,t.modalTrack=e},showModal:function(t,e){t.showModal=e},reset:function(t){t.playlists=[],t.modalTrack=null,t.showModal=!1}},actions:{fetchOwn:function(t){var e=t.commit,a=t.rootState,i=a.auth.profile.id;if(i)return s.a.get("playlists/",{params:{user:i}}).then(function(t){e("playlists",t.data.results)})}}}},function(t,e,a){"use strict";e.a={namespaced:!0,state:{lastDate:new Date},mutations:{computeLastDate:function(t){t.lastDate=new Date}}}},,function(t,e,a){"use strict";function i(t,e,a){return e=e||100,a=a||"",t.length<=e?t:t.slice(0,e)+a}function s(t){return(new f.a.Converter).makeHtml(t)}function n(t){return v()(t).fromNow()}function r(t,e){return e=e||"lll",v()(t).format(e)}function o(t){return v()(t).year()}function l(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t){if(Math.abs(t)<1e3)return t+" B";var e=["kB","MB","GB","TB","PB","EB","ZB","YB"],a=-1;do{t/=1e3,++a}while(Math.abs(t)>=1e3&&a<e.length-1);return t.toFixed(1)+" "+e[a]}var u=a(11),d=a(0),v=a.n(d),p=a(687),f=a.n(p);u.a.filter("truncate",i),u.a.filter("markdown",s),u.a.filter("ago",n),u.a.filter("moment",r),u.a.filter("year",o),u.a.filter("capitalize",l),u.a.filter("humanSize",c)},function(t,e,a){function i(t){return a(s(t))}function s(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var n={"./af":113,"./af.js":113,"./ar":114,"./ar-dz":115,"./ar-dz.js":115,"./ar-kw":116,"./ar-kw.js":116,"./ar-ly":117,"./ar-ly.js":117,"./ar-ma":118,"./ar-ma.js":118,"./ar-sa":119,"./ar-sa.js":119,"./ar-tn":120,"./ar-tn.js":120,"./ar.js":114,"./az":121,"./az.js":121,"./be":122,"./be.js":122,"./bg":123,"./bg.js":123,"./bm":124,"./bm.js":124,"./bn":125,"./bn.js":125,"./bo":126,"./bo.js":126,"./br":127,"./br.js":127,"./bs":128,"./bs.js":128,"./ca":129,"./ca.js":129,"./cs":130,"./cs.js":130,"./cv":131,"./cv.js":131,"./cy":132,"./cy.js":132,"./da":133,"./da.js":133,"./de":134,"./de-at":135,"./de-at.js":135,"./de-ch":136,"./de-ch.js":136,"./de.js":134,"./dv":137,"./dv.js":137,"./el":138,"./el.js":138,"./en-au":139,"./en-au.js":139,"./en-ca":140,"./en-ca.js":140,"./en-gb":141,"./en-gb.js":141,"./en-ie":142,"./en-ie.js":142,"./en-il":143,"./en-il.js":143,"./en-nz":144,"./en-nz.js":144,"./eo":145,"./eo.js":145,"./es":146,"./es-do":147,"./es-do.js":147,"./es-us":148,"./es-us.js":148,"./es.js":146,"./et":149,"./et.js":149,"./eu":150,"./eu.js":150,"./fa":151,"./fa.js":151,"./fi":152,"./fi.js":152,"./fo":153,"./fo.js":153,"./fr":154,"./fr-ca":155,"./fr-ca.js":155,"./fr-ch":156,"./fr-ch.js":156,"./fr.js":154,"./fy":157,"./fy.js":157,"./gd":158,"./gd.js":158,"./gl":159,"./gl.js":159,"./gom-latn":160,"./gom-latn.js":160,"./gu":161,"./gu.js":161,"./he":162,"./he.js":162,"./hi":163,"./hi.js":163,"./hr":164,"./hr.js":164,"./hu":165,"./hu.js":165,"./hy-am":166,"./hy-am.js":166,"./id":167,"./id.js":167,"./is":168,"./is.js":168,"./it":169,"./it.js":169,"./ja":170,"./ja.js":170,"./jv":171,"./jv.js":171,"./ka":172,"./ka.js":172,"./kk":173,"./kk.js":173,"./km":174,"./km.js":174,"./kn":175,"./kn.js":175,"./ko":176,"./ko.js":176,"./ky":177,"./ky.js":177,"./lb":178,"./lb.js":178,"./lo":179,"./lo.js":179,"./lt":180,"./lt.js":180,"./lv":181,"./lv.js":181,"./me":182,"./me.js":182,"./mi":183,"./mi.js":183,"./mk":184,"./mk.js":184,"./ml":185,"./ml.js":185,"./mn":186,"./mn.js":186,"./mr":187,"./mr.js":187,"./ms":188,"./ms-my":189,"./ms-my.js":189,"./ms.js":188,"./mt":190,"./mt.js":190,"./my":191,"./my.js":191,"./nb":192,"./nb.js":192,"./ne":193,"./ne.js":193,"./nl":194,"./nl-be":195,"./nl-be.js":195,"./nl.js":194,"./nn":196,"./nn.js":196,"./pa-in":197,"./pa-in.js":197,"./pl":198,"./pl.js":198,"./pt":199,"./pt-br":200,"./pt-br.js":200,"./pt.js":199,"./ro":201,"./ro.js":201,"./ru":202,"./ru.js":202,"./sd":203,"./sd.js":203,"./se":204,"./se.js":204,"./si":205,"./si.js":205,"./sk":206,"./sk.js":206,"./sl":207,"./sl.js":207,"./sq":208,"./sq.js":208,"./sr":209,"./sr-cyrl":210,"./sr-cyrl.js":210,"./sr.js":209,"./ss":211,"./ss.js":211,"./sv":212,"./sv.js":212,"./sw":213,"./sw.js":213,"./ta":214,"./ta.js":214,"./te":215,"./te.js":215,"./tet":216,"./tet.js":216,"./tg":217,"./tg.js":217,"./th":218,"./th.js":218,"./tl-ph":219,"./tl-ph.js":219,"./tlh":220,"./tlh.js":220,"./tr":221,"./tr.js":221,"./tzl":222,"./tzl.js":222,"./tzm":223,"./tzm-latn":224,"./tzm-latn.js":224,"./tzm.js":223,"./ug-cn":225,"./ug-cn.js":225,"./uk":226,"./uk.js":226,"./ur":227,"./ur.js":227,"./uz":228,"./uz-latn":229,"./uz-latn.js":229,"./uz.js":228,"./vi":230,"./vi.js":230,"./x-pseudo":231,"./x-pseudo.js":231,"./yo":232,"./yo.js":232,"./zh-cn":233,"./zh-cn.js":233,"./zh-hk":234,"./zh-hk.js":234,"./zh-tw":235,"./zh-tw.js":235};i.keys=function(){return Object.keys(n)},i.resolve=s,t.exports=i,i.id=686},,function(t,e,a){"use strict";var i=a(11),s=a(689),n=a.n(s),r=a(692),o=a.n(r),l=a(695),c=a.n(l);i.a.component("human-date",n.a),i.a.component("username",o.a),i.a.component("dangerous-button",c.a)},function(t,e,a){var i=a(1)(a(690),a(691),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(17),s=a.n(i),n=a(13);e.default={props:["date"],computed:s()({},Object(n.d)({lastDate:function(t){return t.ui.lastDate}}),{realDate:function(){return this.lastDate,this.date}})}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("time",{attrs:{datetime:t.date,title:t._f("moment")(t.date)}},[t._v(t._s(t._f("ago")(t.realDate)))])},staticRenderFns:[]}},function(t,e,a){var i=a(1)(a(693),a(694),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["username"]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[t._v(t._s(t.username))])},staticRenderFns:[]}},function(t,e,a){var i=a(1)(a(696),a(697),null,null,null);t.exports=i.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(49),s=a.n(i);e.default={props:{action:{type:Function,required:!1},disabled:{type:Boolean,default:!1},color:{type:String,default:"red"},confirmColor:{type:String,default:null,required:!1}},components:{Modal:s.a},data:function(){return{showModal:!1}},computed:{confirmButtonColor:function(){return this.confirmColor?this.confirmColor:this.color}},methods:{confirm:function(){this.showModal=!1,this.$emit("confirm"),this.action&&this.action()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["ui",t.color,{disabled:t.disabled},"button"],attrs:{disabled:t.disabled},on:{click:function(e){t.showModal=!0}}},[t._t("default"),t._v(" "),a("modal",{staticClass:"small",attrs:{show:t.showModal},on:{"update:show":function(e){t.showModal=e}}},[a("div",{staticClass:"header"},[t._t("modal-header",[a("i18next",{attrs:{path:"Do you want to confirm this action?"}})])],2),t._v(" "),a("div",{staticClass:"scrolling content"},[a("div",{staticClass:"description"},[t._t("modal-content")],2)]),t._v(" "),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui cancel button"},[a("i18next",{attrs:{path:"Cancel"}})],1),t._v(" "),a("div",{class:["ui","confirm",t.confirmButtonColor,"button"],on:{click:t.confirm}},[t._t("modal-confirm",[a("i18next",{attrs:{path:"Confirm"}})])],2)])])],2)},staticRenderFns:[]}}],[236]);
//# sourceMappingURL=app.fbd38a6190486de1d0d7.js.map